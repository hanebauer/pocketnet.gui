{"version":3,"file":"634.chunk.js?v=5159","mappings":"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","sources":["webpack://peertube-client/./node_modules/abortcontroller-polyfill/dist/polyfill-patch-fetch.js","webpack://peertube-client/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://peertube-client/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://peertube-client/./node_modules/@videojs/vhs-utils/es/stream.js","webpack://peertube-client/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://peertube-client/./node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js","webpack://peertube-client/./node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack://peertube-client/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://peertube-client/./node_modules/sha.js/hash.js","webpack://peertube-client/./node_modules/sha.js/sha1.js"],"sourcesContent":["(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n}((function () { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  var Emitter = /*#__PURE__*/function () {\n    function Emitter() {\n      _classCallCheck(this, Emitter);\n\n      Object.defineProperty(this, 'listeners', {\n        value: {},\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(Emitter, [{\n      key: \"addEventListener\",\n      value: function addEventListener(type, callback, options) {\n        if (!(type in this.listeners)) {\n          this.listeners[type] = [];\n        }\n\n        this.listeners[type].push({\n          callback: callback,\n          options: options\n        });\n      }\n    }, {\n      key: \"removeEventListener\",\n      value: function removeEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[type];\n\n        for (var i = 0, l = stack.length; i < l; i++) {\n          if (stack[i].callback === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (!(event.type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[event.type];\n        var stackToCall = stack.slice();\n\n        for (var i = 0, l = stackToCall.length; i < l; i++) {\n          var listener = stackToCall[i];\n\n          try {\n            listener.callback.call(this, event);\n          } catch (e) {\n            Promise.resolve().then(function () {\n              throw e;\n            });\n          }\n\n          if (listener.options && listener.options.once) {\n            this.removeEventListener(event.type, listener.callback);\n          }\n        }\n\n        return !event.defaultPrevented;\n      }\n    }]);\n\n    return Emitter;\n  }();\n\n  var AbortSignal = /*#__PURE__*/function (_Emitter) {\n    _inherits(AbortSignal, _Emitter);\n\n    var _super = _createSuper(AbortSignal);\n\n    function AbortSignal() {\n      var _this;\n\n      _classCallCheck(this, AbortSignal);\n\n      _this = _super.call(this); // Some versions of babel does not transpile super() correctly for IE <= 10, if the parent\n      // constructor has failed to run, then \"this.listeners\" will still be undefined and then we call\n      // the parent constructor directly instead as a workaround. For general details, see babel bug:\n      // https://github.com/babel/babel/issues/3041\n      // This hack was added as a fix for the issue described here:\n      // https://github.com/Financial-Times/polyfill-library/pull/59#issuecomment-477558042\n\n      if (!_this.listeners) {\n        Emitter.call(_assertThisInitialized(_this));\n      } // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController().signal) to be [] for compat with the native impl\n\n\n      Object.defineProperty(_assertThisInitialized(_this), 'aborted', {\n        value: false,\n        writable: true,\n        configurable: true\n      });\n      Object.defineProperty(_assertThisInitialized(_this), 'onabort', {\n        value: null,\n        writable: true,\n        configurable: true\n      });\n      return _this;\n    }\n\n    _createClass(AbortSignal, [{\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortSignal]';\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (event.type === 'abort') {\n          this.aborted = true;\n\n          if (typeof this.onabort === 'function') {\n            this.onabort.call(this, event);\n          }\n        }\n\n        _get(_getPrototypeOf(AbortSignal.prototype), \"dispatchEvent\", this).call(this, event);\n      }\n    }]);\n\n    return AbortSignal;\n  }(Emitter);\n  var AbortController = /*#__PURE__*/function () {\n    function AbortController() {\n      _classCallCheck(this, AbortController);\n\n      // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController()) to be [] for compat with the native impl\n      Object.defineProperty(this, 'signal', {\n        value: new AbortSignal(),\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(AbortController, [{\n      key: \"abort\",\n      value: function abort() {\n        var event;\n\n        try {\n          event = new Event('abort');\n        } catch (e) {\n          if (typeof document !== 'undefined') {\n            if (!document.createEvent) {\n              // For Internet Explorer 8:\n              event = document.createEventObject();\n              event.type = 'abort';\n            } else {\n              // For Internet Explorer 11:\n              event = document.createEvent('Event');\n              event.initEvent('abort', false, false);\n            }\n          } else {\n            // Fallback where document isn't available:\n            event = {\n              type: 'abort',\n              bubbles: false,\n              cancelable: false\n            };\n          }\n        }\n\n        this.signal.dispatchEvent(event);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortController]';\n      }\n    }]);\n\n    return AbortController;\n  }();\n\n  if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n    // These are necessary to make sure that we get correct output for:\n    // Object.prototype.toString.call(new AbortController())\n    AbortController.prototype[Symbol.toStringTag] = 'AbortController';\n    AbortSignal.prototype[Symbol.toStringTag] = 'AbortSignal';\n  }\n\n  function polyfillNeeded(self) {\n    if (self.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      console.log('__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill');\n      return true;\n    } // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // so the below feature detection needs the !self.AbortController part.\n    // The Request.prototype check is also needed because Safari versions 11.1.2\n    // up to and including 12.1.x has a window.AbortController present but still\n    // does NOT correctly implement abortable fetch:\n    // https://bugs.webkit.org/show_bug.cgi?id=174980#c2\n\n\n    return typeof self.Request === 'function' && !self.Request.prototype.hasOwnProperty('signal') || !self.AbortController;\n  }\n\n  /**\n   * Note: the \"fetch.Request\" default value is available for fetch imported from\n   * the \"node-fetch\" package and not in browsers. This is OK since browsers\n   * will be importing umd-polyfill.js from that path \"self\" is passed the\n   * decorator so the default value will not be used (because browsers that define\n   * fetch also has Request). One quirky setup where self.fetch exists but\n   * self.Request does not is when the \"unfetch\" minimal fetch polyfill is used\n   * on top of IE11; for this case the browser will try to use the fetch.Request\n   * default value which in turn will be undefined but then then \"if (Request)\"\n   * will ensure that you get a patched fetch but still no Request (as expected).\n   * @param {fetch, Request = fetch.Request}\n   * @returns {fetch: abortableFetch, Request: AbortableRequest}\n   */\n\n  function abortableFetchDecorator(patchTargets) {\n    if ('function' === typeof patchTargets) {\n      patchTargets = {\n        fetch: patchTargets\n      };\n    }\n\n    var _patchTargets = patchTargets,\n        fetch = _patchTargets.fetch,\n        _patchTargets$Request = _patchTargets.Request,\n        NativeRequest = _patchTargets$Request === void 0 ? fetch.Request : _patchTargets$Request,\n        NativeAbortController = _patchTargets.AbortController,\n        _patchTargets$__FORCE = _patchTargets.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,\n        __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL = _patchTargets$__FORCE === void 0 ? false : _patchTargets$__FORCE;\n\n    if (!polyfillNeeded({\n      fetch: fetch,\n      Request: NativeRequest,\n      AbortController: NativeAbortController,\n      __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL: __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL\n    })) {\n      return {\n        fetch: fetch,\n        Request: Request\n      };\n    }\n\n    var Request = NativeRequest; // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // hence we only patch it if it's available. Also we don't patch it if signal\n    // is already available on the Request prototype because in this case support\n    // is present and the patching below can cause a crash since it assigns to\n    // request.signal which is technically a read-only property. This latter error\n    // happens when you run the main5.js node-fetch example in the repo\n    // \"abortcontroller-polyfill-examples\". The exact error is:\n    //   request.signal = init.signal;\n    //   ^\n    // TypeError: Cannot set property signal of #<Request> which has only a getter\n\n    if (Request && !Request.prototype.hasOwnProperty('signal') || __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      Request = function Request(input, init) {\n        var signal;\n\n        if (init && init.signal) {\n          signal = init.signal; // Never pass init.signal to the native Request implementation when the polyfill has\n          // been installed because if we're running on top of a browser with a\n          // working native AbortController (i.e. the polyfill was installed due to\n          // __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL being set), then passing our\n          // fake AbortSignal to the native fetch will trigger:\n          // TypeError: Failed to construct 'Request': member signal is not of type AbortSignal.\n\n          delete init.signal;\n        }\n\n        var request = new NativeRequest(input, init);\n\n        if (signal) {\n          Object.defineProperty(request, 'signal', {\n            writable: false,\n            enumerable: false,\n            configurable: true,\n            value: signal\n          });\n        }\n\n        return request;\n      };\n\n      Request.prototype = NativeRequest.prototype;\n    }\n\n    var realFetch = fetch;\n\n    var abortableFetch = function abortableFetch(input, init) {\n      var signal = Request && Request.prototype.isPrototypeOf(input) ? input.signal : init ? init.signal : undefined;\n\n      if (signal) {\n        var abortError;\n\n        try {\n          abortError = new DOMException('Aborted', 'AbortError');\n        } catch (err) {\n          // IE 11 does not support calling the DOMException constructor, use a\n          // regular error object on it instead.\n          abortError = new Error('Aborted');\n          abortError.name = 'AbortError';\n        } // Return early if already aborted, thus avoiding making an HTTP request\n\n\n        if (signal.aborted) {\n          return Promise.reject(abortError);\n        } // Turn an event into a promise, reject it once `abort` is dispatched\n\n\n        var cancellation = new Promise(function (_, reject) {\n          signal.addEventListener('abort', function () {\n            return reject(abortError);\n          }, {\n            once: true\n          });\n        });\n\n        if (init && init.signal) {\n          // Never pass .signal to the native implementation when the polyfill has\n          // been installed because if we're running on top of a browser with a\n          // working native AbortController (i.e. the polyfill was installed due to\n          // __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL being set), then passing our\n          // fake AbortSignal to the native fetch will trigger:\n          // TypeError: Failed to execute 'fetch' on 'Window': member signal is not of type AbortSignal.\n          delete init.signal;\n        } // Return the fastest promise (don't need to wait for request to finish)\n\n\n        return Promise.race([cancellation, realFetch(input, init)]);\n      }\n\n      return realFetch(input, init);\n    };\n\n    return {\n      fetch: abortableFetch,\n      Request: Request\n    };\n  }\n\n  (function (self) {\n\n    if (!polyfillNeeded(self)) {\n      return;\n    }\n\n    if (!self.fetch) {\n      console.warn('fetch() is not available, cannot install abortcontroller-polyfill');\n      return;\n    }\n\n    var _abortableFetch = abortableFetchDecorator(self),\n        fetch = _abortableFetch.fetch,\n        Request = _abortableFetch.Request;\n\n    self.fetch = fetch;\n    self.Request = Request;\n    Object.defineProperty(self, 'AbortController', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: AbortController\n    });\n    Object.defineProperty(self, 'AbortSignal', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: AbortSignal\n    });\n  })(typeof self !== 'undefined' ? self : global);\n\n})));\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\nexport { Stream as default };","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import window from 'global/window';\n\nvar atob = function atob(s) {\n  return window.atob ? window.atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nexport default function decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}","/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport Stream from '@videojs/vhs-utils/es/stream.js';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/es/decode-b64-to-uint8-array.js';\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n\nvar TAB = String.fromCharCode(0x09);\n\nvar parseByterange = function parseByterange(byterangeString) {\n  // optionally match and capture 0+ digits before `@`\n  // optionally match and capture 0+ digits after `@`\n  var match = /([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString || '');\n  var result = {};\n\n  if (match[1]) {\n    result.length = parseInt(match[1], 10);\n  }\n\n  if (match[2]) {\n    result.offset = parseInt(match[2], 10);\n  }\n\n  return result;\n};\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = _extends(parseByterange(match[1]), {\n          type: 'tag',\n          tagType: 'byterange'\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            event.byterange = parseByterange(attributes.BYTERANGE);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-SKIP:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'skip'\n        };\n        event.attributes = parseAttributes(match[1]);\n\n        if (event.attributes.hasOwnProperty('SKIPPED-SEGMENTS')) {\n          event.attributes['SKIPPED-SEGMENTS'] = parseInt(event.attributes['SKIPPED-SEGMENTS'], 10);\n        }\n\n        if (event.attributes.hasOwnProperty('RECENTLY-REMOVED-DATERANGES')) {\n          event.attributes['RECENTLY-REMOVED-DATERANGES'] = event.attributes['RECENTLY-REMOVED-DATERANGES'].split(TAB);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PART:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['DURATION'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['INDEPENDENT', 'GAP'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        if (event.attributes.hasOwnProperty('BYTERANGE')) {\n          event.attributes.byterange = parseByterange(event.attributes.BYTERANGE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'server-control'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['CAN-SKIP-UNTIL', 'PART-HOLD-BACK', 'HOLD-BACK'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['CAN-SKIP-DATERANGES', 'CAN-BLOCK-RELOAD'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PART-INF:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part-inf'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['PART-TARGET'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'preload-hint'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['BYTERANGE-START', 'BYTERANGE-LENGTH'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n            var subkey = key === 'BYTERANGE-LENGTH' ? 'length' : 'offset';\n            event.attributes.byterange = event.attributes.byterange || {};\n            event.attributes.byterange[subkey] = event.attributes[key]; // only keep the parsed byterange object.\n\n            delete event.attributes[key];\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'rendition-report'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['LAST-MSN', 'LAST-PART'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n\nvar camelCase = function camelCase(str) {\n  return str.toLowerCase().replace(/-(\\w)/g, function (a) {\n    return a[1].toUpperCase();\n  });\n};\n\nvar camelCaseKeys = function camelCaseKeys(attributes) {\n  var result = {};\n  Object.keys(attributes).forEach(function (key) {\n    result[camelCase(key)] = attributes[key];\n  });\n  return result;\n}; // set SERVER-CONTROL hold back based upon targetDuration and partTargetDuration\n// we need this helper because defaults are based upon targetDuration and\n// partTargetDuration being set, but they may not be if SERVER-CONTROL appears before\n// target durations are set.\n\n\nvar setHoldBack = function setHoldBack(manifest) {\n  var serverControl = manifest.serverControl,\n      targetDuration = manifest.targetDuration,\n      partTargetDuration = manifest.partTargetDuration;\n\n  if (!serverControl) {\n    return;\n  }\n\n  var tag = '#EXT-X-SERVER-CONTROL';\n  var hb = 'holdBack';\n  var phb = 'partHoldBack';\n  var minTargetDuration = targetDuration && targetDuration * 3;\n  var minPartDuration = partTargetDuration && partTargetDuration * 2;\n\n  if (targetDuration && !serverControl.hasOwnProperty(hb)) {\n    serverControl[hb] = minTargetDuration;\n    this.trigger('info', {\n      message: tag + \" defaulting HOLD-BACK to targetDuration * 3 (\" + minTargetDuration + \").\"\n    });\n  }\n\n  if (minTargetDuration && serverControl[hb] < minTargetDuration) {\n    this.trigger('warn', {\n      message: tag + \" clamping HOLD-BACK (\" + serverControl[hb] + \") to targetDuration * 3 (\" + minTargetDuration + \")\"\n    });\n    serverControl[hb] = minTargetDuration;\n  } // default no part hold back to part target duration * 3\n\n\n  if (partTargetDuration && !serverControl.hasOwnProperty(phb)) {\n    serverControl[phb] = partTargetDuration * 3;\n    this.trigger('info', {\n      message: tag + \" defaulting PART-HOLD-BACK to partTargetDuration * 3 (\" + serverControl[phb] + \").\"\n    });\n  } // if part hold back is too small default it to part target duration * 2\n\n\n  if (partTargetDuration && serverControl[phb] < minPartDuration) {\n    this.trigger('warn', {\n      message: tag + \" clamping PART-HOLD-BACK (\" + serverControl[phb] + \") to partTargetDuration * 2 (\" + minPartDuration + \").\"\n    });\n    serverControl[phb] = minPartDuration;\n  }\n};\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nvar Parser = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var hasParts = false;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    var lastByterangeEnd = 0; // keep track of the last seen part's byte range end.\n\n    var lastPartByterangeEnd = 0;\n\n    _this.on('end', function () {\n      // only add preloadSegment if we don't yet have a uri for it.\n      // and we actually have parts/preloadHints\n      if (currentUri.uri || !currentUri.parts && !currentUri.preloadHints) {\n        return;\n      }\n\n      if (!currentUri.map && currentMap) {\n        currentUri.map = currentMap;\n      }\n\n      if (!currentUri.key && _key) {\n        currentUri.key = _key;\n      }\n\n      if (!currentUri.timeline && typeof currentTimeline === 'number') {\n        currentUri.timeline = currentTimeline;\n      }\n\n      _this.manifest.preloadSegment = currentUri;\n    }); // update the manifest with the m3u8 entry from the parse stream\n\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            version: function version() {\n              if (entry.version) {\n                this.manifest.version = entry.version;\n              }\n            },\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.apple.streamingkeydelivery') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.apple.fps.1_0'] = {\n                  attributes: entry.attributes\n                };\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = this.manifest.contentProtection || {};\n                this.manifest.contentProtection['com.widevine.alpha'] = {\n                  attributes: {\n                    schemeIdUri: entry.attributes.KEYFORMAT,\n                    // remove '0x' from the key id string\n                    keyId: entry.attributes.KEYID.substring(2)\n                  },\n                  // decode the base64-encoded PSSH box\n                  pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n\n              if (_key) {\n                currentMap.key = _key;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n              setHoldBack.call(this, this.manifest);\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            },\n            'skip': function skip() {\n              this.manifest.skip = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-SKIP', entry.attributes, ['SKIPPED-SEGMENTS']);\n            },\n            'part': function part() {\n              var _this2 = this;\n\n              hasParts = true; // parts are always specifed before a segment\n\n              var segmentIndex = this.manifest.segments.length;\n              var part = camelCaseKeys(entry.attributes);\n              currentUri.parts = currentUri.parts || [];\n              currentUri.parts.push(part);\n\n              if (part.byterange) {\n                if (!part.byterange.hasOwnProperty('offset')) {\n                  part.byterange.offset = lastPartByterangeEnd;\n                }\n\n                lastPartByterangeEnd = part.byterange.offset + part.byterange.length;\n              }\n\n              var partIndex = currentUri.parts.length - 1;\n              this.warnOnMissingAttributes_(\"#EXT-X-PART #\" + partIndex + \" for segment #\" + segmentIndex, entry.attributes, ['URI', 'DURATION']);\n\n              if (this.manifest.renditionReports) {\n                this.manifest.renditionReports.forEach(function (r, i) {\n                  if (!r.hasOwnProperty('lastPart')) {\n                    _this2.trigger('warn', {\n                      message: \"#EXT-X-RENDITION-REPORT #\" + i + \" lacks required attribute(s): LAST-PART\"\n                    });\n                  }\n                });\n              }\n            },\n            'server-control': function serverControl() {\n              var attrs = this.manifest.serverControl = camelCaseKeys(entry.attributes);\n\n              if (!attrs.hasOwnProperty('canBlockReload')) {\n                attrs.canBlockReload = false;\n                this.trigger('info', {\n                  message: '#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false'\n                });\n              }\n\n              setHoldBack.call(this, this.manifest);\n\n              if (attrs.canSkipDateranges && !attrs.hasOwnProperty('canSkipUntil')) {\n                this.trigger('warn', {\n                  message: '#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set'\n                });\n              }\n            },\n            'preload-hint': function preloadHint() {\n              // parts are always specifed before a segment\n              var segmentIndex = this.manifest.segments.length;\n              var hint = camelCaseKeys(entry.attributes);\n              var isPart = hint.type && hint.type === 'PART';\n              currentUri.preloadHints = currentUri.preloadHints || [];\n              currentUri.preloadHints.push(hint);\n\n              if (hint.byterange) {\n                if (!hint.byterange.hasOwnProperty('offset')) {\n                  // use last part byterange end or zero if not a part.\n                  hint.byterange.offset = isPart ? lastPartByterangeEnd : 0;\n\n                  if (isPart) {\n                    lastPartByterangeEnd = hint.byterange.offset + hint.byterange.length;\n                  }\n                }\n              }\n\n              var index = currentUri.preloadHints.length - 1;\n              this.warnOnMissingAttributes_(\"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex, entry.attributes, ['TYPE', 'URI']);\n\n              if (!hint.type) {\n                return;\n              } // search through all preload hints except for the current one for\n              // a duplicate type.\n\n\n              for (var i = 0; i < currentUri.preloadHints.length - 1; i++) {\n                var otherHint = currentUri.preloadHints[i];\n\n                if (!otherHint.type) {\n                  continue;\n                }\n\n                if (otherHint.type === hint.type) {\n                  this.trigger('warn', {\n                    message: \"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex + \" has the same TYPE \" + hint.type + \" as preload hint #\" + i\n                  });\n                }\n              }\n            },\n            'rendition-report': function renditionReport() {\n              var report = camelCaseKeys(entry.attributes);\n              this.manifest.renditionReports = this.manifest.renditionReports || [];\n              this.manifest.renditionReports.push(report);\n              var index = this.manifest.renditionReports.length - 1;\n              var required = ['LAST-MSN', 'URI'];\n\n              if (hasParts) {\n                required.push('LAST-PART');\n              }\n\n              this.warnOnMissingAttributes_(\"#EXT-X-RENDITION-REPORT #\" + index, entry.attributes, required);\n            },\n            'part-inf': function partInf() {\n              this.manifest.partInf = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-PART-INF', entry.attributes, ['PART-TARGET']);\n\n              if (this.manifest.partInf.partTarget) {\n                this.manifest.partTargetDuration = this.manifest.partInf.partTarget;\n              }\n\n              setHoldBack.call(this, this.manifest);\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // reset the last byterange end as it needs to be 0 between parts\n\n\n          lastPartByterangeEnd = 0; // prepare for the next URI\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n\n  var _proto = Parser.prototype;\n\n  _proto.warnOnMissingAttributes_ = function warnOnMissingAttributes_(identifier, attributes, required) {\n    var missing = [];\n    required.forEach(function (key) {\n      if (!attributes.hasOwnProperty(key)) {\n        missing.push(key);\n      }\n    });\n\n    if (missing.length) {\n      this.trigger('warn', {\n        message: identifier + \" lacks required attribute(s): \" + missing.join(', ')\n      });\n    }\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n  ;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n    this.trigger('end');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","var Buffer = require('safe-buffer').Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n"],"names":["define","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","call","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","_superPropBase","object","property","hasOwnProperty","_get","receiver","get","base","desc","getOwnPropertyDescriptor","Emitter","type","callback","options","listeners","push","stack","l","splice","event","stackToCall","slice","listener","Promise","resolve","then","once","removeEventListener","defaultPrevented","AbortSignal","_Emitter","_super","_this","aborted","onabort","AbortController","Event","document","createEvent","initEvent","createEventObject","bubbles","cancelable","signal","dispatchEvent","polyfillNeeded","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL","console","log","Request","abortableFetchDecorator","patchTargets","fetch","_patchTargets","_patchTargets$Request","NativeRequest","NativeAbortController","_patchTargets$__FORCE","input","init","request","realFetch","isPrototypeOf","undefined","abortError","DOMException","err","Error","name","reject","cancellation","_","addEventListener","race","Symbol","toStringTag","_abortableFetch","warn","global","_inheritsLoose","Stream","_proto","on","off","index","indexOf","trigger","callbacks","args","Array","_length","_i","dispose","pipe","destination","data","_extends","assign","source","decodeB64ToUint8Array","b64Text","s","decodedString","window","Buffer","from","toString","array","Uint8Array","charCodeAt","LineStream","_Stream","buffer","nextNewline","substring","TAB","String","fromCharCode","parseByterange","byterangeString","match","exec","parseInt","offset","parseAttributes","attributes","attr","attrs","split","RegExp","replace","ParseStream","customParsers","tagMappers","line","_this2","trim","reduce","acc","mapper","mappedLine","concat","forEach","newLine","tagType","duration","parseFloat","title","version","number","playlistType","allowed","test","URI","uri","BYTERANGE","byterange","RESOLUTION","resolution","width","height","BANDWIDTH","dateTimeString","dateTimeObject","Date","IV","toLowerCase","Uint32Array","PRECISE","subkey","text","addParser","_ref","_this3","expression","customType","dataParser","segment","addTagMapper","_ref2","map","camelCaseKeys","keys","str","a","toUpperCase","setHoldBack","manifest","serverControl","targetDuration","partTargetDuration","tag","hb","phb","minTargetDuration","minPartDuration","message","Parser","lineStream","parseStream","currentMap","_key","uris","currentUri","hasParts","noop","defaultMediaGroups","currentTimeline","allowCache","discontinuityStarts","segments","lastByterangeEnd","lastPartByterangeEnd","parts","preloadHints","timeline","preloadSegment","entry","mediaGroup","rendition","endlist","endList","inf","mediaSequence","discontinuitySequence","METHOD","KEYFORMAT","contentProtection","KEYID","schemeIdUri","keyId","pssh","method","iv","isFinite","playlist","playlists","mediaGroups","media","TYPE","NAME","mediaGroupType","default","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","targetduration","start","isNaN","timeOffset","precise","cueOut","cueOutCont","cueIn","skip","warnOnMissingAttributes_","segmentIndex","part","partIndex","renditionReports","r","canBlockReload","canSkipDateranges","hint","isPart","otherHint","report","required","partInf","partTarget","comment","custom","identifier","missing","join","chunk","end","require","Hash","blockSize","finalSize","_block","alloc","_finalSize","_blockSize","_len","update","enc","block","accum","assigned","remainder","Math","min","_update","digest","rem","fill","bits","writeUInt32BE","lowBits","highBits","hash","_hash","module","exports","inherits","K","W","Sha1","_w","rotl5","num","rotl30","ft","b","c","d","_a","_b","_c","_d","_e","M","readInt32BE","j","t","H","allocUnsafe","writeInt32BE"],"sourceRoot":""}