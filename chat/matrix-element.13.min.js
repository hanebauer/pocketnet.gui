(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[13],{"0125":function(t,e,a){var i=a("9f06");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("3021f4e7",i,t)}},"0d89":function(t,e,a){"use strict";a.r(e);var i=a("ba27");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"3d91":function(t,e,a){var i=a("a52e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("7329b621",i,t)}},"3e9e":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".chats-list .searchWrapperEA[data-v-5bec5aa4]{margin-top:.5em}#simpleSearch[data-v-5bec5aa4]{margin-left:.25em;margin-right:.25em}.removeRoom[data-v-5bec5aa4]{width:62px;height:100%;background:rgb(var(--color-bad));border-radius:3px}.removeRoom i[data-v-5bec5aa4]{color:#fff}.chatsearchingempty[data-v-5bec5aa4]{padding:2em;text-align:center}.chatsearchingempty span[data-v-5bec5aa4]{font-size:1.5em;font-weight:100}.generatekeys[data-v-5bec5aa4],.inviteUserDiv[data-v-5bec5aa4]{margin-top:.5em;margin-bottom:1em}.generatekeys .generatekeysButton[data-v-5bec5aa4],.generatekeys .inviteButton[data-v-5bec5aa4],.inviteUserDiv .generatekeysButton[data-v-5bec5aa4],.inviteUserDiv .inviteButton[data-v-5bec5aa4]{background-color:rgb(var(--color-bg-orange));color:#fff;width:100%;height:34px;font-size:.9em;border-radius:30px;position:relative;cursor:pointer}.generatekeys .generatekeysButton i[data-v-5bec5aa4],.generatekeys .inviteButton i[data-v-5bec5aa4],.inviteUserDiv .generatekeysButton i[data-v-5bec5aa4],.inviteUserDiv .inviteButton i[data-v-5bec5aa4]{position:absolute;right:0;top:0;line-height:34px;width:50px;text-align:center}[data-v-5bec5aa4] .statusIcon{font-size:.8em}.desktopList .card-content[data-v-5bec5aa4]{position:absolute;width:100%;left:0;right:0;height:60px}.bout .desktopList .card-content[data-v-5bec5aa4]{height:70px;contain:strict}.selectedForShare[data-v-5bec5aa4]{background:rgba(var(--color-shadow-base),.8)!important}.selectedForShare .paddingwrapper[data-v-5bec5aa4]{position:absolute;left:50px;top:100px;bottom:100px;right:50px;overflow:hidden;border-radius:50%}.selectedForShare .paddingwrapper .chatwrapper[data-v-5bec5aa4]{position:absolute;background:rgb(var(--background-total-theme));left:-50px;top:-100px;bottom:-100px;right:-50px}.selectedForShare[data-v-5bec5aa4] .chatInputWrapper{display:none}.previewWrapper[data-v-5bec5aa4]:last-child{border-bottom:0}.swipeout-list[data-v-5bec5aa4]{display:flex;flex-direction:column}.startnewchat[data-v-5bec5aa4],.unauthorized[data-v-5bec5aa4]{padding:2em 0;text-align:center}.startnewchat .buttonWrapper[data-v-5bec5aa4],.unauthorized .buttonWrapper[data-v-5bec5aa4]{padding:1em}.startnewchat .captionWrapper[data-v-5bec5aa4],.unauthorized .captionWrapper[data-v-5bec5aa4]{padding:1em;text-align:center}.startnewchat .captionWrapper span[data-v-5bec5aa4],.unauthorized .captionWrapper span[data-v-5bec5aa4]{font-size:1.5em;font-weight:100}.card[data-v-5bec5aa4]{width:100%;border-radius:3px}.inviteUserDivWrapper[data-v-5bec5aa4]{transition:.3s}.chats-list.minimized:not(.active) .inviteUserDivWrapper[data-v-5bec5aa4],.chats-list.minimized:not(.active) .startnewchat[data-v-5bec5aa4],.chats-list.minimized:not(.active) .unauthorized[data-v-5bec5aa4],.unauthorized.minimized[data-v-5bec5aa4]:not(.active){display:none}.list-enter-active[data-v-5bec5aa4],.list-leave-active[data-v-5bec5aa4]{transition:all .5s ease}.list-enter-from[data-v-5bec5aa4],.list-leave-to[data-v-5bec5aa4]{opacity:0;transform:translateX(30px)}.fade-enter-active[data-v-5bec5aa4],.fade-leave-active[data-v-5bec5aa4]{transition:opacity .3s ease}.fade-enter-from[data-v-5bec5aa4],.fade-leave-to[data-v-5bec5aa4]{opacity:0}",""]),t.exports=e},"3ee4":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".card-content .chatGroupIcon img{width:100%!important}",""]),t.exports=e},"3f0d":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".namebuttoncreate[data-v-e0758c0e],.selectedtype[data-v-e0758c0e],.type[data-v-e0758c0e]{padding:1em;display:flex;align-items:center;border-bottom:1px solid rgb(var(--neutral-grad-0));white-space:nowrap;text-overflow:ellipsis;overflow:hidden;cursor:pointer}.namebuttoncreate .icon i[data-v-e0758c0e],.selectedtype .icon i[data-v-e0758c0e],.type .icon i[data-v-e0758c0e]{width:30px;opacity:.7;font-size:.8em}.namebuttoncreate span[data-v-e0758c0e],.selectedtype span[data-v-e0758c0e],.type span[data-v-e0758c0e]{font-size:.9em}.namebuttoncreate button[data-v-e0758c0e],.selectedtype button[data-v-e0758c0e],.type button[data-v-e0758c0e]{white-space:nowrap;min-width:0!important}.namebuttoncreate input[data-v-e0758c0e],.selectedtype input[data-v-e0758c0e],.type input[data-v-e0758c0e]{width:auto}.namebuttoncreate .completewrapper[data-v-e0758c0e],.selectedtype .completewrapper[data-v-e0758c0e],.type .completewrapper[data-v-e0758c0e]{flex-grow:1;text-align:right}.namebuttoncreate[data-v-e0758c0e]{padding-top:0;padding-bottom:0}.namebuttoncreate>div[data-v-e0758c0e]{flex-grow:1}.namebuttoncreate input[data-v-e0758c0e]{width:100%;padding-top:1em;padding-bottom:1em}.selectedtype[data-v-e0758c0e]{background:rgb(var(--background-total-theme));position:sticky;top:-1px;z-index:12}.selectedtype .icon[data-v-e0758c0e]{cursor:pointer;transition:.3s}.selectedtype .icon[data-v-e0758c0e]:hover{opacity:.5}.selectedtype .label[data-v-e0758c0e]{font-weight:700;font-size:.8em}.oneonone[data-v-e0758c0e] .namebuttoncreate{display:none}.oneonone[data-v-e0758c0e] .searchWrapperEA{background:rgb(var(--background-total-theme));position:sticky;top:-1px;z-index:12;padding-bottom:.5em}",""]),t.exports=e},"3f42":function(t,e,a){var i=a("3e9e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("40f8e9f5",i,t)}},"51da":function(t,e,a){var i=a("fd85");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("0333374e",i,t)}},"5ce1":function(t,e,a){"use strict";a.r(e);var i=a("627d");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"627d":function(t,e,a){var i=a("3ee4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("79f44200",i,t)}},7923:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".toggleChatGroup[data-v-73b35124]{list-style:none;padding:0;margin:0;display:flex;justify-content:flex-start;align-items:center}.toggleChatGroup li[data-v-73b35124]{margin-right:10px;padding:10px 0}.logo20[data-v-73b35124]{width:20px;height:20px}.iconbuttonsmall[data-v-73b35124]{color:rgb(var(--neutral-grad-3))}.iconbuttonsmall.active[data-v-73b35124],.iconbuttonsmall[data-v-73b35124]:hover{color:rgb(var(--color-txt-ac))}.iconbuttonsmall.active[data-v-73b35124]:hover{color:rgb(var(--neutral-grad-3))}",""]),t.exports=e},"7adb":function(t,e,a){"use strict";a.r(e);var i=a("3d91");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"80c1":function(t,e,a){"use strict";a.r(e);var i=a("3f42");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"80fe":function(t,e,a){"use strict";a.r(e);var i=a("ff48");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"9a41":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page chats",class:{pocketnet:t.pocketnet,mobile:t.mobile,minimized:t.minimized,active:t.active,newChat:t.newChat}},[e("topheader",{staticClass:"topheader",attrs:{share:t.share},on:{newchat:t.newchat}}),e("maincontent",{ref:"maincontent",attrs:{rbackexp:!0},scopedSlots:t._u([{key:"content",fn:function(){return[e("list",{attrs:{share:t.share,processid:t.processid},on:{scrolltop:t.scrolltop}}),e("transition",{attrs:{name:"fademodal"}},[t.newChat&&!t.hiddenInParent?e("modal",{on:{close:t.closeNewChat},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("caption.newChat")))]},proxy:!0},{key:"body",fn:function(){return[e("chatcreate",{on:{completed:t.chatcreated}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,1284178828)}):t._e()],1)]},proxy:!0}])})],1)},s=[],o=(a("14d9"),function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chats-list",class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active,empty:t.empty}},[t.unauthorized?e("div",{staticClass:"dmdv"}):e("div",[!t.minimized||t.active?e("div",{staticClass:"searchWrapperEA"},[e("simpleSearch",{attrs:{value:t.globalsearch},on:{search:t.searchall}})],1):t._e(),!t.matches.value&&this.chats.length<=2&&!0===t.chatsready?e("teamroom",{on:{click:t.openTeamRoom}}):t._e(),!0!==t.chatsready?e("div",{staticClass:"listChatLoading"},[e("dummypreviews")],1):e("div",{staticClass:"Swipes"},[e("div",{staticClass:"desktopList"},[t.globalsearch?e("div",{staticClass:"searchresults"},[e("AllContacts",{attrs:{chats:t.chats,search:t.globalsearch},on:{clearsearch:()=>t.searchall("")}})],1):e("div",{staticClass:"chatswrapper"},[e("RecycleScroller",{staticClass:"scroller",attrs:{"page-mode":"",items:t.chats,"item-size":t.pocketnet?60:70,"key-field":"key",buffer:400},scopedSlots:t._u([{key:"default",fn:function(a){let{item:i,active:s}=a;return[i?e("div",{staticClass:"card-content",on:{click:e=>t.itemClick(i)}},[s?e("preview",{attrs:{chat:i}}):t._e()],1):t._e()]}}],null,!1,1696706594)})],1)])])],1)])}),r=[],n=a("2f62"),c=a("a54c"),d=a("087d"),l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chatswrapper"},[t._l(t.filteredLists,(function(a){let{items:i,section:s}=a;return i.length?e("section",{staticClass:"chats"},[e("div",{staticClass:"section-title"},[e("span",[t._v(t._s(t.$t("caption."+s.key)))])]),t._l(i,(function(a){return e("div",{key:a.roomId||a.id,staticClass:"card-content",on:{click:function(e){return t.itemClick(a,s)}}},["room"==s.view?e("previewRoom",{staticClass:"room",attrs:{chat:a}}):t._e(),"roomWithMessage"==s.view?e("previewRoom",{staticClass:"room",attrs:{chat:a.chat,messages:a.messages}}):t._e(),"contact"==s.view?e("previewContact",{staticClass:"contact",attrs:{contact:a,mode:t.mode}}):t._e()],1)}))],2):t._e()})),t.loadedingUsers[t.search]||t.processing?e("div",{staticClass:"preloaderWrapperLine"},[e("linepreloader")],1):t._e(),!t.filteredListsEmpty||t.loadedingUsers[t.search]||t.processing?t._e():e("div",{staticClass:"empty"},[e("span",[t._v(t._s(t.$t("caption.queryNoResults"))+": "+t._s(t.search))])])],2)},h=[],p=(a("13d5"),a("92a6")),m={name:"allContacts",components:{previewRoom:d["a"],previewContact:p["a"]},props:{chats:Array,search:String,mode:{default:"",type:String}},data:function(){return{loading:!1,loadedUsers:{},loadedingUsers:{},users:[],contacts:[],lists:[{key:"chats",view:"room",action:"navigateToRoom"},{key:"contacts",view:"contact",action:"navigateToProfile"},{key:"other",view:"contact",action:"navigateToProfile"},{key:"messages",view:"roomWithMessage",keepMatches:!0,action:"navigateToRoomFromMsg"}],processresult:null,searchChanged:!0,processing:!1}},beforeDestroy:function(){this.process&&this.process.stop()},computed:{...Object(n["c"])(["contactsMap","share"]),filteredListsEmpty:function(){return 0==_.reduce(this.filteredLists,(t,e)=>t+e.items.length,0)},filteredLists:function(){var t={};return _.each(this.lists,e=>{var a=this.getList(e.key);a.length&&(t[e.key]={items:a,section:e})}),t},filteredMessages(){let t=this.chats;var e=[];return this.search&&this.processresult&&_.each(this.processresult.results,(a,i)=>{var s=_.find(t,t=>t.roomId==i);s&&_.each(a,t=>{e.push({chat:s,messages:[t]})})}),e},filteredChats(){let t=this.chats;if(this.search){let e=_.filter(_.map(t,t=>{const e=this.core.mtrx.chatUsersInfo(t.roomId,"anotherChatUsers"),a=this.core.mtrx.client.getRoom(t.roomId),i=_.reduce(e,(t,e)=>t+e.name.toLowerCase(),"");let s="";var o;a&&"public"===a.getJoinRule()&&a.currentState.getStateEvents("m.room.name","").length>0&&(s=null===(o=a.currentState.getStateEvents("m.room.name","")[0])||void 0===o?void 0:o.getContent().name);s||(s=a.name,"#"===s[0]&&(s=""));const r=(s+i).toLowerCase();let n=0;return r.includes(this.search)&&(n=this.search.length/r.length),{chat:a,point:n}}),t=>t.point);e=_.sortBy(e,t=>t.point).reverse(),t=e.map(t=>t.chat.summary)}return t},filteredContacts(){return this.share?[]:(this.contacts=_.filter(this.contactsMap,t=>t.name.toLowerCase().includes(this.search.toLowerCase())),this.contacts)},filteredOther(){return this.users=_.filter(this.loadedUsers[this.search]||[],t=>t.id!==this.core.user.userinfo.id&&!_.filter(this.contactsMap,e=>e.id===t.id).length),this.users}},methods:{getList(t){return this["filtered"+(t.charAt(0).toUpperCase()+t.slice(1))]||[]},loadList(t){return this.getList(t)},itemClick(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.mode)return this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),void this.$store.commit("setiteraction",!0);if("navigateToProfile"==e.action&&this.navigateToProfile(t.id,t),"navigateToRoom"==e.action){var a=t;if(this.share){var i=this.share;this.$store.commit("SHARE",null),this.$store.commit("icon",{icon:"loading",message:"",manual:!0}),this.core.mtrx.shareInChat(a.roomId,i).then(t=>{this.$store.commit("icon",{icon:"success",message:""}),this.$router.push(i.route||"chat?id="+a.roomId).catch(t=>{})}).catch(t=>{console.error(t),this.$store.commit("icon",{icon:"error",message:""}),i.route&&this.$router.push(i.route).catch(t=>{})})}else this.$router.push("chat?id="+a.roomId).catch(t=>{})}if("navigateToRoomFromMsg"==e.action){a=t.chat;var s=t.messages[0];this.$router.push("chat?id="+a.roomId+"&process="+this.processresult.id+"&search="+this.processresult.text+"&toevent="+s.event.event_id).catch(t=>{})}e.keepMatches||this.$emit("clearsearch")},navigateToProfile(t,e){"Select"===this.mode?this.select(e):this.$router.push({path:"/contact?id="+t}).catch(t=>{})},initSearchProcess(){if(!this.share)if(this.search.length>2){if(this.process)return void this.process.updateText(this.search);this.processresult=null,this.process=this.core.mtrx.searchEngine.execute(this.search,this.chats,t=>{let{results:e}=t;var a=_.reduce(e,(t,e,a)=>t+e.length,0);if(a>25)return!0},{all:t=>{this.processresult=t}}),this.processing=!0,this.process.execute().then(()=>{}).catch(t=>{console.error(t)}).finally(()=>{this.processing=!1})}else this.process&&this.process.stop(),this.processresult=null},loadNewUsers(){if(!this.share)try{var t=(this.search||"").replace(/[^a-z0-9]/g,"");t.length>3&&(this.loadedingUsers[this.search]=this.core.user.searchContacts(t).then(t=>{this.$set(this.loadedUsers,this.search,t)}).catch(t=>{console.error(t)}).finally(()=>{this.$delete(this.loadedingUsers,this.search)}))}catch(e){console.error(e)}}},watch:{search:{immediate:!0,handler:function(){this.loadNewUsers(),console.log("?????"),this.share||this.initSearchProcess()}}}},u=m,v=a("2877");function f(t){var e=a("f235");e.__inject__&&e.__inject__(t)}var g=Object(v["a"])(u,l,h,!1,f,"29e16303",null,!0),b=g.exports,y=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active,mobile:t.mobile},attrs:{id:"teamroom"}},[e("div",{staticClass:"teamChatWrapper",on:{click:t.click}},[e("div",{staticClass:"iconWrapper"},[t._m(0),t.teamNotifications>0?e("div",{staticClass:"unseen"},[t._v(" "+t._s(t.teamNotifications)+" ")]):t._e()]),e("div",{staticClass:"infoWrapper"},[t._m(1),e("div",{staticClass:"previewMessage"},[t.pocketteammessages&&t.pocketteammessages.length>0?e("span",[t._v(" "+t._s(t.pocketteammessages[t.pocketteammessages.length-1].previewText)+" ")]):t._e()])])])])},x=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"https://pocketnet.app/img/logo20.svg"}})])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"infoName"},[e("span",[t._v("Bastyon")])])}],w={name:"teamroom",props:{},data:function(){return{}},created:()=>{},watch:{},computed:Object(n["c"])({...Object(n["c"])(["minimized","active","pocketnet","pocketteammessages","readedteammessages"]),mobile:function(){return this.$store.state.mobile},teamNotifications:function(){var t=this;return _.filter(this.pocketteammessages,(function(e){return!t.readedteammessages[e.id]})).length}}),methods:{click:function(){this.$emit("click")}}},k=w;function C(t){var e=a("7adb");e.__inject__&&e.__inject__(t)}var $=Object(v["a"])(k,y,x,!1,C,"7df18b93",null,!0),z=$.exports,j=a("3139"),S={name:"list",inject:["matches"],data:function(){return{loading:!1,enabled:!0,page:0,revealed:{},lastEventDescription:"",blocked:!1,globalsearch:""}},components:{preview:d["a"],AllContacts:b,dummypreviews:c["default"],teamroom:z},props:{user_data:{type:String,default:()=>{}},processid:""},beforeMount:function(){if(this.processid){var t=this.core.mtrx.searchEngine.getprocess(this.processid);t&&t.text&&(this.globalsearch=t.text)}},watch:{topchatid:function(){this.hmode&&this.$emit("scrolltop")},minimized:{immediate:!0,handler:function(){console.log("////"),this.globalsearch=""}}},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},computed:Object(n["c"])({window:function(){return window},auth:t=>t.auth,teamNotifications:function(){var t=this;return _.filter(this.pocketteammessages,(function(e){return!t.readedteammessages[e.id]})).length},...Object(n["c"])(["minimized","active","pocketnet","chatsready","prechats","chats","unauthorized","share","pocketteammessages","readedteammessages","deletedrooms","hideOptimization","wasunhidden"]),showchatslist:function(){return!this.hideOptimization},rooms:function(){return this.core.mtrx.client.getRooms()},empty:function(){return this.core.mtrx.ready&&0===this.chats.length},topchatid:function(){if(this.chats&&this.chats.length)return this.chats[this.chats.length-1].roomId},chats:function(t){var e=this,a=[];return _.each(t.chats,t=>{if(!this.deletedrooms[t.roomId]&&!t.stream){this.core.mtrx.kit.tetatetchat(this.m_chat);var i=this.core.mtrx.chatUsersInfo(t.roomId,"anotherChatUsers");1===i.length&&i[0]&&e.core.mtrx.client.isUserIgnored(j["a"].getMatrixIdFull(i[0].id,e.core.domain))||a.push(t)}}),a=_.sortBy(a,(function(t){return t.lastModified})).reverse(),a},withoutBlockedChats:function(){var t=this;this.share&&_.map(t.chats,(function(t){}))},activeuser:function(){return this.core.user.userinfo},hmode(){return this.pocketnet&&this.minimized&&!this.active}}),methods:{getEventsAndDecrypt(t,e){return console.log("chat",t),this.core.mtrx.kit.prepareChat(t).then(()=>Promise.all(_.map(e,e=>{var a=e.get();return console.log("E",a),a.decrypted||"m.encrypted"!==j["a"].deep(a,"event.content.msgtype")?Promise.resolve():t.pcrypto.decryptEvent(a).then(t=>(a.decrypted=t,Promise.resolve())).catch(t=>(t.decrypted={msgtype:"m.bad.encrypted"},Promise.resolve()))}))).then(()=>Promise.resolve(e))},invitepnt(){this.core.invitepnt()},generatekeys:function(){},moment(){return moment()},dd(t){},revealFirstRight(){this.$refs.list.revealRight(0)},revealFirstLeft(){this.$refs.list.revealLeft(0)},remove(t){this.$set(this.mockSwipeList,this.page,this.mockSwipeList[this.page].filter(e=>e!==t))},setLastEvent(t,e){let{item:a,index:i}=e;this.lastEventDescription={name:t,index:i,id:a.id}},itemClick(t){if(this.hmode)this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),this.$store.commit("setiteraction",!0);else if(this.share){var e=this.share;this.$store.commit("SHARE",null),this.$store.commit("icon",{icon:"loading",message:"",manual:!0}),this.core.mtrx.shareInChat(t.roomId,e).then(a=>{this.$store.commit("icon",{icon:"success",message:""}),this.$router.push(e.route||"chat?id="+t.roomId).catch(t=>{})}).catch(t=>{console.error(t),this.$store.commit("icon",{icon:"error",message:""}),e.route&&this.$router.push(e.route).catch(t=>{})})}else this.$router.push("chat?id="+t.roomId).catch(t=>{})},fbClick(t){},sbClick(t){},openTeamRoom:function(){this.hmode?(this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),this.$store.commit("setiteraction",!0)):(setTimeout(()=>{this.$store.commit("SET_READEDTEAMMESSAGES",this.pocketteammessages),this.$store.commit("ALL_NOTIFICATIONS_COUNT",this.core.mtrx.client.getRooms())},500),this.$router.push("/teamroom").catch(t=>{}))},onKeyDown(t){16===t.keyCode&&(this.enabled=!1)},onKeyUp(t){16===t.keyCode&&(this.enabled=!0)},removeRoom(t){this.$dialog.confirm("Do you really want to leave room?",{okText:this.$i18n.t("yes"),cancelText:this.$i18n.t("cancel")}).then(e=>{this.core.mtrx.client.leave(t).then(e=>{this.core.mtrx.client.forget(t,!0).then(t=>t).then(e=>{this.$store.commit("DELETE_ROOM",t),this.$router.push({path:"/chats"}).catch(t=>{})})})})},tetatetchat(t){if(!t)return!0;var e=this.core.mtrx.client.getRoom(t.roomId);return!e||this.core.mtrx.kit.tetatetchat(this.core.mtrx.client.getRoom(t.roomId))},select:function(t){this.$emit("select",t)},toggleUser:function(t){if(this.selected[t])this.$delete(this.selected,t);else{if(this.selectedlength>=10)return void this.$store.commit("icon",{icon:"warning",message:"At the moment, you can add no more than 10 users to the chat"});this.$set(this.selected,t,t)}this.$emit("selectedUsers",this.selected)},shrinkResult(t,e){return t=[].concat(t),e&&t.length>e&&(t.length=e),t},itemToggle(t){this[t]=this[t]?null:2},searchall:function(t){this.globalsearch=(t||"").toLowerCase()}},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.hmode||this.$store.commit("SET_LAST_ROOM",null)}},W=S;function O(t){var e=a("80c1");e.__inject__&&e.__inject__(t);var i=a("5ce1");i.__inject__&&i.__inject__(t)}var E=Object(v["a"])(W,o,r,!1,O,"5bec5aa4",null,!0),L=E.exports,R=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatsTopheader"}},[e("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[t.share?e("div",{staticClass:"iconbutton",on:{click:t.cancelShare}},[e("i",{staticClass:"fas fa-times"})]):t._e(),t.minimized&&!t.active||!t.pocketnet||t.share?t._e():e("div",{staticClass:"iconbutton",on:{click:t.minimizeall}},[e("i",{staticClass:"fas fa-times"})]),t.pocketnet||t.share?t._e():e("div",{staticClass:"iconbutton",on:{click:t.gotoapp}},[e("i",{staticClass:"fas fa-angle-left"})])]},proxy:!0},{key:"leftadd",fn:function(){},proxy:!0},{key:"info",fn:function(){return[t.share?t._e():e("span",[t._v(t._s(t.$t("caption.chats")))]),t.share?e("span",[t._v(t._s(t.$t("caption.shareWith")))]):t._e()]},proxy:!0},{key:"rightadd",fn:function(){return[t.share?t._e():e("router-link",{attrs:{to:"settings"}},[e("div",{staticClass:"iconbuttonsmall"},[e("i",{staticClass:"fas fa-cog"})])])]},proxy:!0},{key:"right",fn:function(){return[t.share||t.minimized&&!t.active?e("div",[t.window.cordova?e("div",{staticClass:"iconbutton",on:{click:t.cordovashare}},[e("i",{staticClass:"fas fa-share-alt"})]):t._e()]):e("div",{staticClass:"iconbutton",on:{click:t.newchat}},[e("i",{staticClass:"fas fa-plus"})])]},proxy:!0}])})],1)},I=[],U={name:"chatsTopheader",props:{},inject:["matches"],components:{},data:function(){return{loading:!1,newchatopened:!1,createGroup:!1,contacts:!1}},created(){this.$store.commit("SET_CURRENT_ROOM","all")},destroyed(){this.$store.commit("SET_CURRENT_ROOM",!1)},watch:{},computed:Object(n["c"])({auth:t=>t.auth,minimized:t=>t.minimized,pocketnet:t=>t.pocketnet,active:t=>t.active,...Object(n["c"])(["share","closebybg"]),window:function(){return window}}),methods:{changeCloseByBg:function(){this.$store.commit("closebybg",!this.closebybg)},gotoapp:function(){this.core.backtoapp&&this.core.backtoapp()},cordovashare:function(){var t=this.share,e={};t.messages&&(e.message=t.messages.join(". ")),(t.images||t.files)&&(e.files=[].concat(t.images,t.files),e.files=_.filter(e.files,(function(t){return t}))),window.plugins&&window.plugins.socialsharing&&window.plugins.socialsharing.shareWithOptions(e),this.cancelShare()},cancelShare:function(){this.share&&this.share.route&&this.$router.push(this.share.route).catch(t=>{}),this.$store.commit("SHARE",null)},newchatmenu:function(){this.newchatopened=!this.newchatopened},minimizeall:function(){this.matches.clear(),this.$store.commit("minimize",!0)},newchat:function(){this.$emit("newchat")}}},P=U;function T(t){var e=a("80fe");e.__inject__&&e.__inject__(t)}var M=Object(v["a"])(P,R,I,!1,T,"73b35124",null,!0),N=M.exports,A=a("71da"),D=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatcreate"}},[e("div",{staticClass:"selecttype"},[e("div",{staticClass:"work"},[t.type?t._e():e("div",{staticClass:"types"},t._l(t.types,(function(a){return e("div",{key:a.id,staticClass:"type",on:{click:e=>t.selecttype(a.id)}},[e("div",{staticClass:"icon"},[e("i",{class:a.icon})]),e("div",[e("span",[t._v(t._s(t.$t("type."+a.id)))])])])})),0),t.type?e("div",{staticClass:"selectedtype"},[e("div",{staticClass:"icon",on:{click:t.unselecttype}},[e("i",{staticClass:"fas fa-arrow-left"})]),e("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("typelabel."+t.type.id))+" ")]),e("div",{staticClass:"completewrapper"},[e("button",{staticClass:"button small rounded",class:{orange:t.cancomplete,ghost:!t.cancomplete},on:{click:function(e){return t.complete()}}},[t._v(" "+t._s(t.$t("caption.create"))+" "),e("i",{class:t.type.icon}),t.selectedLength?e("span",[t._v(t._s(t.selectedLength))]):t._e()])])]):t._e()]),e("div",{staticClass:"creationbody"},[t.type?e("div",{staticClass:"groupsettigns"},[e("div",{staticClass:"namebuttoncreate"},[e("div",{staticClass:"groupNameInput"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],attrs:{type:"text",placeholder:"privategroup"===t.type.id?this.$i18n.t("caption.addGroupNamePlaceHolder"):this.$i18n.t("caption.addPublicChatName")},domProps:{value:t.groupName},on:{input:function(e){e.target.composing||(t.groupName=e.target.value)}}})])])])]):t._e(),t.type?t._e():e("div",{staticClass:"contactswrapper oneonone"},[e("contacts",{attrs:{mode:"Select"},on:{select:t.selectoneuser}})],1),t.type?e("div",{staticClass:"contactswrapper"},[e("contacts",{attrs:{mode:"Selectmany"},on:{selectedUsers:t.selectedUsers}})],1):t._e()])])])},B=[],F={name:"chatcreate",props:{},components:{contacts:A["a"]},data:function(){return{loading:!1,types:{privategroup:{id:"privategroup",icon:"fas fa-user-friends",value:"private"},publicgroup:{id:"publicgroup",icon:"fas fa-users",value:"public"}},type:null,groupName:"",selected:{}}},created:()=>{},watch:{},computed:Object(n["c"])({auth:t=>t.auth,cancomplete:function(){return!!this.type&&("privategroup"==this.type.id?this.selectedLength>1:"publicgroup"==this.type.id?!!this.groupName:void 0)},selectedLength:function(){return _.toArray(this.selected).length}}),methods:{unselecttype:function(){this.type=null,this.selected={}},selecttype:function(t){this.type=this.types[t],this.selected={}},selectedUsers:function(t){this.selected=t},selectoneuser:function(t){var e=this.core.mtrx.kit.tetatetid(t,this.core.user.userinfo);this.$router.push("chat?id="+e+"&u="+t.id).catch(t=>{})},complete(){this.createGroupAction(this.selected).then(t=>{this.$emit("completed",t),this.$store.commit("icon",{icon:"success",message:""})}).catch(t=>{var e="An unexpected error occurred";"cantcomplete"==t&&(e="Please enter a group name and add chat members"),this.$store.commit("icon",{icon:"error",message:e})})},createGroupAction(t){if(!this.cancomplete)return Promise.reject("cantcomplete");if(!this.type)return Promise.reject("type");if(_.isEmpty(t))return Promise.reject("users");const e=this.core.mtrx.kit.groupIdLight(t);return this.$store.state.globalpreloader=!0,this.core.mtrx.client.createRoom({visibility:this.type.value,invite:e.idForInviting,name:"@"+(this.groupName?this.groupName:"New Room"),initial_state:[{type:"m.room.guest_access",state_key:"",content:{guest_access:"can_join"}}]}).then(t=>t).catch(t=>(this.$store.state.globalpreloader=!1,Promise.reject(t)))}}},G=F;function K(t){var e=a("0d89");e.__inject__&&e.__inject__(t)}var H=Object(v["a"])(G,D,B,!1,K,"e0758c0e",null,!0),q=H.exports,J={name:"pagechats",components:{list:L,topheader:N,contacts:A["a"],chatcreate:q},props:{share:Object},data:function(){return{newChat:!1}},computed:Object(n["c"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,mobile:t=>t.mobile,hiddenInParent:t=>t.hiddenInParent,joinroom:t=>t.joinroom,processid(){return this.$route.query.process}}),methods:{newchat:function(){this.newChat=!0},closeNewChat:function(){this.newChat=!1},chatcreated:function(t){this.$router.push({path:"chat",query:{id:t.room_id}}).catch(t=>{})},scrolltop:function(){this.$refs["maincontent"].scroll(0)}},mounted(){this.joinroom&&(this.$router.push("/publicPreview?id="+this.joinroom),this.$store.commit("JOINROOM",null))}},X=J;function Q(t){var e=a("9c1f");e.__inject__&&e.__inject__(t)}var V=Object(v["a"])(X,i,s,!1,Q,"72f0c90c",null,!0);e["default"]=V.exports},"9c1f":function(t,e,a){"use strict";a.r(e);var i=a("0125");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"9f06":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".topheader[data-v-72f0c90c]{top:0;z-index:999}.newChat[data-v-72f0c90c] #maincontent .headerSpacer,.newChat[data-v-72f0c90c] #maincontent .headerSpacerWrapper,.newChat[data-v-72f0c90c] #maincontent .headerSpacerWrapperOvf{overflow:visible!important}.newChat.minimized.active[data-v-72f0c90c] #maincontent .desktopList{display:none}",""]),t.exports=e},a52e:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"#teamroom.mobile[data-v-7df18b93]{margin-bottom:10px}#teamroom[data-v-7df18b93]:hover{cursor:pointer}#teamroom .teamChatWrapper[data-v-7df18b93]{padding:.5em .25em;display:flex;align-items:center;transition:.3s}#teamroom .teamChatWrapper .iconWrapper[data-v-7df18b93]{width:44px;display:flex;align-items:center;min-width:44px;height:44px;position:relative}#teamroom .teamChatWrapper .iconWrapper .logo[data-v-7df18b93]{background-size:cover;background-position:50%;background-repeat:no-repeat;height:44px;width:44px;margin-left:0;margin-top:0;position:absolute;background:rgb(var(--text-on-bg-ac-color));border-radius:50%;padding-top:8px;text-align:center}#teamroom .teamChatWrapper .iconWrapper .logo img[data-v-7df18b93]{width:28px;height:28px;margin:0 auto}#teamroom .teamChatWrapper .iconWrapper .unseen[data-v-7df18b93]{background:rgba(var(--color-bg-ac),.9);color:rgb(var(--text-on-bg-ac-color));position:absolute;width:22px;height:22px;right:-10%;top:-10%;line-height:22px;text-align:center;font-weight:500;border-radius:50%;z-index:2;font-size:.6em}#teamroom .teamChatWrapper .infoWrapper[data-v-7df18b93]{padding-left:.5em}#teamroom .teamChatWrapper .infoWrapper>div[data-v-7df18b93]{display:flex;align-content:center}#teamroom .teamChatWrapper .infoWrapper .infoName span[data-v-7df18b93]{font-size:.9em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700;display:inline-block;max-width:190px;color:rgb(var(--text-color))}#teamroom .teamChatWrapper .infoWrapper .previewMessage[data-v-7df18b93]{display:flex;justify-content:flex-start;align-items:center;width:100%}#teamroom .teamChatWrapper .infoWrapper .previewMessage span[data-v-7df18b93]{display:block;color:rgb(var(--color-txt-gray));font-size:.9em;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left;max-width:210px}#teamroom.minimized:not(.active) .teamChatWrapper[data-v-7df18b93]{padding:.5em 0}",""]),t.exports=e},ba27:function(t,e,a){var i=a("3f0d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("37587292",i,t)}},f235:function(t,e,a){"use strict";a.r(e);var i=a("51da");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},fd85:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".chatswrapper[data-v-29e16303]{padding-top:.25em}.section-title[data-v-29e16303]{background:rgb(var(--background-secondary-theme));color:rgb(var(--text-color));margin:.5em 0;padding:.5em .5em;width:100%;text-align:center}.section-title span[data-v-29e16303]{font-size:.8em;font-weight:700}.contact[data-v-29e16303]{cursor:pointer}.show-more[data-v-29e16303]{text-align:center}.show-more a[data-v-29e16303]{color:#00a4ff}.empty[data-v-29e16303],.preloaderWrapperLine[data-v-29e16303]{text-align:center;padding:1em}.empty[data-v-29e16303]{margin-top:2em}.empty span[data-v-29e16303]{font-size:2em;font-weight:100}",""]),t.exports=e},ff48:function(t,e,a){var i=a("7923");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("b8b73544",i,t)}}}]);
//# sourceMappingURL=matrix-element.13.min.js.map