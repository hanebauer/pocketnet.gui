{"version":3,"sources":["webpack:///./src/components/chat/input/index.sass?929a","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?9de9","webpack:///./src/components/assets/upload/index.vue?1451","webpack:///./src/components/chat/input/index.sass","webpack:///./src/components/assets/recordVoice/index.scss?c7a7","webpack:///./src/components/chat/input/InputField/InputField.vue?9956","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?477e","webpack:///./src/components/assets/recordProgress/index.scss?473b","webpack:///./src/components/assets/recordVoice/index.scss","webpack:///./src/components/chat/input/InputField/InputField.vue?aa7b","webpack:///./src/components/chat/input/InputField/InputField.vue?a154","webpack:///./src/components/assets/upload/index.vue?e629","webpack:///./src/components/assets/upload/index.vue?27c0","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?afcc","webpack:///./src/components/assets/recordVoice/index.scss?9f50","webpack:///./src/components/assets/recordProgress/index.scss?b601","webpack:///./src/components/assets/recordProgress/index.scss","webpack:///./src/components/chat/input/index.sass?36cc","webpack:///./src/components/chat/input/index.vue?b4c4","webpack:///./src/components/chat/input/InputField/InputField.vue?2616","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?4655","webpack:///src/components/chat/input/picturePreview/picturePreview.vue","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue?3bda","webpack:///./src/components/chat/input/picturePreview/picturePreview.vue","webpack:///src/components/chat/input/InputField/InputField.vue","webpack:///./src/components/chat/input/InputField/InputField.vue?3335","webpack:///./src/components/chat/input/InputField/InputField.vue","webpack:///./src/components/assets/recordVoice/index.vue?62c2","webpack:///./src/components/assets/recordVoice/index.js","webpack:///./src/components/assets/recordVoice","webpack:///./src/components/assets/recordVoice/index.vue","webpack:///./src/components/assets/recordProgress/index.vue?36a4","webpack:///./src/components/assets/recordProgress/index.js","webpack:///./src/components/assets/recordProgress","webpack:///./src/components/assets/recordProgress/index.vue","webpack:///./src/components/assets/upload/index.vue?d598","webpack:///src/components/assets/upload/index.vue","webpack:///./src/components/assets/upload/index.vue?f5f6","webpack:///./src/components/assets/upload/index.vue","webpack:///./src/components/chat/input/index.js","webpack:///./src/components/chat/input","webpack:///./src/components/chat/input/index.vue"],"names":["name","props","data","is_opened","methods","hide","components","Picker","picturePreview","directives","clickOutside","watch","text","immediately","handler","send","ready","exclude","display_emoji","content_height","pasted_data","block","upload","multiple","extensions","images","resize","type","hidden_previews","emojiIndex","computed","mobile","prepareemoji","window","setText","setTimeout","focused","textchange","savetextinstorage","localStorage","send_empty_array","focus","blur","blurifempty","close_emoji_picker","textarea_resize","textarea_resize_reset","toggle_emoji_picker","send_text","insert_emoji","paste_image","get_base64","reader","confirm","okText","cancelText","then","dialog","resize_image","autorotation","base64","catch","error","getsearchposition","start","middle","end","sposition","br","dg","i","getsearch","keydown","event","keyup","blured","inserttip","f","position","storagekey","tipusers","creared","mounted","isRecording","Boolean","required","prepareRecording","disabled","isHold","direction","mapState","state","beforeDestroy","document","removeEventListener","handleMove","$emit","cancel","mouseup","e","handleTouchEnd","mousedown","handleTouchStart","Y","changedTouches","pageY","X","pageX","addEventListener","sendnow","clearStyle","$refs","toggle","style","transform","classList","remove","holder","deltaY","deltaX","length","contains","add","recordEnd","recordTime","Number","rmsData","Array","opacity","width","timer","minute","Math","floor","sec","rmsDataLast","_","last","throttle","draw","graph","offsetWidth","re","canvas","ctx","getContext","x","count","l","c","max","clearRect","fillStyle","fillRect","clear","dropzone","onlyimage","maxsize","default","loading","maxSize","created","read","resolve","file","each","ha","next","result","err","errorText","check","checkSize","getExtension","checkExtension","handle","sendAnyFile","resizeIfNeed","ftype","handleImages","chat","Object","u","String","relationEvent","InputField","contacts","preview","recordProgress","recordVoice","test","fileInfo","creating","userId","showuserselect","anyUrlMeta","joinedMembers","tipvalue","tipuserindex","record","recordRmsData","mediaRecorder","audioContext","audioAnalyser","interval","cancelOpacity","microphoneDisabled","cancelledCordovaMediaRecorder","usersForKeysHash","close","voiceEnable","$store","voiceMessagesEnabled","connect","contact","pkoindisabled","menuItems","POCKETNETINSTANCE","supportimagegallery","push","click","title","$i18n","t","icon","transaction","unshift","userlist","core","mtrx","chatUsersInfo","roomId","deep","uusers","map","split","ausers","user","matrixId","stateChat","id","$route","query","chatsMap","invited","filter","currentState","getMembers","m","v","membership","joined","self","arr","members","forEach","value","toLowerCase","indexOf","maintipuser","client","newchat","Promise","wait","$f","pretry","access","browsetip","increase","selectcurrenttip","insertuser","tipBySearch","showuserselected","action","resizeImage","Images","reject","cameraHandlerCustom","dropdownMenu","hidePopup","platform","ui","uploadImage","Base64","toFile","uploadUploaded","console","onSuccess","imgs","uploadUploadedAll","sendtransactionWrapper","menuIsVisible","users","j","getmatrixid","r","source","userinfo","store","commit","caption","userselected","sendtransaction","api","roomid","address","emitInputData","HideUploadPic","emitUrl","url","globalpreloader","myMatrixId","usersInfo","info","_info","keys","kit","tetatetid","initialstate","state_key","content","encrypted","createRoom","room_alias_name","visibility","invite","initial_state","_chat","m_chat","getRoom","room_id","getStateEvents","setPowerLevel","greetings","errcode","joinRoom","baseUrl","replace","maySendMessage","sendinput","textCutLimit","limit","trim","slice","replaceMentions","RegExp","textEvent","rel_type","event_id","clearEventId","makeid","editEvent","body","msgtype","decryptKey","decrypted","sendEvent","dispatch","sendtext","relation","pasteImage","sendImage","meta","aborted","canencryptfilesize","s","pcrypto","canBeEncrypt","size","$dialog","sendFile","notenc","change","evt","target","getUrl","undefined","sendTyping","menuItemClick","item","rowObject","menuItemLoadedHandler","uploadStart","files","uploadError","message","getImg","uploadSizeError","validImageTypes","includes","imageWH","img","Image","imgInfo","onload","w","h","height","onerror","src","catchPermissonsError","toString","cordova","getFileIosCordova","path","resolveLocalFileSystemURL","entry","FileReader","onloadend","blob","Blob","Uint8Array","readAsArrayBuffer","initRecordingCordova","cancelable","media","permissions","audio","isios","getAudioContext","cordovaMediaRecorder","Media","release","fu","externalDataDirectory","duration","createVoiceMessage","finally","rmsdata","currentPlaying","currentPlayingVoiceMessage","pause","setInterval","clone","getCurrentAmplitude","amp","log","startRecord","initRecording","initMediaRecorder","recorder","stream","getTracks","track","stop","createAnalyser","createMediaStreamSource","startRecording","dataArray","frequencyBinCount","getByteFrequencyData","generateRms","checkaudioForSend","sendVoiceMessage","getduration","readFile","arraybuffer","decodeAudioData","buffer","frequencies","sqrt","reduce","a","b","toPrecision","stopRecording","clearInterval","stopRecord","convertAudioToBase64","sendAudio","setOpacity"],"mappings":"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","file":"matrix-element.6.js","sourcesContent":["export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=257d64d1&scoped=true&lang=sass&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".wrapper[data-v-67c83356]{position:relative}.fas[data-v-67c83356]{position:absolute;right:-8px;top:-8px}.preview-picture[data-v-67c83356]{width:50px;height:50px;border-radius:10px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".upload[data-v-3fad2ed3]{width:100%}.uploadWrapper[data-v-3fad2ed3]{position:relative}.uploadWrapper .inputWrapper[data-v-3fad2ed3],.uploadWrapper .inputWrapper input[data-v-3fad2ed3]{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#chatInput[data-v-257d64d1]{padding-bottom:.5em}[data-v-257d64d1] #modal.minimized .modal-wrapper{left:0}[data-v-257d64d1] .previewWrapper{padding-left:.5em!important;padding-right:.5em!important}.inputWrapper[data-v-257d64d1]{display:flex;position:relative}.inputWrapper .left[data-v-257d64d1]{width:35px;display:flex;justify-content:flex-end;align-items:center;text-align:center}.inputWrapper .left .iconbutton[data-v-257d64d1]{display:flex;align-items:center;justify-content:center;height:35px;width:35px;-webkit-tap-highlight-color:transparent}.inputWrapper .extended[data-v-257d64d1]{width:70px;margin-left:7px}.inputWrapper .leftdummy[data-v-257d64d1]{width:.5em}.inputWrapper>div[data-v-257d64d1]{transition:.3s}.inputWrapper .center[data-v-257d64d1]{max-height:110px;max-width:100%;display:flex;justify-content:space-between;align-items:center;flex-grow:1;border:1px solid transparent;border-radius:30px;background:rgb(var(--background-secondary-theme))}.inputWrapper input[data-v-257d64d1]{border:1px solid rgb(var(--neutral-grad-0));background:rgba(var(--background-main),.5);border-radius:30px;width:100%;padding:.5em 1em}.notready[data-v-257d64d1],.waitjoined[data-v-257d64d1]{padding:.5em 0;text-align:center}.waitjoined span[data-v-257d64d1]{font-size:.8em}.greetings[data-v-257d64d1]{padding:.5em 0}.greetings[data-v-257d64d1],[data-v-257d64d1] .iconWrapper{text-align:center}.menu-item[data-v-257d64d1]{padding:.5em;background:rgb(var(--background-total-theme));line-height:44px;border-radius:5px;display:flex}.menu-item .title[data-v-257d64d1]{flex-grow:2;padding-right:44px;text-align:center}.menu-item .iconWrapper[data-v-257d64d1]{width:44px}.tipusers[data-v-257d64d1]{position:absolute;max-height:300px;border-radius:.5em;border:1px solid rgba(var(--neutral-grad-0),.9);overflow-y:overlay;background-color:rgba(var(--background-total-theme),.95);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);padding:.25em 0;bottom:100%;margin-bottom:.5em;left:.25em;right:.25em}.tipusers .previewWrapperExt[data-v-257d64d1]{border-radius:.75em;margin-left:.25em;margin-right:.25em;padding-top:.25em;padding-bottom:.25em}.tipusers .previewWrapperExt[data-v-257d64d1] .previewWrapper{padding-left:.25em!important;padding-right:.25em!important}.tipusers .previewWrapperExt.selected[data-v-257d64d1]{background:rgb(var(--background-main))}.disabled[data-v-257d64d1]{display:flex;justify-content:center;align-items:center;width:35px;height:35px;color:rgb(var(--neutral-grad-3))}.disabled i[data-v-257d64d1]{padding-top:1px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=16750db8&scoped=true&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"bfa2de10\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".input_component[data-v-416e0b15]{width:100%;display:flex;justify-content:center;align-items:center;padding:0 1em;padding-right:0}.input_component[data-v-416e0b15] .emoji-mart .emoji-mart-emoji{width:25%;height:40px;cursor:pointer}.input_component[data-v-416e0b15] .emoji-mart .emoji-mart-emoji span{cursor:pointer}.input_component[data-v-416e0b15] .emoji-mart .emoji-mart-emoji:hover{background:none;box-shadow:none}.input_component[data-v-416e0b15] .emoji-mart .emoji-mart-emoji:hover:before{display:none}.input_component .input-wrapper[data-v-416e0b15]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;position:relative;width:100%}.input_component .right[data-v-416e0b15]{margin:0 .5em}.input_component .iconbutton .leftdummy[data-v-416e0b15]{width:20px}.input_component .iconbutton .rightdummy[data-v-416e0b15]{width:35px}.input_component .iconbutton .idummy[data-v-416e0b15]{width:100%;height:35px;line-height:35px}.input_component .iconbutton .idummy i[data-v-416e0b15]{line-height:35px!important}.input_component .previews[data-v-416e0b15]{width:100%;max-width:198px;height:30px;display:flex;align-items:flex-start;padding:2px 0;overflow:hidden}.input_component .previews[data-v-416e0b15]:first-child{margin-left:0}.input_component .textarea[data-v-416e0b15]{width:100%;display:flex;justify-content:flex-start;align-items:center}.chat-input[data-v-416e0b15]{width:100%;max-height:100px;overflow-y:auto;resize:none}.chat-input[data-v-416e0b15]::-webkit-scrollbar{width:0!important}.fade-enter-active[data-v-416e0b15],.fade-leave-active[data-v-416e0b15]{transition:all .2s ease-in}.fade-enter[data-v-416e0b15],.fade-leave-to[data-v-416e0b15]{opacity:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=style&index=0&id=67c83356&lang=sass&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"38fda502\", content, shadowRoot)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=5df29904&scoped=true&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"4b270ced\", content, shadowRoot)\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".recordButton_wrapper[data-v-16750db8]{position:relative}.recordButton_holder[data-v-16750db8]{visibility:hidden;position:absolute;display:flex;justify-content:center;align-items:center;height:16px;width:16px;background:#789;border-radius:50%;bottom:98px;transition:.1s;right:9px}.recordButton_holder .icon[data-v-16750db8]{color:#fff;font-size:7px}.recordButton_holder.active[data-v-16750db8]{visibility:visible}.recordButton_holder.hold[data-v-16750db8]{background:#789;visibility:visible;bottom:38px}.recordButton_holder.hold .icon[data-v-16750db8]{color:#fff}.recordButton_main[data-v-16750db8]{padding-top:1px;touch-action:none;display:flex;align-items:center;justify-content:center;width:35px;height:35px;line-height:35px!important;background:transparent;border-radius:50%;outline:none;position:relative}.recordButton_main.active[data-v-16750db8]{background:rgb(var(--color-bg-ac));animation:pulse-data-v-16750db8 1.2s infinite}.recordButton_main.active .icon[data-v-16750db8]{color:rgb(var(--text-on-bg-shadow-color))}.recordButton_main.active[data-v-16750db8]:before{position:absolute;left:-30px;bottom:-30px;right:-30px;top:-30px;content:\\\"\\\";border-radius:50%;border:35px solid rgba(var(--color-bg-ac),.5);animation:pulse-data-v-16750db8 1.2s infinite}.recordButton_main.disabled .icon[data-v-16750db8]{color:rgb(var(--neutral-grad-2))}.recordButton_main.outside[data-v-16750db8],.recordButton_stop[data-v-16750db8]{background:rgb(var(--color-bad))}.recordButton_stop[data-v-16750db8]{color:rgb(var(--text-on-bg-shadow-color));font-size:.7em}@keyframes pulse-data-v-16750db8{0%{opacity:1}50%{opacity:.8}to{opacity:1}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=style&index=0&id=416e0b15&scoped=true&lang=sass&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=style&index=0&id=416e0b15&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"09943a1a\", content, shadowRoot)\n};","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3fad2ed3&scoped=true&lang=sass&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3fad2ed3&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"c636644c\", content, shadowRoot)\n};","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=style&index=0&id=67c83356&lang=sass&scoped=true&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=16750db8&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!./index.scss?vue&type=style&index=0&id=5df29904&scoped=true&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".recordProgress[data-v-5df29904]{display:flex;height:20px;justify-content:flex-start;padding:0 1em;align-items:center;max-width:80%;flex-grow:2}.recordProgress .indicatorWrapper[data-v-5df29904]{min-width:20px;width:20px;margin-right:1em;display:flex;justify-content:center;align-items:center}.recordProgress .indicator[data-v-5df29904]{height:6px;width:6px;background:#ff033e;border-radius:50%}.recordProgress .indicator.recording[data-v-5df29904]{animation:pulse-data-v-5df29904 1.2s ease infinite}.recordProgress .del[data-v-5df29904]{min-width:20px;cursor:pointer;display:flex;justify-content:center;align-items:center;width:20px;height:20px;margin-right:1em}.recordProgress .del i[data-v-5df29904]{color:red;font-size:13px}.recordProgress .timer[data-v-5df29904]{margin-right:1em}.recordProgress .graph[data-v-5df29904]{margin:0 auto;width:100px;overflow:hidden;border-radius:15px}.cancel[data-v-5df29904],.recordProgress .graph[data-v-5df29904]{display:flex;justify-content:center}.cancel[data-v-5df29904]{position:absolute;left:0;right:0;top:0;bottom:0;background:rgb(var(--background-secondary-theme));opacity:0;text-align:center;align-items:center}.cancel span[data-v-5df29904]{white-space:nowrap;font-size:.9em}@keyframes pulse-data-v-5df29904{0%{opacity:1}50%{opacity:.1}to{opacity:1}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!./index.sass?vue&type=style&index=0&id=257d64d1&scoped=true&lang=sass&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"2831eefa\", content, shadowRoot)\n};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"noswipepnt\",attrs:{\"id\":\"chatInput\"}},[(_vm.ready)?_c('div',{staticClass:\"work\"},[(_vm.chat)?_c('div',{staticClass:\"inputWrapper\"},[(_vm.tipusers.length)?_c('div',{staticClass:\"tipusers\"},_vm._l((_vm.tipusers),function(user,i){return _c('div',{key:user.id,staticClass:\"previewWrapperExt\",class:{ selected: _vm.tipuserindex == i },on:{\"click\":function($event){return _vm.insertuser(user)}}},[_c('preview',{attrs:{\"contact\":user,\"mode\":\"\"}})],1)}),0):_vm._e(),_c('div',{staticClass:\"center\"},[(_vm.voiceEnable && (_vm.isRecording || _vm.record))?_c('record-progress',{attrs:{\"recordTime\":_vm.recordTime,\"isRecording\":_vm.isRecording,\"rmsData\":_vm.recordRmsData,\"opacity\":_vm.cancelOpacity},on:{\"onClear\":_vm.clear}}):_c('InputField',{ref:\"newinput\",attrs:{\"storagekey\":'chatinput' + _vm.chat.roomId,\"tipusers\":_vm.tipusers},on:{\"chatMessage\":_vm.sendinput,\"emptyInput\":_vm.emitInputData,\"FilledInput\":_vm.HideUploadPic,\"base64\":_vm.pasteImage,\"focused\":_vm.focused,\"tipsearchrequest\":_vm.tipBySearch,\"browsetip\":_vm.browsetip,\"selectcurrenttip\":_vm.selectcurrenttip}}),(_vm.upload && _vm.chat)?_c('div',{staticClass:\"left\",class:{ extended: _vm.voiceEnable }},[(!_vm.isRecording && !_vm.record)?_c('div',{staticClass:\"iconbutton\"},[_c('dropdownMenu',{ref:\"dropdownMenu\",attrs:{\"menuItems\":_vm.menuItems,\"rowObject\":{},\"icon\":\"fas fa-plus\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [(!slotProps.item.upload)?_c('div',{staticClass:\"menu-item\",on:{\"click\":function($event){return _vm.menuItemClick(slotProps.item)}}},[_c('div',{staticClass:\"iconWrapper\"},[(slotProps.item.icon)?_c('i',{class:slotProps.item.icon}):_vm._e()]),_c('div',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(slotProps.item.title)+\" \")])]):_c('upload',{attrs:{\"onlyimage\":slotProps.item.upload.onlyimage,\"multiple\":slotProps.item.upload.multiple,\"extensions\":slotProps.item.upload.extensions,\"images\":slotProps.item.upload.images},on:{\"start\":function (files) { return _vm.uploadStart(slotProps.item, files); },\"uploaded\":function (data) { return _vm.uploadUploaded(slotProps.item, data); },\"uploadedAll\":function (result) { return _vm.uploadUploadedAll(slotProps.item, result); },\"error\":function (error) { return _vm.uploadError(slotProps.item, error); }},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('div',{staticClass:\"menu-item\"},[_c('div',{staticClass:\"iconWrapper\"},[(slotProps.item.icon)?_c('i',{class:slotProps.item.icon}):_vm._e()]),_c('div',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(slotProps.item.title)+\" \")])])]},proxy:true},{key:\"dropzone\",fn:function(){return undefined},proxy:true}],null,true)})]}}],null,false,3187246467)})],1):_vm._e(),(_vm.voiceEnable)?[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRecording || !_vm.record),expression:\"isRecording || !record\"}],staticClass:\"iconbutton\"},[_c('recordVoice',{attrs:{\"prepareRecording\":_vm.prepareRecording ? true : false,\"isRecording\":_vm.isRecording,\"disabled\":_vm.microphoneDisabled},on:{\"onRecordingStart\":_vm.initRecording,\"onRecordingStop\":_vm.stopRecording,\"onClear\":_vm.clear,\"canceling\":_vm.setOpacity}})],1)]:_vm._e(),(!_vm.isRecording && _vm.record)?_c('div',{staticClass:\"iconbutton\",on:{\"click\":function (e) {\n\t\t\t\t\t\t\t\t\t_vm.sendVoiceMessage();\n\t\t\t\t\t\t\t\t}}},[_vm._m(0)]):_vm._e()],2):_vm._e()],1)]):_vm._e()]):_c('div',{staticClass:\"notready\"},[_c('linepreloader')],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('i',{staticClass:\"icon fas fa-paper-plane\"})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input_component\"},[_c('div',{staticClass:\"input-wrapper\"},[_c('div',{staticClass:\"textarea\"},[_c('textarea',{ref:\"textarea\",staticClass:\"chat-input\",attrs:{\"id\":\"textInput\",\"type\":\"text\",\"row\":\"1\",\"spellcheck\":\"true\",\"autocorrect\":\"on\",\"placeholder\":_vm.$t('caption.sendmessage')},domProps:{\"value\":_vm.text},on:{\"focus\":_vm.focused,\"blur\":_vm.blured,\"keydown\":_vm.keydown,\"input\":_vm.textchange,\"keyup\":_vm.keyup,\"click\":_vm.keyup,\"paste\":_vm.paste_image}}),(!_vm.mobile && _vm.emojiIndex)?_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[_c('picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.display_emoji),expression:\"display_emoji\"},{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.close_emoji_picker),expression:\"close_emoji_picker\"}],style:({\n\t\t\t\t\t\twidth: '325px',\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tbottom: '32px',\n\t\t\t\t\t\tright: '-60px',\n\t\t\t\t\t\tfontSize: '0.8em',\n\t\t\t\t\t\tfontFamily: 'Segoe UI',\n\t\t\t\t\t}),attrs:{\"data\":_vm.emojiIndex,\"exclude\":_vm.exclude,\"showPreview\":false,\"showSearch\":false,\"native\":true,\"set\":\"emojione\"},on:{\"select\":_vm.insert_emoji}})],1):_vm._e()],1)]),(!_vm.mobile)?_c('div',{staticClass:\"iconbutton emojipicker\",on:{\"click\":function($event){return _vm.toggle_emoji_picker()}}},[_c('div',{staticClass:\"leftdummy\"},[_c('div',{staticClass:\"idummy\"},[(_vm.display_emoji)?_c('i',{staticClass:\"fas fa-times\"}):_c('i',{staticClass:\"far fa-smile\"})])])]):_vm._e(),(_vm.send)?_c('div',{staticClass:\"iconbutton\",on:{\"click\":function($event){return _vm.send_text($event)}}},[_vm._m(0)]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rightdummy\"},[_c('div',{staticClass:\"idummy\"},[_c('i',{staticClass:\"far fa-paper-plane\"})])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.is_opened)?_c('div',{staticClass:\"wrapper\"},[_c('img',{staticClass:\"preview-picture\",attrs:{\"src\":_vm.base64,\"alt\":\"picture preview\"}}),_c('i',{staticClass:\"fas fa-times fa-sm\",on:{\"click\":_vm.hide}})]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div v-if=\"is_opened\" class=\"wrapper\">\r\n\t\t<img class=\"preview-picture\" :src=\"base64\" alt=\"picture preview\" />\r\n\t\t<i @click=\"hide\" class=\"fas fa-times fa-sm\"></i>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"picturePreview\",\r\n\tprops: [\"base64\"],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tis_opened: true,\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\thide() {\r\n\t\t\tthis.is_opened = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n.wrapper\r\n    position: relative\r\n\r\n.fas\r\n    position: absolute\r\n    right: -8px\r\n    top: -8px\r\n\r\n.preview-picture\r\n    width: 50px\r\n    height: 50px\r\n    border-radius: 10px\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./picturePreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./picturePreview.vue?vue&type=template&id=67c83356&scoped=true&\"\nimport script from \"./picturePreview.vue?vue&type=script&lang=js&\"\nexport * from \"./picturePreview.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./picturePreview.vue?vue&type=style&index=0&id=67c83356&lang=sass&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"67c83356\",\n  null\n  ,true\n)\n\nexport default component.exports","<template>\r\n\t<div class=\"input_component\">\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<div class=\"textarea\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tid=\"textInput\"\r\n\t\t\t\t\t:value=\"text\"\r\n\t\t\t\t\tref=\"textarea\"\r\n\t\t\t\t\tclass=\"chat-input\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\trow=\"1\"\r\n\t\t\t\t\tspellcheck=\"true\"\r\n\t\t\t\t\tautocorrect=\"on\"\r\n\t\t\t\t\t@focus=\"focused\"\r\n\t\t\t\t\t@blur=\"blured\"\r\n\t\t\t\t\t@keydown=\"keydown\"\r\n\t\t\t\t\t@input=\"textchange\"\r\n\t\t\t\t\t@keyup=\"keyup\"\r\n\t\t\t\t\t@click=\"keyup\"\r\n\t\t\t\t\t@paste=\"paste_image\"\r\n\t\t\t\t\t:placeholder=\"$t('caption.sendmessage')\"\r\n\t\t\t\t></textarea>\r\n\t\t\t\t<transition name=\"fade\" mode=\"out-in\" v-if=\"!mobile && emojiIndex\">\r\n\t\t\t\t\t<picker\r\n\t\t\t\t\t\t:data=\"emojiIndex\"\r\n\t\t\t\t\t\tv-show=\"display_emoji\"\r\n\t\t\t\t\t\t@select=\"insert_emoji\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\twidth: '325px',\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tbottom: '32px',\r\n\t\t\t\t\t\t\tright: '-60px',\r\n\t\t\t\t\t\t\tfontSize: '0.8em',\r\n\t\t\t\t\t\t\tfontFamily: 'Segoe UI',\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t:exclude=\"exclude\"\r\n\t\t\t\t\t\t:showPreview=\"false\"\r\n\t\t\t\t\t\t:showSearch=\"false\"\r\n\t\t\t\t\t\t:native=\"true\"\r\n\t\t\t\t\t\tset=\"emojione\"\r\n\t\t\t\t\t\tv-click-outside=\"close_emoji_picker\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</transition>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"iconbutton emojipicker\"\r\n\t\t\t@click=\"toggle_emoji_picker()\"\r\n\t\t\tv-if=\"!mobile\"\r\n\t\t>\r\n\t\t\t<div class=\"leftdummy\">\r\n\t\t\t\t<div class=\"idummy\">\r\n\t\t\t\t\t<i v-if=\"display_emoji\" class=\"fas fa-times\"></i>\r\n\t\t\t\t\t<i v-else class=\"far fa-smile\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"iconbutton\" v-if=\"send\" @click=\"send_text($event)\">\r\n\t\t\t<div class=\"rightdummy\">\r\n\t\t\t\t<div class=\"idummy\">\r\n\t\t\t\t\t<i class=\"far fa-paper-plane\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Images from \"@/application/utils/images.js\";\r\nimport \"emoji-mart-vue-fast/css/emoji-mart.css\";\r\nimport f from \"@/application/functions\";\r\nimport { Picker, EmojiIndex } from \"emoji-mart-vue-fast\";\r\n\r\nimport vClickOutside from \"v-click-outside\";\r\n\r\nimport picturePreview from \"@/components/chat/input/picturePreview/picturePreview\";\r\n\r\nlet images = new Images();\r\n\r\nexport default {\r\n\tname: \"InputField\",\r\n\tcomponents: {\r\n\t\tPicker,\r\n\t\tpicturePreview,\r\n\t},\r\n\r\n\tdirectives: {\r\n\t\tclickOutside: vClickOutside.directive,\r\n\t},\r\n\r\n\twatch: {\r\n\t\ttext: {\r\n\t\t\timmediately: true,\r\n\t\t\thandler: function (current, prev) {\r\n\t\t\t\tif (current) {\r\n\t\t\t\t\tthis.send = true;\r\n\t\t\t\t\tthis.$emit(\"FilledInput\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.send = false;\r\n\t\t\t\t\tthis.$emit(\"emptyInput\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.textarea_resize();\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsend: false,\r\n\r\n\t\t\tready: false,\r\n\t\t\ttext: \"\",\r\n\t\t\texclude: [\"flags\"],\r\n\t\t\tdisplay_emoji: false,\r\n\t\t\tcontent_height: 26,\r\n\t\t\tpasted_data: [],\r\n\t\t\tblock: false,\r\n\r\n\t\t\tupload: {\r\n\t\t\t\tmultiple: true,\r\n\t\t\t\textensions: [\"image/jpg\", \"image/jpeg\", \"image/png\"],\r\n\t\t\t\timages: {\r\n\t\t\t\t\tresize: {\r\n\t\t\t\t\t\ttype: \"fit\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thidden_previews: null,\r\n\t\t\temojiIndex: null,\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tmobile: function () {\r\n\t\t\treturn !this.$store.state.pocketnet && this.$store.state.mobile;\r\n\t\t},\r\n\r\n\t\t/*emojiIndex: function () {\r\n\r\n     \r\n\r\n      return window.emojiIndex\r\n\r\n    }*/\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tprepareemoji: function () {\r\n\t\t\tif (!this.mobile) {\r\n\t\t\t\tif (window.emojiIndex) this.emojiIndex = window.emojiIndex;\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar emojidata = require(\"emoji-mart-vue-fast/data/all.json\");\r\n\t\t\t\t\twindow.emojiIndex = new EmojiIndex(emojidata);\r\n\t\t\t\t\tthis.emojiIndex = window.emojiIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetText: function (text) {\r\n\t\t\tthis.text = text;\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.textarea_resize();\r\n\t\t\t\tthis.focus();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tfocused: function () {\r\n\t\t\tthis.$emit(\"focused\");\r\n\t\t},\r\n\r\n\t\ttextchange: function (e) {\r\n\t\t\tthis.text = e.target.value || \"\";\r\n\t\t},\r\n\r\n\t\tsavetextinstorage: function () {\r\n\t\t\tif (this.storagekey) {\r\n\t\t\t\tlocalStorage[this.storagekey] = this.text || \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tsend_empty_array() {\r\n\t\t\tthis.$emit(\"userSearched\", []);\r\n\t\t},\r\n\r\n\t\tfocus() {\r\n\t\t\tthis.$refs[\"textarea\"].focus();\r\n\t\t},\r\n\r\n\t\tblur() {\r\n\t\t\tthis.$refs[\"textarea\"].blur();\r\n\t\t},\r\n\r\n\t\tblurifempty() {\r\n\t\t\tif (!this.text) this.blur();\r\n\t\t},\r\n\r\n\t\tclose_emoji_picker(event) {\r\n\t\t\tif (event.target.localName !== \"i\") {\r\n\t\t\t\tif (event.target.localName !== \"matrix-element\") {\r\n\t\t\t\t\tthis.display_emoji = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttextarea_resize() {\r\n\t\t\tif (!this.text) {\r\n\t\t\t\tthis.textarea_resize_reset();\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.textarea.style.height = 1 + \"px\";\r\n\t\t\t\tthis.$refs.textarea.style.height =\r\n\t\t\t\t\tthis.$refs.textarea.scrollHeight + \"px\";\r\n\t\t\t\tthis.display_emoji = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttextarea_resize_reset() {\r\n\t\t\tthis.$refs.textarea.style.height = this.content_height + \"px\";\r\n\t\t},\r\n\t\ttoggle_emoji_picker() {\r\n\t\t\tthis.display_emoji = !this.display_emoji;\r\n\t\t},\r\n\r\n\t\tsend_text(event) {\r\n\t\t\tif (this.text && this.text !== \"\\n\") {\r\n\t\t\t\tthis.display_emoji = false;\r\n\t\t\t\tthis.$emit(\"chatMessage\", this.text);\r\n\t\t\t\tthis.$emit(\"emptyInput\");\r\n\t\t\t\tthis.send = false;\r\n\t\t\t\tthis.text = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\t\t},\r\n\r\n\t\tinsert_emoji(emoji) {\r\n\t\t\tthis.text += emoji.native;\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\t\t},\r\n\t\tpaste_image(event) {\r\n\t\t\tthis.get_base64(event);\r\n\t\t},\r\n\t\tget_base64(event) {\r\n\t\t\tthis.pasted_data = event.clipboardData.items;\r\n\r\n\t\t\tif (this.pasted_data.length) {\r\n\t\t\t\tfor (let index in this.pasted_data) {\r\n\t\t\t\t\tlet item = this.pasted_data[index];\r\n\r\n\t\t\t\t\tlet correct_image_type = this.upload.extensions.includes(item.type);\r\n\r\n\t\t\t\t\tif (correct_image_type) {\r\n\t\t\t\t\t\tvar blob = item.getAsFile();\r\n\t\t\t\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\t\t\t\treader.onload = (event) => {\r\n\t\t\t\t\t\t\tthis.$dialog\r\n\t\t\t\t\t\t\t\t.confirm(\"Do you really want to send attachment?\", {\r\n\t\t\t\t\t\t\t\t\tokText: \"Yes\",\r\n\t\t\t\t\t\t\t\t\tcancelText: \"No, cancel\",\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t.then((dialog) => {\r\n\t\t\t\t\t\t\t\t\tvar base64 = event.target.result;\r\n\t\t\t\t\t\t\t\t\tthis.resize_image(base64, item.type);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treader.readAsDataURL(blob);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tresize_image(data, type) {\r\n\t\t\treturn images\r\n\t\t\t\t.autorotation(null, data)\r\n\t\t\t\t.then((base64) => {\r\n\t\t\t\t\tlet _type = this.upload.images.resize.type || \"def\";\r\n\r\n\t\t\t\t\treturn images.resize[_type](base64, 1024, 1024, type, 0.9)\r\n\t\t\t\t\t\t.then((base64) => {\r\n\t\t\t\t\t\t\tthis.$emit(\"base64\", base64);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((error) => console.error(\"Failed to resize image\", error));\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => console.error(\"Failed to resize image\", error));\r\n\t\t},\r\n\r\n\t\tgetsearchposition(position) {\r\n\t\t\tif (!position.start || !this.text.length) return null;\r\n\r\n\t\t\tvar sposition = { start: position.start, middle: 0, end: position.end };\r\n\r\n\t\t\tvar i = position.start;\r\n\t\t\tvar dg = false;\r\n\t\t\tvar br = false;\r\n\r\n\t\t\tvar reg = /[a-zA-Z0-9]{1}/;\r\n\r\n\t\t\tsposition.middle = i;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tvar char = this.text[i];\r\n\r\n\t\t\t\tif (char == \"@\") {\r\n\t\t\t\t\tif (position.start == i || (i > 0 && reg.test(this.text[i - 1]))) {\r\n\t\t\t\t\t\tbr = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdg = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (reg.test(char)) {\r\n\t\t\t\t\t\tsposition.start = i;\r\n\t\t\t\t\t} else br = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti--;\r\n\t\t\t} while (i >= 0 && i <= position.start && !dg && !br);\r\n\r\n\t\t\tif (!dg) {\r\n\t\t\t\tsposition = null;\r\n\t\t\t} else {\r\n\t\t\t\tbr = false;\r\n\t\t\t\ti = position.end;\r\n\r\n\t\t\t\tdo {\r\n\t\t\t\t\tif (!this.text[i] || reg.test(this.text[i])) {\r\n\t\t\t\t\t\tsposition.end = i;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbr = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti++;\r\n\t\t\t\t} while (i <= this.text.length && !br);\r\n\t\t\t}\r\n\r\n\t\t\treturn sposition;\r\n\t\t},\r\n\r\n\t\tgetsearch(position) {\r\n\t\t\tvar sposition = this.getsearchposition(position);\r\n\r\n\t\t\tif (!sposition) return null;\r\n\r\n\t\t\treturn this.text.substring(sposition.start, sposition.middle);\r\n\t\t},\r\n\r\n\t\tkeydown(event) {\r\n\t\t\tif (event.keyCode === 40 || event.keyCode === 38) {\r\n\t\t\t\tif (this.tipusers && this.tipusers.length) {\r\n\t\t\t\t\tthis.$emit(\"browsetip\", event.keyCode === 40 ? true : false);\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (event.keyCode === 39 || event.keyCode === 13) {\r\n\t\t\t\tif (this.tipusers && this.tipusers.length) {\r\n\t\t\t\t\tthis.$emit(\"selectcurrenttip\");\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (event.keyCode === 13) {\r\n\t\t\t\tif (this.mobile) {\r\n\t\t\t\t\tthis.text = this.text + \"\\n\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.send_text(event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeyup(event) {\r\n\t\t\tif (this.block) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar position = f.getCaretPosition(this.$refs[\"textarea\"]);\r\n\r\n\t\t\tvar value = this.getsearch(position);\r\n\r\n\t\t\tthis.$emit(\"tipsearchrequest\", value);\r\n\r\n\t\t\tthis.savetextinstorage();\r\n\t\t},\r\n\r\n\t\tblured() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.$emit(\"tipsearchrequest\", null);\r\n\t\t\t}, 300);\r\n\t\t},\r\n\r\n\t\tinserttip(text) {\r\n\t\t\tthis.$emit(\"tipsearchrequest\", null);\r\n\r\n\t\t\tthis.block = true;\r\n\t\t\tthis.$refs[\"textarea\"];\r\n\r\n\t\t\tvar position = this.getsearchposition(\r\n\t\t\t\tf.getCaretPosition(this.$refs[\"textarea\"])\r\n\t\t\t);\r\n\r\n\t\t\tthis.text =\r\n\t\t\t\tthis.text.substring(0, position.start) +\r\n\t\t\t\ttext +\r\n\t\t\t\tthis.text.substring(position.end + 1);\r\n\r\n\t\t\tif (!this.text[position.end + 1]) {\r\n\t\t\t\tthis.text = this.text + \" \";\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.text[position.end + 1] == \" \") position.end++;\r\n\r\n\t\t\tf.setCaretPosition(\r\n\t\t\t\tthis.$refs[\"textarea\"],\r\n\t\t\t\tposition.end + 1,\r\n\t\t\t\tposition.end + 1\r\n\t\t\t);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.block = false;\r\n\t\t\t}, 350);\r\n\t\t},\r\n\t},\r\n\r\n\tprops: {\r\n\t\tstoragekey: String,\r\n\t\ttipusers: Array,\r\n\t},\r\n\r\n\tcreared() {},\r\n\r\n\tmounted() {\r\n\t\tif (!this.mobile) {\r\n\t\t\tthis.focus();\r\n\t\t}\r\n\r\n\t\tthis.prepareemoji();\r\n\r\n\t\tthis.$refs.textarea.style.height = \"26px\";\r\n\r\n\t\tif (this.storagekey && localStorage[this.storagekey]) {\r\n\t\t\tthis.text = localStorage[this.storagekey];\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"sass\">\r\n.input_component\r\n  width: 100%\r\n  display: flex\r\n  justify-content: center\r\n  align-items: center\r\n  padding: 0 2 * $r\r\n  padding-right: 0\r\n\r\n  /deep/ .emoji-mart .emoji-mart-emoji\r\n    width: 25%\r\n    height: 40px\r\n    cursor: pointer\r\n\r\n    span\r\n      cursor: pointer\r\n\r\n    &:hover\r\n      background: none\r\n      box-shadow: none\r\n\r\n      &:before\r\n        display: none\r\n\r\n  .input-wrapper\r\n    display: flex\r\n    flex-direction: column\r\n    justify-content: center\r\n    align-items: flex-start\r\n    position: relative\r\n    width: 100%\r\n\r\n  .right\r\n    margin: 0 $r\r\n\r\n  .iconbutton\r\n\r\n    .leftdummy\r\n      width: 20px\r\n\r\n    .rightdummy\r\n      width: 35px\r\n\r\n    .idummy\r\n      width: 100%\r\n      height: 35px\r\n      line-height: 35px\r\n\r\n      i\r\n        line-height: 35px !important\r\n\r\n  .previews\r\n    width: 100%\r\n    max-width: 198px\r\n    height: 30px\r\n    display: flex\r\n    align-items: flex-start\r\n    padding: 2px 0\r\n    overflow: hidden\r\n\r\n    &:first-child\r\n      margin-left: 0\r\n\r\n\r\n  .textarea\r\n    width: 100%\r\n    display: flex\r\n    justify-content: flex-start\r\n    align-items: center\r\n\r\n.chat-input\r\n  width: 100%\r\n  max-height: 100px\r\n  // min-height: 26px\r\n  overflow-y: auto\r\n  resize: none\r\n\r\n  &::-webkit-scrollbar\r\n    width: 0 !important\r\n\r\n.fade-enter-active, .fade-leave-active\r\n  transition: all .2s ease-in\r\n\r\n.fade-enter, .fade-leave-to\r\n  opacity: 0\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputField.vue?vue&type=template&id=416e0b15&scoped=true&\"\nimport script from \"./InputField.vue?vue&type=script&lang=js&\"\nexport * from \"./InputField.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./InputField.vue?vue&type=style&index=0&id=416e0b15&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"416e0b15\",\n  null\n  ,true\n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recordButton_wrapper\"},[_c('div',{ref:\"holder\",staticClass:\"recordButton_holder\",class:{ hold: _vm.isHold }},[_c('i',{staticClass:\"icon fas\",class:_vm.isHold ? 'fa-lock' : 'fa-lock-open'})]),(!_vm.isHold)?_c('div',{ref:\"toggle\",staticClass:\"recordButton_micro recordButton_main\",class:{ active: _vm.isRecording, disabled: _vm.disabled },on:{\"mousedown\":_vm.mousedown,\"mouseup\":_vm.mouseup,\"touchstart\":_vm.handleTouchStart,\"touchend\":_vm.handleTouchEnd,\"touchcancel\":_vm.handleTouchEnd}},[_c('i',{staticClass:\"icon fas fa-microphone\"})]):_vm._e(),(_vm.isHold)?_c('div',{ref:\"stop\",staticClass:\"recordButton_stop recordButton_main\",on:{\"click\":_vm.recordEnd}},[_c('i',{staticClass:\"icon fas fa-stop\"})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mapState } from \"vuex\";\r\n\r\nexport default {\r\n\tname: \"recordVoice\",\r\n\tprops: {\r\n\t\tisRecording: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tprepareRecording: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\tdisabled: Boolean,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstart: 0,\r\n\t\t\tisHold: false,\r\n\t\t\tdirection: null,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tmobile: (state) => state.mobile,\r\n\t\t}),\r\n\t},\r\n\tmounted() {},\r\n\tbeforeDestroy() {\r\n\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\r\n\t\tif (this.isRecording) {\r\n\t\t\tthis.$emit(\"onRecordingStop\", { cancel: true });\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tmouseup: function (e) {\r\n\t\t\tif (!this.mobile) this.handleTouchEnd(e);\r\n\t\t},\r\n\r\n\t\tmousedown: function (e) {\r\n\t\t\tif (!this.mobile) this.handleTouchStart(e);\r\n\t\t},\r\n\r\n\t\thandleTouchStart(e) {\r\n\t\t\tif (!this.isRecording) {\r\n\t\t\t\tthis.$emit(\"onRecordingStart\");\r\n\t\t\t} else {\r\n\t\t\t\tif (this.isHold) return;\r\n\t\t\t}\r\n\r\n\t\t\tthis.start = {\r\n\t\t\t\tY: e.changedTouches ? e.changedTouches[0].pageY : e.pageY,\r\n\t\t\t\tX: e.changedTouches ? e.changedTouches[0].pageX : e.pageX,\r\n\t\t\t};\r\n\r\n\t\t\tif (!this.mobile) document.addEventListener(\"mousemove\", this.handleMove);\r\n\t\t\telse document.addEventListener(\"touchmove\", this.handleMove);\r\n\t\t},\r\n\t\thandleTouchEnd(e) {\r\n\t\t\tif (this.isHold) return;\r\n\r\n\t\t\tif (this.isRecording || this.prepareRecording) {\r\n\t\t\t\tthis.$emit(\"onRecordingStop\", {\r\n\t\t\t\t\tsendnow: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\r\n\t\t\tthis.clearStyle();\r\n\t\t},\r\n\r\n\t\tclearStyle() {\r\n\t\t\tif (this.$refs.toggle) {\r\n\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,0)`;\r\n\t\t\t\tthis.$refs.toggle.classList.remove(\"outside\");\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$refs.holder) {\r\n\t\t\t\tthis.$refs.holder.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thandleMove(e) {\r\n\t\t\tif (!this.isRecording) return;\r\n\r\n\t\t\tlet deltaY = this.start.Y - e.pageY;\r\n\t\t\tlet deltaX = this.start.X - e.pageX;\r\n\r\n\t\t\tif (e?.changedTouches?.length) {\r\n\t\t\t\tdeltaY = this.start.Y - e.changedTouches[0].pageY;\r\n\t\t\t\tdeltaX = this.start.X - e.changedTouches[0].pageX;\r\n\t\t\t}\r\n\r\n\t\t\tif (deltaY > 5 && deltaX < 5) {\r\n\t\t\t\tthis.direction = \"Y\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.direction = \"X\";\r\n\t\t\t}\r\n\r\n\t\t\tif (deltaY > 5 && this.direction === \"Y\") {\r\n\t\t\t\tif (!this.$refs.holder.classList.contains(\"active\"))\r\n\t\t\t\t\tthis.$refs.holder.classList.add(\"active\");\r\n\r\n\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,-${deltaY}px)`;\r\n\r\n\t\t\t\tif (deltaY > 70) {\r\n\t\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,0)`;\r\n\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\t\t\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\t\t\t\t\t//document.removeEventListener('mouseup', this.handleTouchEnd)\r\n\r\n\t\t\t\t\tthis.isHold = true;\r\n\t\t\t\t}\r\n\t\t\t} else if (deltaX > 5 && this.direction === \"X\") {\r\n\t\t\t\tthis.$refs.toggle.style.transform = `translate(-${deltaX}px, 0)`;\r\n\r\n\t\t\t\tif (!this.$refs.holder.classList.contains(\"outside\"))\r\n\t\t\t\t\tthis.$refs.toggle.classList.add(\"outside\");\r\n\r\n\t\t\t\tthis.$emit(\"canceling\", (deltaX - 5) / 130);\r\n\r\n\t\t\t\tif (deltaX > 130) {\r\n\t\t\t\t\tthis.$refs.toggle.style.transform = `translate(0,0)`;\r\n\t\t\t\t\tdocument.removeEventListener(\"mousemove\", this.handleMove);\r\n\t\t\t\t\tdocument.removeEventListener(\"touchmove\", this.handleMove);\r\n\t\t\t\t\t//document.removeEventListener('mouseup', this.handleTouchEnd)\r\n\t\t\t\t\tthis.$emit(\"onRecordingStop\", { cancel: true });\r\n\t\t\t\t\tthis.$emit(\"onClear\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.clearStyle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\trecordEnd(e) {\r\n\t\t\tthis.clearStyle();\r\n\r\n\t\t\tif (this.isRecording && this.isHold) {\r\n\t\t\t\tthis.$emit(\"onRecordingStop\", {});\r\n\t\t\t\tthis.isHold = false;\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=16750db8&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.scss?vue&type=style&index=0&id=16750db8&scoped=true&lang=scss&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"16750db8\",\n  null\n  ,true\n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recordProgress\"},[(_vm.isRecording)?_c('div',{staticClass:\"indicatorWrapper\"},[_c('div',{staticClass:\"indicator\",class:{ recording: _vm.isRecording }})]):_c('div',{staticClass:\"del\",on:{\"click\":_vm.clear}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('div',{staticClass:\"timer\"},[_vm._v(_vm._s(_vm.timer))]),_c('div',{ref:\"graph\",staticClass:\"graph\"},[_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":_vm.width,\"height\":\"20\"}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRecording && _vm.opacity),expression:\"isRecording && opacity\"}],ref:\"cancel\",staticClass:\"cancel\"},[_c('span',[_vm._v(\"Slide left to cancel\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n\tname: \"recordProgress\",\r\n\tprops: {\r\n\t\trecordTime: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\trmsData: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tisRecording: {\r\n\t\t\ttype: Boolean,\r\n\t\t},\r\n\t\topacity: {},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\ttimer() {\r\n\t\t\tlet minute = Math.floor(this.recordTime / 60000);\r\n\t\t\tlet sec = Math.floor(this.recordTime / 1000) % 60;\r\n\t\t\treturn `${minute ? minute + \":\" : \"0:\"}${sec < 10 ? \"0\" + sec : sec}`;\r\n\t\t},\r\n\r\n\t\trmsDataLast() {\r\n\t\t\treturn _.last(this.rmsData, 25);\r\n\t\t},\r\n\t},\r\n\r\n\twatch: {\r\n\t\trmsData: _.throttle(function () {\r\n\t\t\tthis.draw();\r\n\t\t}, 30),\r\n\r\n\t\topacity: function () {\r\n\t\t\tthis.$refs.cancel.style.opacity = this.opacity;\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.$refs.cancel.style.opacity = 0;\r\n\t\tlet width = this.$refs.graph.offsetWidth;\r\n\t\tthis.width = width - (width % 100);\r\n\r\n\t\twindow.addEventListener(\"resize\", this.resize);\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener(\"resize\", this.resize);\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tresize() {\r\n\t\t\tlet timer = null;\r\n\r\n\t\t\tvar re = () => {\r\n\t\t\t\tif (!timer) {\r\n\t\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\t\ttimer = null;\r\n\t\t\t\t\t\tlet width = this.$refs.graph.offsetWidth;\r\n\t\t\t\t\t\tthis.width = width - (width % 100);\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tre();\r\n\t\t},\r\n\t\tdraw() {\r\n\t\t\tif (!this.$refs.canvas) return;\r\n\r\n\t\t\tconst ctx = this.$refs.canvas.getContext(`2d`);\r\n\t\t\tlet x = 0;\r\n\t\t\tlet count = 50;\r\n\t\t\tlet width = 2; //this.width / 200\r\n\t\t\tvar l = this.rmsDataLast.length;\r\n\t\t\tvar c = Math.max(Math.floor(l / count), 1);\r\n\r\n\t\t\tctx.clearRect(0, 0, this.width, 20);\r\n\r\n\t\t\tfor (let i = 0; i < l; i = i + c) {\r\n\t\t\t\tctx.fillStyle = \"#00a4ff\";\r\n\t\t\t\tctx.fillRect(\r\n\t\t\t\t\ti * 2 * width,\r\n\t\t\t\t\t10 - this.rmsDataLast[i] / 8,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\tthis.rmsDataLast[i] / 4 + 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear() {\r\n\t\t\tthis.$emit(\"onClear\");\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5df29904&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.scss?vue&type=style&index=0&id=5df29904&scoped=true&lang=scss&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"5df29904\",\n  null\n  ,true\n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload\"},[_c('div',{staticClass:\"uploadWrapper\"},[_c('div',{staticClass:\"contentWrapper\"},[_vm._t(\"content\",function(){return [_c('i',{staticClass:\"fas fa-plus\"})]})],2),_c('div',{staticClass:\"inputWrapper\"},[_c('input',{attrs:{\"type\":\"file\",\"multiple\":_vm.multiple},on:{\"change\":_vm.upload}})])]),(_vm.dropzone)?_c('div',{ref:\"dropzone\",staticClass:\"dropzone\",class:{ dropzone: _vm.dropzone }},[_vm._t(\"dropzone\",function(){return [_c('i',{staticClass:\"fas fa-plus\"}),_vm._v(\" \"+_vm._s(_vm.$t(\"caption.dragAndDropAFile\"))+\" \")]})],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"upload\">\r\n\t\t<div class=\"uploadWrapper\">\r\n\t\t\t<div class=\"contentWrapper\">\r\n\t\t\t\t<slot name=\"content\">\r\n\t\t\t\t\t<i class=\"fas fa-plus\"></i>\r\n\t\t\t\t</slot>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"inputWrapper\">\r\n\t\t\t\t<input type=\"file\" :multiple=\"multiple\" @change=\"upload\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div\r\n\t\t\tclass=\"dropzone\"\r\n\t\t\t:class=\"{ dropzone: dropzone }\"\r\n\t\t\tv-if=\"dropzone\"\r\n\t\t\tref=\"dropzone\"\r\n\t\t>\r\n\t\t\t<slot name=\"dropzone\">\r\n\t\t\t\t<i class=\"fas fa-plus\"></i> {{ $t(\"caption.dragAndDropAFile\") }}\r\n\t\t\t</slot>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<style scoped lang=\"sass\">\r\n\r\n.upload\r\n  width: 100%\r\n\r\n.uploadWrapper\r\n  position: relative\r\n\r\n  .inputWrapper\r\n    position: absolute\r\n    left: 0\r\n    right: 0\r\n    top: 0\r\n    bottom: 0\r\n    opacity: 0\r\n\r\n    input\r\n      position: absolute\r\n      left: 0\r\n      right: 0\r\n      top: 0\r\n      bottom: 0\r\n      opacity: 0\r\n</style>\r\n\r\n<script>\r\nimport Images from \"@/application/utils/images.js\";\r\n\r\nvar each = require(\"async-each\");\r\n\r\nvar images = new Images();\r\n\r\nexport default {\r\n\tname: \"upload\",\r\n\tdirectives: {},\r\n\tprops: {\r\n\t\tdropzone: String,\r\n\t\tmultiple: Boolean,\r\n\r\n\t\tonlyimage: Boolean,\r\n\r\n\t\tmaxsize: {\r\n\t\t\tdefault: 25,\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\r\n\t\textensions: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t},\r\n\t\timages: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {},\r\n\t\t},\r\n\t},\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tloading: false,\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tmaxSize() {\r\n\t\t\treturn this.maxsize * 1024 * 1024;\r\n\t\t},\r\n\t},\r\n\r\n\tcreated: () => {},\r\n\tmethods: {\r\n\t\tread: function (file) {\r\n\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\treader.onloadend = function (e) {\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tbase64: e.target.result,\r\n\t\t\t\t\t\tfile: file,\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupload: function (event) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tvar files =\r\n\t\t\t\tevent.dataTransfer?.files || event.target?.files || event.files || [];\r\n\t\t\tvar result = {};\r\n\r\n\t\t\tthis.loading = true;\r\n\r\n\t\t\tthis.$emit(\"start\", files);\r\n\r\n\t\t\tvar ha = this;\r\n\r\n\t\t\teach(\r\n\t\t\t\t_.toArray(files),\r\n\t\t\t\t(file, next) => {\r\n\t\t\t\t\tvar error = this.check(file);\r\n\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\tha.$emit(\"error\", {\r\n\t\t\t\t\t\t\terror: error,\r\n\t\t\t\t\t\t\tfile: file,\r\n\t\t\t\t\t\t\ttext: this.errorText(error, file),\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tnext(new Error(error));\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.read(file)\r\n\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\tresult[data.file.name] = data;\r\n\r\n\t\t\t\t\t\t\treturn this.handle(data);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\tha.$emit(\"uploaded\", data);\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tha.$emit(\"error\", {\r\n\t\t\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t\t\t\tfile: file,\r\n\t\t\t\t\t\t\t\ttext: this.errorText(e, file),\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tnext(new Error(error));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t(err) => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tha.$emit(\"uploadedAll\", result);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\terrorText: function (error, file) {\r\n\t\t\tif (error === \"filesize\") {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t\"File Size Error: (\" +\r\n\t\t\t\t\tfile.name +\r\n\t\t\t\t\t\"). The File can't be more than \" +\r\n\t\t\t\t\tthis.maxsize +\r\n\t\t\t\t\t\" mbytes\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (error === \"fileext\") {\r\n\t\t\t\treturn \"File Extension Error:\" + file.name;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcheck: function (file) {\r\n\t\t\tif (!this.checkSize(file)) {\r\n\t\t\t\treturn \"filesize\";\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.checkExtension(file)) {\r\n\t\t\t\treturn \"fileext\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckSize: function (file) {\r\n\t\t\treturn file.size <= this.maxSize;\r\n\t\t},\r\n\t\tgetExtension: function (file) {\r\n\t\t\tvar name = file.name.split(\".\");\r\n\t\t\tvar ext = name[name.length - 1].toLowerCase();\r\n\r\n\t\t\treturn ext;\r\n\t\t},\r\n\t\tcheckExtension: function (file) {\r\n\t\t\tif (this.extensions.length) {\r\n\t\t\t\tif (_.indexOf(this.extensions, this.getExtension(file)) == -1)\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\thandle: function (data) {\r\n\t\t\tif (\r\n\t\t\t\tdata.file.type === \"image/jpeg\" ||\r\n\t\t\t\tdata.file.type === \"image/png\" ||\r\n\t\t\t\tdata.file.type === \"image/webp\"\r\n\t\t\t) {\r\n\t\t\t\treturn this.handleImages(data);\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.resolve(data);\r\n\t\t},\r\n\t\tsendAnyFile: function (data) {\r\n\t\t\tthis.$emit(\"anyFile\", data);\r\n\t\t},\r\n\t\tresizeIfNeed: function (base64, ftype) {\r\n\t\t\tif (this.images.resize) {\r\n\t\t\t\tvar type = this.images.resize.type || \"def\";\r\n\r\n\t\t\t\treturn images.resize[type](\r\n\t\t\t\t\tbase64,\r\n\t\t\t\t\tthis.images.resize.width || 1024,\r\n\t\t\t\t\tthis.images.resize.height || 1024,\r\n\t\t\t\t\tftype,\r\n\t\t\t\t\tthis.images.resize.quality || 0.85\r\n\t\t\t\t)\r\n\t\t\t\t\t.then((base64) => {\r\n\t\t\t\t\t\treturn Promise.resolve(base64);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn Promise.resolve(base64);\r\n\t\t},\r\n\t\thandleImages: function (data) {\r\n\t\t\treturn images\r\n\t\t\t\t.autorotation(data.file, data.base64)\r\n\t\t\t\t.then((base64) => {\r\n\t\t\t\t\tdata.base64 = base64;\r\n\r\n\t\t\t\t\treturn Promise.resolve(data);\r\n\t\t\t\t})\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\treturn this.resizeIfNeed(data.base64, data.file.type).then(\r\n\t\t\t\t\t\t(base64) => {\r\n\t\t\t\t\t\t\tdata.base64 = base64;\r\n\r\n\t\t\t\t\t\t\treturn Promise.resolve(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (this.images.resize) {\r\n\t\t\t\t\t\tvar type = this.images.resize.type || \"def\";\r\n\r\n\t\t\t\t\t\treturn images.resize[type](\r\n\t\t\t\t\t\t\tdata.base64,\r\n\t\t\t\t\t\t\tthis.images.resize.width || 1024,\r\n\t\t\t\t\t\t\tthis.images.resize.height || 1024,\r\n\t\t\t\t\t\t\tdata.file.type,\r\n\t\t\t\t\t\t\tthis.images.resize.quality || 0.85\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.then((base64) => {\r\n\t\t\t\t\t\t\t\tdata.base64 = base64;\r\n\r\n\t\t\t\t\t\t\t\treturn Promise.resolve(data);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Promise.resolve(data);\r\n\t\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3fad2ed3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=3fad2ed3&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"3fad2ed3\",\n  null\n  ,true\n)\n\nexport default component.exports","import f from \"@/application/functions\";\r\nimport InputField from \"./InputField/InputField.vue\";\r\nimport recordVoice from \"@/components/assets/recordVoice/index.vue\";\r\nimport { mapState } from \"vuex\";\r\nimport Images from \"@/application/utils/images.js\";\r\n\r\nimport contacts from \"@/components/contacts/list/index.vue\";\r\nimport preview from \"@/components/contacts/preview/index.vue\";\r\nimport recordProgress from \"@/components/assets/recordProgress/index.vue\";\r\n\r\nimport upload from \"@/components/assets/upload/index.vue\";\r\n\r\nimport { cancelable } from \"cancelable-promise\";\r\nexport default {\r\n\tname: \"chatInput\",\r\n\tprops: {\r\n\t\tchat: Object,\r\n\t\tu: String,\r\n\t\trelationEvent: Object,\r\n\t},\r\n\r\n\tcomponents: {\r\n\t\tInputField,\r\n\t\tcontacts,\r\n\t\tpreview,\r\n\t\trecordProgress,\r\n\t\trecordVoice,\r\n\t\tupload,\r\n\t},\r\n\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tupload: true,\r\n\t\t\ttest: [],\r\n\t\t\tloading: false,\r\n\t\t\ttext: \"\",\r\n\t\t\tfile: {},\r\n\t\t\tfileInfo: {},\r\n\t\t\tready: false,\r\n\t\t\tcreating: false,\r\n\t\t\tuserId: \"\",\r\n\t\t\tshowuserselect: null,\r\n\t\t\tanyUrlMeta: String,\r\n\t\t\tjoinedMembers: [],\r\n\t\t\ttipvalue: null,\r\n\t\t\ttipuserindex: 0,\r\n\t\t\trecord: null,\r\n\t\t\trecordRmsData: [],\r\n\t\t\tisRecording: false,\r\n\r\n\t\t\tmediaRecorder: null,\r\n\t\t\taudioContext: null,\r\n\t\t\taudioAnalyser: null,\r\n\r\n\t\t\trecordTime: 0,\r\n\t\t\tinterval: null,\r\n\t\t\tcancelOpacity: 0,\r\n\t\t\tmicrophoneDisabled: false,\r\n\t\t\tprepareRecording: false,\r\n\r\n\t\t\tcancelledCordovaMediaRecorder: false,\r\n\t\t};\r\n\t},\r\n\r\n\twatch: {\r\n\t\tusersForKeysHash: {\r\n\t\t\t//immediate: true,\r\n\t\t\thandler: function () {},\r\n\t\t},\r\n\t\ttipusers: function () {\r\n\t\t\tif (!this.tipusers.length) {\r\n\t\t\t\tthis.tipuserindex = 0;\r\n\t\t\t} else {\r\n\t\t\t\tif (this.tipuserindex > this.tipusers.length - 1) {\r\n\t\t\t\t\tthis.tipuserindex = this.tipusers.length - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\tbeforeDestroy() {\r\n\t\tif (this.audioContext) this.audioContext.close();\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tvoiceEnable() {\r\n\t\t\treturn this.$store.state.voiceMessagesEnabled;\r\n\t\t},\r\n\r\n\t\tconnect: function () {\r\n\t\t\treturn this.$store.state.contact;\r\n\t\t},\r\n\t\tpkoindisabled: function () {\r\n\t\t\treturn this.$store.state.pkoindisabled;\r\n\t\t},\r\n\t\tmenuItems: function () {\r\n\t\t\tvar menuItems = [];\r\n\r\n\t\t\tif (\r\n\t\t\t\twindow.POCKETNETINSTANCE &&\r\n\t\t\t\twindow.POCKETNETINSTANCE.mobile.supportimagegallery()\r\n\t\t\t) {\r\n\t\t\t\tmenuItems.push({\r\n\t\t\t\t\tclick: \"cameraHandlerCustom\",\r\n\t\t\t\t\ttitle: this.$i18n.t(\"button.takePhotoOrVideo\"),\r\n\t\t\t\t\ticon: \"fas fa-camera\",\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmenuItems.push({\r\n\t\t\t\t\tclick: \"cameraHandler\",\r\n\t\t\t\t\ttitle: this.$i18n.t(\"button.takePhotoOrVideo\"),\r\n\t\t\t\t\ticon: \"fas fa-camera\",\r\n\r\n\t\t\t\t\tupload: {\r\n\t\t\t\t\t\tmultiple: true,\r\n\t\t\t\t\t\textensions: [\"jpg\", \"jpeg\", \"png\", \"webp\"],\r\n\t\t\t\t\t\tmaxsize: 100,\r\n\t\t\t\t\t\timages: {\r\n\t\t\t\t\t\t\tresize: {\r\n\t\t\t\t\t\t\t\ttype: \"fit\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tmenuItems.push({\r\n\t\t\t\tclick: \"fileHandler\",\r\n\t\t\t\ttitle: this.$i18n.t(\"button.sendFile\"),\r\n\t\t\t\ticon: \"fas fa-sticky-note\",\r\n\r\n\t\t\t\tupload: {\r\n\t\t\t\t\tmultiple: true,\r\n\t\t\t\t\textensions: [],\r\n\t\t\t\t\tmaxsize: 25,\r\n\t\t\t\t\timages: {\r\n\t\t\t\t\t\tresize: {\r\n\t\t\t\t\t\t\ttype: \"fit\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (this.transaction && !this.pkoindisabled) {\r\n\t\t\t\tmenuItems.unshift({\r\n\t\t\t\t\tclick: \"sendtransactionWrapper\",\r\n\t\t\t\t\ttitle: this.$i18n.t(\"button.sendCoins\"),\r\n\t\t\t\t\ticon: \"fas fa-wallet\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn menuItems;\r\n\t\t},\r\n\t\t...mapState([\"chats\"]),\r\n\r\n\t\tuserlist: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\treturn this.core.mtrx.chatUsersInfo(this.chat.roomId, \"anotherChatUsers\");\r\n\t\t},\r\n\r\n\t\ttransaction: function () {\r\n\t\t\treturn f.deep(window, \"POCKETNETINSTANCE.platform.ui.wallet.send\");\r\n\t\t},\r\n\r\n\t\tuusers: function () {\r\n\t\t\tif (this.u) {\r\n\t\t\t\treturn _.map(this.u.split(\",\"), (u) => {\r\n\t\t\t\t\treturn u;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\tausers: function () {\r\n\t\t\tif (this.u) {\r\n\t\t\t\treturn _.map(this.u.split(\",\"), (u) => {\r\n\t\t\t\t\treturn this.core.user.matrixId(u);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\tstateChat: function () {\r\n\t\t\tvar id = this.$route.query.id;\r\n\t\t\treturn this.$store.state.chatsMap[id];\r\n\t\t},\r\n\t\tinvited: function () {\r\n\t\t\tif (!this.chat) {\r\n\t\t\t\tif (this.u) return this.ausers;\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\r\n\t\t\treturn _.map(\r\n\t\t\t\t_.filter(this.chat.currentState.getMembers(), function (m, v) {\r\n\t\t\t\t\treturn m.membership === \"invite\";\r\n\t\t\t\t}),\r\n\t\t\t\tfunction (u) {\r\n\t\t\t\t\treturn u.userId;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tjoined: function () {\r\n\t\t\tif (!this.chat) return [];\r\n\r\n\t\t\tlet roomId = this.chat.roomId;\r\n\t\t\tlet self = this;\r\n\t\t\tlet arr = [];\r\n\t\t\tlet members = 0;\r\n\r\n\t\t\tthis.chat.currentState.getMembers().forEach(function (user) {\r\n\t\t\t\tif (user.membership === \"join\") {\r\n\t\t\t\t\tarr.push(user.userId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn arr;\r\n\t\t},\r\n\r\n\t\ttipusers: function () {\r\n\t\t\tif (this.tipvalue === null) return [];\r\n\t\t\tif (this.tipvalue === \"\") return this.userlist;\r\n\r\n\t\t\tvar value = this.tipvalue.toLowerCase();\r\n\r\n\t\t\tvar u = _.filter(this.userlist, function (u) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tu.name.toLowerCase().indexOf(value) == 0 &&\r\n\t\t\t\t\tu.name.toLowerCase() != value\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\treturn u;\r\n\t\t},\r\n\r\n\t\tmaintipuser: function () {\r\n\t\t\tif (this.tipusers.length) {\r\n\t\t\t\treturn this.tipusers[this.tipuserindex || 0];\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t},\r\n\r\n\tcreated() {},\r\n\r\n\t///\r\n\r\n\tmounted() {\r\n\t\tthis.ready = true;\r\n\r\n\t\tif (!this.chat && this.core.mtrx.client) {\r\n\t\t\tthis.newchat().catch((e) => {\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\twait: function () {\r\n\t\t\treturn this.$f.pretry(() => {\r\n\t\t\t\treturn this.core.mtrx.client && this.core.mtrx.access;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tbrowsetip: function (increase) {\r\n\t\t\tincrease ? this.tipuserindex++ : this.tipuserindex--;\r\n\r\n\t\t\tif (this.tipuserindex > this.tipusers.length - 1) {\r\n\t\t\t\tthis.tipuserindex = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.tipuserindex < 0) {\r\n\t\t\t\tthis.tipuserindex = this.tipusers.length - 1;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tselectcurrenttip: function () {\r\n\t\t\tthis.insertuser(this.tipusers[this.tipuserindex || 0]);\r\n\t\t},\r\n\r\n\t\tinsertuser: function (user = {}) {\r\n\t\t\tvar name = user.name || \"\";\r\n\r\n\t\t\tthis.$refs[\"newinput\"].inserttip(name);\r\n\t\t},\r\n\r\n\t\ttipBySearch: function (value) {\r\n\t\t\tthis.tipvalue = value;\r\n\t\t},\r\n\r\n\t\tshowuserselected: function (contact, action) {\r\n\t\t\tthis[action](contact);\r\n\t\t},\r\n\r\n\t\tresizeImage: function (base64) {\r\n\t\t\tvar ftype = base64.split(\";\")[0].split(\"/\")[1];\r\n\t\t\tvar images = new Images();\r\n\r\n\t\t\treturn images.resize[\"fit\"](base64, 1024, 1024, ftype, 0.95)\r\n\t\t\t\t.then((base64) => {\r\n\t\t\t\t\treturn Promise.resolve(base64);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tcameraHandlerCustom: function () {\r\n\t\t\tvar result = [];\r\n\r\n\t\t\tthis.$refs.dropdownMenu.hidePopup();\r\n\r\n\t\t\twindow.POCKETNETINSTANCE.platform.ui.uploadImage({\r\n\t\t\t\tmultiple: true,\r\n\r\n\t\t\t\taction: ({ base64 }, resolve) => {\r\n\t\t\t\t\treturn this.resizeImage(base64)\r\n\t\t\t\t\t\t.then((base64) => {\r\n\t\t\t\t\t\t\treturn f.Base64.toFile(base64).then((file) => {\r\n\t\t\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\t\t\tbase64,\r\n\t\t\t\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tresult.push(data);\r\n\r\n\t\t\t\t\t\t\t\tthis.uploadUploaded(null, data);\r\n\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tonSuccess: (imgs) => {\r\n\t\t\t\t\tthis.uploadUploadedAll();\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsendtransactionWrapper: function () {\r\n\t\t\tthis.menuIsVisible = false;\r\n\r\n\t\t\tvar users = _.filter(\r\n\t\t\t\t_.map(this.joined, (j) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tthis.$f.deep(\r\n\t\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\t\t\"$store.state.users.\" + this.$f.getmatrixid(j)\r\n\t\t\t\t\t\t) || null\r\n\t\t\t\t\t);\r\n\t\t\t\t}),\r\n\t\t\t\t(r) => {\r\n\t\t\t\t\treturn r && r.source && r.id != this.core.user.userinfo?.id;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif (!users.length) {\r\n\t\t\t\treturn \"users.length\";\r\n\t\t\t}\r\n\r\n\t\t\tif (users.length > 1) {\r\n\t\t\t\tthis.core.store.commit(\"setmodal\", {\r\n\t\t\t\t\tcaption: this.$i18n.t(\"caption.sendTransactionTo\"),\r\n\t\t\t\t\ttype: \"showuserselect\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tusers: users,\r\n\t\t\t\t\t\taction: \"sendtransaction\",\r\n\t\t\t\t\t\tuserselected: (c) => {\r\n\t\t\t\t\t\t\tthis.showuserselected(c, \"sendtransaction\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\t/*this.showuserselect = {\r\n\t\t\t\t  users : users,\r\n\t\t\t\t  action : 'sendtransaction'\r\n\t\t\t\t}*/\r\n\t\t\t} else {\r\n\t\t\t\tthis.sendtransaction(users[0]);\r\n\t\t\t}\r\n\r\n\t\t\tthis.$refs.dropdownMenu.hidePopup();\r\n\t\t},\r\n\r\n\t\tsendtransaction: function (user) {\r\n\t\t\tvar api = this.transaction;\r\n\r\n\t\t\t//TODO get address and send transaction\r\n\r\n\t\t\tapi({\r\n\t\t\t\troomid: this.chat.roomId,\r\n\t\t\t\taddress: user.source.address,\r\n\t\t\t});\r\n\r\n\t\t\t/*.then(({txid, from}) => {\r\n\t  \r\n\t\t\t  return this.core.mtrx.transaction(this.chat.roomId, txid)\r\n\t  \r\n\t\t\t})*/\r\n\t\t},\r\n\r\n\t\temitInputData: function () {\r\n\t\t\tthis.$emit(\"emptyInput\");\r\n\t\t\tthis.upload = true;\r\n\t\t},\r\n\r\n\t\tHideUploadPic() {\r\n\t\t\tthis.upload = false;\r\n\t\t},\r\n\r\n\t\temitUrl: function (url) {\r\n\t\t\tthis.$emit(\"setMetaUrl\", url);\r\n\t\t},\r\n\r\n\t\tnewchat() {\r\n\t\t\tif (this.u) {\r\n\t\t\t\tthis.$store.state.globalpreloader = true;\r\n\t\t\t\tvar matrixId = null;\r\n\t\t\t\tvar myMatrixId = null;\r\n\t\t\t\tvar chat = null;\r\n\t\t\t\tvar id = \"\";\r\n\r\n\t\t\t\tthis.creating = true;\r\n\t\t\t\treturn this.core.user\r\n\t\t\t\t\t.usersInfo(this.uusers)\r\n\t\t\t\t\t.then((info) => {\r\n\t\t\t\t\t\tif (this.uusers.length == 1) {\r\n\t\t\t\t\t\t\tvar _info = info[0];\r\n\r\n\t\t\t\t\t\t\tif (!_info || !_info.keys || _info.keys.length < 12) {\r\n\t\t\t\t\t\t\t\tthis.$emit(\"cantchatcrypto\");\r\n\t\t\t\t\t\t\t\treturn Promise.reject(\"ny2\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.core.user.userinfo.keys.length < 12) {\r\n\t\t\t\t\t\t\tthis.$emit(\"cantchatcrypto\");\r\n\t\t\t\t\t\t\treturn Promise.reject(\"ny2\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//return Promise.reject('ny3')\r\n\r\n\t\t\t\t\t\tid = this.core.mtrx.kit.tetatetid(info[0], this.core.user.userinfo);\r\n\r\n\t\t\t\t\t\tmatrixId = this.core.user.matrixId(info[0].id);\r\n\t\t\t\t\t\tmyMatrixId = this.core.user.matrixId(this.core.user.userinfo.id);\r\n\r\n\t\t\t\t\t\tvar initialstate = [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttype: \"m.set.encrypted\",\r\n\t\t\t\t\t\t\t\tstate_key: \"\",\r\n\t\t\t\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\t\t\t\tencrypted: true,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\treturn this.core.mtrx.client.createRoom({\r\n\t\t\t\t\t\t\troom_alias_name: id,\r\n\t\t\t\t\t\t\tvisibility: \"private\",\r\n\t\t\t\t\t\t\tinvite: [matrixId],\r\n\t\t\t\t\t\t\tname: \"#\" + id,\r\n\t\t\t\t\t\t\tinitial_state: initialstate,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((_chat) => {\r\n\t\t\t\t\t\tchat = _chat;\r\n\t\t\t\t\t\tthis.$store.state.globalpreloader = false;\r\n\r\n\t\t\t\t\t\tlet m_chat = this.core.mtrx.client.getRoom(_chat.room_id);\r\n\t\t\t\t\t\tlet event = m_chat.currentState.getStateEvents(\r\n\t\t\t\t\t\t\t\"m.room.power_levels\"\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\treturn this.core.mtrx.client\r\n\t\t\t\t\t\t\t.setPowerLevel(chat.room_id, matrixId, 100, event[0])\r\n\t\t\t\t\t\t\t.catch((e) => {});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\tthis.creating = false;\r\n\r\n\t\t\t\t\t\tif (this.connect && this.connect == id) {\r\n\t\t\t\t\t\t\tthis.greetings();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.$store.commit(\"CONTACT\", false);\r\n\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tthis.creating = false;\r\n\r\n\t\t\t\t\t\tthis.$store.state.globalpreloader = false;\r\n\r\n\t\t\t\t\t\tif (e && e.errcode == \"M_ROOM_IN_USE\") {\r\n\t\t\t\t\t\t\treturn this.core.mtrx.client\r\n\t\t\t\t\t\t\t\t.joinRoom(\r\n\t\t\t\t\t\t\t\t\t\"#\" +\r\n\t\t\t\t\t\t\t\t\t\tid +\r\n\t\t\t\t\t\t\t\t\t\t\":\" +\r\n\t\t\t\t\t\t\t\t\t\tthis.core.mtrx.baseUrl.replace(\"https://\", \"\")\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.then(() => {})\r\n\t\t\t\t\t\t\t\t.catch((e) => {});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn Promise.reject(\"u\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmaySendMessage() {\r\n\t\t\treturn this.chat && this.chat.maySendMessage();\r\n\t\t},\r\n\r\n\t\tgreetings() {\r\n\t\t\tthis.send(\"👋\").then((r) => {\r\n\t\t\t\treturn Promise.resolve(r);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsendinput(text) {\r\n\t\t\tthis.send(text).then((r) => {\r\n\t\t\t\treturn Promise.resolve(r);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\ttextCutLimit: function (text, limit) {\r\n\t\t\ttext = text.trim();\r\n\t\t\tif (text.length <= limit) return text;\r\n\r\n\t\t\ttext = text.slice(0, limit);\r\n\r\n\t\t\treturn text.trim() + \"...\";\r\n\t\t},\r\n\r\n\t\treplaceMentions(text) {\r\n\t\t\t_.each(this.userlist, function (user) {\r\n\t\t\t\ttext = text.replace(\r\n\t\t\t\t\tnew RegExp(\"@\" + user.name, \"g\"),\r\n\t\t\t\t\t\"@\" + user.id + \":\" + user.name\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\treturn text;\r\n\t\t},\r\n\r\n\t\tsend(text) {\r\n\t\t\tif (!this.chat) {\r\n\t\t\t\tthis.newchat().catch((e) => {});\r\n\t\t\t}\r\n\r\n\t\t\t//return this.chat.pcrypto.getOrCreateCommonKey()\r\n\r\n\t\t\t//return this.chat.pcrypto.sendCommonKey()\r\n\r\n\t\t\t//return\r\n\r\n\t\t\tthis.$emit(\"sending\");\r\n\r\n\t\t\tif (!this.relationEvent) {\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\r\n\t\t\treturn this.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat && !this.creating;\r\n\t\t\t\t})\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\tthis.$emit(\"sent\");\r\n\r\n\t\t\t\t\ttext = this.replaceMentions(text);\r\n\r\n\t\t\t\t\tif (this.relationEvent) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tthis.relationEvent.type == \"m.replace\" &&\r\n\t\t\t\t\t\t\tthis.relationEvent.event\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn this.core.mtrx\r\n\t\t\t\t\t\t\t\t.textEvent(this.chat, text)\r\n\t\t\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\t\t\tr[\"m.relates_to\"] = {\r\n\t\t\t\t\t\t\t\t\t\trel_type: \"m.replace\",\r\n\t\t\t\t\t\t\t\t\t\tevent_id:\r\n\t\t\t\t\t\t\t\t\t\t\tthis.core.mtrx.clearEventId(this.relationEvent.event) ||\r\n\t\t\t\t\t\t\t\t\t\t\tf.makeid(),\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\tvar editEvent = r;\r\n\r\n\t\t\t\t\t\t\t\t\tthis.relationEvent.event.event.content.body = r.body;\r\n\t\t\t\t\t\t\t\t\tthis.relationEvent.event.event.content.block = r.block;\r\n\t\t\t\t\t\t\t\t\tthis.relationEvent.event.event.content.msgtype = r.msgtype;\r\n\r\n\t\t\t\t\t\t\t\t\tdelete this.relationEvent.event.event.decryptKey;\r\n\t\t\t\t\t\t\t\t\tdelete this.relationEvent.event.event.decrypted;\r\n\r\n\t\t\t\t\t\t\t\t\treturn this.core.mtrx.client.sendEvent(\r\n\t\t\t\t\t\t\t\t\t\tthis.chat.roomId,\r\n\t\t\t\t\t\t\t\t\t\t\"m.room.message\",\r\n\t\t\t\t\t\t\t\t\t\teditEvent\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\t\t\t\tthis.core.store.dispatch(\"FETCH_EVENTS\");\r\n\r\n\t\t\t\t\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\r\n\t\t\t\t\t\t\t\t\tthis.$emit(\"force\");\r\n\r\n\t\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\t\t\treturn Promise.reject(e);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this.core.mtrx.sendtext(this.chat, text, {\r\n\t\t\t\t\t\trelation: this.relationEvent,\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tthis.$emit(\"sentMessageError\", {\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tpasteImage(data) {\r\n\t\t\tthis.sendImage({ base64: data });\r\n\t\t},\r\n\r\n\t\tsendImage: function ({ base64, file }) {\r\n\t\t\tvar id = f.makeid();\r\n\r\n\t\t\tvar meta = {\r\n\t\t\t\ttype: \"image\",\r\n\t\t\t\tid: id,\r\n\t\t\t\tbase64: base64,\r\n\t\t\t};\r\n\r\n\t\t\tthis.$emit(\"sendingData\", meta);\r\n\t\t\t//setTimeout(() => {\r\n\t\t\tthis.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat;\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tif (meta.aborted) return Promise.reject(\"aborted\");\r\n\r\n\t\t\t\t\treturn this.core.mtrx.sendImage(this.chat, base64, null, meta, {\r\n\t\t\t\t\t\trelation: this.relationEvent,\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\r\n\t\t\t\t\tthis.$emit(\"sentData\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\tthis.$emit(\"sentError\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t});\r\n\t\t\t//}, 5000)\r\n\t\t},\r\n\r\n\t\tcanencryptfilesize: function (file) {\r\n\t\t\tvar s = 10 * 1024 * 1024;\r\n\r\n\t\t\tif (!this.chat.pcrypto.canBeEncrypt()) {\r\n\t\t\t\treturn Promise.resolve(false);\r\n\t\t\t}\r\n\r\n\t\t\tif (file.size > s) {\r\n\t\t\t\treturn this.$dialog\r\n\t\t\t\t\t.confirm(\r\n\t\t\t\t\t\t\"Files larger than 10 megabytes are not encrypted. Do you want to send the file unencrypted?\",\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tokText: \"Yes\",\r\n\t\t\t\t\t\t\tcancelText: \"No, cancel\",\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\t.then((dialog) => {\r\n\t\t\t\t\t\treturn Promise.resolve(true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\treturn Promise.reject(\"cancel\");\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.resolve(false);\r\n\t\t},\r\n\r\n\t\tsendFile: function ({ file }) {\r\n\t\t\tvar id = f.makeid();\r\n\r\n\t\t\tvar meta = {\r\n\t\t\t\ttype: \"file\",\r\n\t\t\t\tid: id,\r\n\t\t\t\tinfo: {\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tsize: file.size,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tthis.$emit(\"sendingData\", meta);\r\n\r\n\t\t\tthis.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat;\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\treturn this.canencryptfilesize(file);\r\n\t\t\t\t})\r\n\t\t\t\t.then((notenc) => {\r\n\t\t\t\t\treturn this.core.mtrx.sendFile(\r\n\t\t\t\t\t\tthis.chat,\r\n\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\tmeta,\r\n\t\t\t\t\t\t{ relation: this.relationEvent },\r\n\t\t\t\t\t\tnotenc\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\r\n\t\t\t\t\tthis.$emit(\"sentData\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\tthis.$emit(\"sentError\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tfocus: function () {\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].focus();\r\n\t\t},\r\n\r\n\t\tfocused: function () {\r\n\t\t\tthis.$emit(\"focused\");\r\n\t\t},\r\n\r\n\t\tblur: function () {\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].blur();\r\n\t\t},\r\n\r\n\t\tblurifempty: function () {\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].blurifempty();\r\n\t\t},\r\n\r\n\t\tchange: function () {},\r\n\r\n\t\tsetText: function (text) {\r\n\t\t\tthis.text = text;\r\n\r\n\t\t\tif (this.$refs[\"newinput\"]) this.$refs[\"newinput\"].setText(text);\r\n\t\t},\r\n\r\n\t\tkeyup: function (evt) {\r\n\t\t\tvar value = evt.target.value;\r\n\r\n\t\t\tif (value === \"\") {\r\n\t\t\t\tthis.$emit(\"inputClean\", false);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit(\"inputClean\", true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.text = value;\r\n\t\t\tthis.anyUrlMeta = f.getUrl(this.text);\r\n\r\n\t\t\tif (this.anyUrlMeta !== undefined) {\r\n\t\t\t\tthis.$emit(\"setMetaUrl\", this.anyUrlMeta);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit(\"inputClean\", false);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.chat)\r\n\t\t\t\tthis.core.mtrx.client.sendTyping(this.chat.roomId, true, 100);\r\n\t\t},\r\n\r\n\t\tmenuItemClick(item, rowObject) {\r\n\t\t\tthis[item.click](rowObject);\r\n\t\t},\r\n\r\n\t\tmenuItemLoadedHandler: function (value) {\r\n\t\t\tthis.menuIsVisible = value;\r\n\r\n\t\t\treturn this.menuIsVisible;\r\n\t\t},\r\n\r\n\t\tuploadStart(item, files) {},\r\n\r\n\t\tuploadError(item, error) {\r\n\t\t\tthis.$store.commit(\"icon\", {\r\n\t\t\t\ticon: \"error\",\r\n\t\t\t\tmessage: error.text,\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetImg() {\r\n\t\t\treturn (this.imgs = true);\r\n\t\t},\r\n\t\tuploadSizeError(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.$refs.dropdownMenu.hidePopup();\r\n\t\t\t}\r\n\t\t},\r\n\t\tuploadUploaded(item, data) {\r\n\t\t\tconst validImageTypes = [\r\n\t\t\t\t\"image/gif\",\r\n\t\t\t\t\"image/jpeg\",\r\n\t\t\t\t\"image/png\",\r\n\t\t\t\t\"image/webp\",\r\n\t\t\t];\r\n\r\n\t\t\tif (!validImageTypes.includes(data.file.type)) {\r\n\t\t\t\tthis.sendFile(data);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.sendImage(data);\r\n\t\t\t}\r\n\t\t},\r\n\t\timageWH(file) {\r\n\t\t\tconst img = new Image();\r\n\t\t\tvar imgInfo = {};\r\n\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\timg.onload = function () {\r\n\t\t\t\t\timgInfo.w = this.width;\r\n\t\t\t\t\timgInfo.h = this.height;\r\n\t\t\t\t\tresolve(imgInfo);\r\n\t\t\t\t};\r\n\r\n\t\t\t\timg.onerror = function (e) {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t};\r\n\r\n\t\t\t\timg.src = file.base64;\r\n\t\t\t});\r\n\t\t},\r\n\t\tuploadUploadedAll(item, result) {\r\n\t\t\tthis.$store.state.loading = false;\r\n\t\t\tthis.$refs.dropdownMenu.hidePopup();\r\n\t\t},\r\n\r\n\t\tcatchPermissonsError(err) {\r\n\t\t\tif (\r\n\t\t\t\terr == \"permissions\" ||\r\n\t\t\t\t(err.toString && err.toString().indexOf(\"Permission\") > -1)\r\n\t\t\t) {\r\n\t\t\t\tthis.microphoneDisabled = true;\r\n\r\n\t\t\t\tif (window.cordova) {\r\n\t\t\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micaccesscordova\"), {\r\n\t\t\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micaccessbrowser\"), {\r\n\t\t\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (err.toString && err.toString().indexOf(\"device not found\") > -1) {\r\n\t\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micdevicenotfound\"), {\r\n\t\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$dialog.confirm(this.$i18n.t(\"micaccesscommonproblem\"), {\r\n\t\t\t\tokText: this.$i18n.t(\"button.ok\"),\r\n\t\t\t});\r\n\r\n\t\t\tconsole.error(err);\r\n\t\t},\r\n\r\n\t\tgetFileIosCordova(path) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\twindow.resolveLocalFileSystemURL(\r\n\t\t\t\t\tpath,\r\n\t\t\t\t\t(entry) => {\r\n\t\t\t\t\t\tif (!entry) {\r\n\t\t\t\t\t\t\treturn reject(\"noentry\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tentry.file((file) => {\r\n\t\t\t\t\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\t\t\t\t\treader.onloadend = function () {\r\n\t\t\t\t\t\t\t\tvar blob = new Blob([new Uint8Array(this.result)], {\r\n\t\t\t\t\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tentry.remove();\r\n\r\n\t\t\t\t\t\t\t\tresolve(blob);\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\treader.onerror = (e) => {\r\n\t\t\t\t\t\t\t\tentry.remove();\r\n\r\n\t\t\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\treader.readAsArrayBuffer(file);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tinitRecordingCordova() {\r\n\t\t\tthis.prepareRecording = cancelable(\r\n\t\t\t\tthis.core.media\r\n\t\t\t\t\t.permissions({ audio: true })\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.microphoneDisabled = false;\r\n\r\n\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\r\n\t\t\t\t\t\tthis.catchPermissonsError(err);\r\n\r\n\t\t\t\t\t\treturn Promise.reject(err);\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\tthis.prepareRecording\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.microphoneDisabled = false;\r\n\r\n\t\t\t\t\tvar path = \"recording.mp3\";\r\n\r\n\t\t\t\t\tif (f.isios()) path = \"cdvfile://localhost/temporary/recording.m4a\";\r\n\r\n\t\t\t\t\tvar sec = 0;\r\n\r\n\t\t\t\t\tthis.audioContext = this.core.getAudioContext();\r\n\r\n\t\t\t\t\t//var startedTime = (new Date()).getTime() / 1000\r\n\r\n\t\t\t\t\tvar media = (this.cordovaMediaRecorder = new Media(\r\n\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\tthis.recordTime = 0;\r\n\r\n\t\t\t\t\t\t\tmedia.release();\r\n\r\n\t\t\t\t\t\t\tif (this.cancelledCordovaMediaRecorder) {\r\n\t\t\t\t\t\t\t\tthis.cancelledCordovaMediaRecorder = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar fu = null;\r\n\r\n\t\t\t\t\t\t\t/*if(f.isios()){ */\r\n\r\n\t\t\t\t\t\t\tfu = this.getFileIosCordova(\r\n\t\t\t\t\t\t\t\tf.isios()\r\n\t\t\t\t\t\t\t\t\t? path\r\n\t\t\t\t\t\t\t\t\t: window.cordova.file.externalDataDirectory + path\r\n\t\t\t\t\t\t\t).then((blob) => {\r\n\t\t\t\t\t\t\t\treturn Promise.resolve({\r\n\t\t\t\t\t\t\t\t\tdata: blob,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t/*}\r\n\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tfu = f.fetchLocal(path)\r\n\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\t\t\tfu.then((r) => {\r\n\t\t\t\t\t\t\t\t///temp\r\n\t\t\t\t\t\t\t\t/*if (f.isios())\r\n\t\t\t\t\t\t\tr.duration = (new Date()).getTime() / 1000 - startedTime\r\n\r\n\t\t\t\t\t\tconsole.log(\"R\", r)\r\n\r\n\t\t\t\t\t\t/*var e = {\r\n\t\t\t\t\t\t\tdata : r.data\r\n\t\t\t\t\t\t}*/\r\n\r\n\t\t\t\t\t\t\t\tif (media.duration && media.duration > 0) {\r\n\t\t\t\t\t\t\t\t\tr.duration = media.duration;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tthis.createVoiceMessage(r, true);\r\n\r\n\t\t\t\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\tthis.clear();\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.finally(() => {});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(e) => {\r\n\t\t\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\t\t\tthis.isRecording = false;\r\n\t\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t));\r\n\r\n\t\t\t\t\tvar rmsdata = [];\r\n\r\n\t\t\t\t\tlet currentPlaying = this.$store.state.currentPlayingVoiceMessage;\r\n\r\n\t\t\t\t\tif (currentPlaying) {\r\n\t\t\t\t\t\tcurrentPlaying.pause();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.interval = setInterval(() => {\r\n\t\t\t\t\t\t// get media amplitude\r\n\r\n\t\t\t\t\t\tif (f.isios()) {\r\n\t\t\t\t\t\t\trmsdata.push(1);\r\n\r\n\t\t\t\t\t\t\tif (rmsdata.length > 50) rmsdata = _.last(rmsdata, 50);\r\n\r\n\t\t\t\t\t\t\tthis.recordRmsData = _.clone(rmsdata);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.cordovaMediaRecorder.getCurrentAmplitude(\r\n\t\t\t\t\t\t\t\t// success callback\r\n\t\t\t\t\t\t\t\t(amp) => {\r\n\t\t\t\t\t\t\t\t\trmsdata.push(amp * 1000);\r\n\r\n\t\t\t\t\t\t\t\t\tif (rmsdata.length > 50) rmsdata = _.last(rmsdata, 50);\r\n\r\n\t\t\t\t\t\t\t\t\tthis.recordRmsData = _.clone(rmsdata);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction (e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"E\", e);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsec = sec + 50;\r\n\r\n\t\t\t\t\t\tif (sec % 1000 === 0) this.recordTime = sec;\r\n\t\t\t\t\t}, 50);\r\n\r\n\t\t\t\t\tthis.isRecording = true;\r\n\t\t\t\t\tthis.cancelOpacity = 0;\r\n\t\t\t\t\tthis.recordRmsData = [];\r\n\t\t\t\t\tthis.recordTime = 0;\r\n\t\t\t\t\tthis.record = null;\r\n\r\n\t\t\t\t\tthis.cordovaMediaRecorder.startRecord();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.prepareRecording = null;\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tinitRecording() {\r\n\t\t\tif (\r\n\t\t\t\tthis.prepareRecording ||\r\n\t\t\t\tthis.isRecording ||\r\n\t\t\t\tthis.cordovaMediaRecorder\r\n\t\t\t)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (window.cordova) {\r\n\t\t\t\treturn this.initRecordingCordova();\r\n\t\t\t}\r\n\r\n\t\t\tthis.prepareRecording = cancelable(\r\n\t\t\t\tthis.core\r\n\t\t\t\t\t.initMediaRecorder()\r\n\t\t\t\t\t.then((recorder) => {\r\n\t\t\t\t\t\tthis.microphoneDisabled = false;\r\n\r\n\t\t\t\t\t\tif (this.prepareRecording) {\r\n\t\t\t\t\t\t\treturn Promise.resolve(recorder);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trecorder.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\t\ttrack.stop();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tthis.catchPermissonsError(err);\r\n\t\t\t\t\t\treturn Promise.reject(err);\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\tthis.prepareRecording\r\n\t\t\t\t.then((recorder) => {\r\n\t\t\t\t\tthis.mediaRecorder = recorder;\r\n\r\n\t\t\t\t\tthis.audioContext = this.core.getAudioContext();\r\n\t\t\t\t\tthis.audioAnalyser = this.audioContext.createAnalyser();\r\n\r\n\t\t\t\t\t//var audioDataArray = new Uint8Array(this.audioAnalyser.frequencyBinCount)\r\n\r\n\t\t\t\t\tvar src = this.audioContext.createMediaStreamSource(\r\n\t\t\t\t\t\tthis.mediaRecorder.stream\r\n\t\t\t\t\t);\r\n\t\t\t\t\tsrc.connect(this.audioAnalyser);\r\n\r\n\t\t\t\t\tthis.startRecording();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.prepareRecording = null;\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tstartRecording() {\r\n\t\t\tlet currentPlaying = this.$store.state.currentPlayingVoiceMessage;\r\n\r\n\t\t\tif (currentPlaying) {\r\n\t\t\t\tcurrentPlaying.pause();\r\n\t\t\t}\r\n\r\n\t\t\tthis.$store.commit(\"SET_VOICERECORDING\", true);\r\n\r\n\t\t\tthis.isRecording = true;\r\n\t\t\tthis.cancelOpacity = 0;\r\n\t\t\tthis.recordRmsData = [];\r\n\t\t\tthis.recordTime = 0;\r\n\t\t\tthis.record = null;\r\n\t\t\tthis.mediaRecorder.start();\r\n\r\n\t\t\tvar sec = 0;\r\n\t\t\tvar rmsdata = [];\r\n\r\n\t\t\tthis.interval = setInterval(() => {\r\n\t\t\t\tvar dataArray = new Uint8Array(this.audioAnalyser.frequencyBinCount);\r\n\r\n\t\t\t\tthis.audioAnalyser.getByteFrequencyData(dataArray);\r\n\r\n\t\t\t\trmsdata.push(this.generateRms(dataArray));\r\n\r\n\t\t\t\tif (rmsdata.length > 50) rmsdata = _.last(rmsdata, 50);\r\n\r\n\t\t\t\tsec = sec + 50;\r\n\r\n\t\t\t\tthis.recordRmsData = _.clone(rmsdata);\r\n\r\n\t\t\t\tif (sec % 1000 === 0) {\r\n\t\t\t\t\tthis.recordTime = sec;\r\n\t\t\t\t}\r\n\t\t\t}, 50);\r\n\t\t},\r\n\r\n\t\tcheckaudioForSend: function (record, sendnow) {\r\n\t\t\tif (record.duration < 1) {\r\n\t\t\t\tthis.clear();\r\n\t\t\t} else {\r\n\t\t\t\tif (sendnow) {\r\n\t\t\t\t\tthis.sendVoiceMessage(record);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.record = record;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetduration(file) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tf.readFile(file)\r\n\t\t\t\t\t.then((arraybuffer) => {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tthis.audioContext.decodeAudioData(arraybuffer, (buffer) => {\r\n\t\t\t\t\t\t\t\tresolve(buffer.duration);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(reject);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tcreateVoiceMessage(event, sendnow) {\r\n\t\t\tvar c = () => {\r\n\t\t\t\t//this.record =\r\n\r\n\t\t\t\tthis.checkaudioForSend(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfile: event.data,\r\n\t\t\t\t\t\tid: f.makeid(),\r\n\t\t\t\t\t\tduration: event.duration,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsendnow\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\t\tif (event.duration) {\r\n\t\t\t\tc();\r\n\t\t\t} else {\r\n\t\t\t\tthis.getduration(event.data)\r\n\t\t\t\t\t.then((duration) => {\r\n\t\t\t\t\t\tevent.duration = duration;\r\n\r\n\t\t\t\t\t\tc();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\r\n\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/*f.readFile(event.data).then(arraybuffer => {\r\n\r\n\t\t\t\tconsole.log('arraybuffer', arraybuffer)\r\n\r\n\t\t\t\tthis.audioContext.decodeAudioData(arraybuffer, (buffer) => {\r\n\r\n\t\t\t\t\tconsole.log('this.record', this.record)\r\n\t\t\t\t\tconsole.log('this.buffer', buffer)\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tthis.record = {\r\n\t\t\t\t\t\tfile: event.data,\r\n\t\t\t\t\t\tid: f.makeid()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.record.duration = buffer.duration\r\n\r\n\t\t\t\t\tthis.checkaudioForSend(sendnow)\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tconsole.error('e', e)\r\n\t\t\t\tthis.clear()\r\n\t\t\t\t//\r\n\t\t\t})*/\r\n\t\t},\r\n\r\n\t\tgenerateRms(frequencies) {\r\n\t\t\treturn +Math.sqrt(\r\n\t\t\t\tfrequencies.reduce((a, b) => a + b ** 2) / frequencies.length\r\n\t\t\t).toPrecision(4);\r\n\t\t},\r\n\r\n\t\tstopRecording({ cancel, sendnow }) {\r\n\t\t\tconsole.log(\"STOP RECORDING\", this.isRecording);\r\n\r\n\t\t\tthis.$store.commit(\"SET_VOICERECORDING\", false);\r\n\r\n\t\t\tif (this.prepareRecording) {\r\n\t\t\t\tthis.prepareRecording.cancel();\r\n\t\t\t\tthis.prepareRecording = null;\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isRecording = false;\r\n\r\n\t\t\tif (this.interval) {\r\n\t\t\t\tclearInterval(this.interval);\r\n\t\t\t\tthis.interval = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.mediaRecorder) {\r\n\t\t\t\tif (cancel) {\r\n\t\t\t\t\t//this.mediaRecorder.ondataavailable = () => { }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.mediaRecorder.addEventListener(\"dataavailable\", (event) => {\r\n\t\t\t\t\t\tthis.createVoiceMessage(event, sendnow);\r\n\t\t\t\t\t}); //ondataavailable = (event) => this.createVoiceMessage(event, sendnow)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.mediaRecorder.stop();\r\n\r\n\t\t\t\tthis.mediaRecorder.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.mediaRecorder = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cordovaMediaRecorder) {\r\n\t\t\t\tif (cancel) {\r\n\t\t\t\t\tthis.cancelledCordovaMediaRecorder = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cancelledCordovaMediaRecorder = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.cordovaMediaRecorder.stopRecord();\r\n\t\t\t\tthis.cordovaMediaRecorder = null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tasync sendVoiceMessage(record) {\r\n\t\t\tif (!record) record = this.record;\r\n\r\n\t\t\tif (!record) {\r\n\t\t\t\tthis.clear();\r\n\t\t\t}\r\n\r\n\t\t\tthis.recordRmsData = [];\r\n\r\n\t\t\tconst base64 = await this.core.convertAudioToBase64(record.file);\r\n\r\n\t\t\tconst id = f.makeid();\r\n\r\n\t\t\tconst meta = {\r\n\t\t\t\ttype: \"audio\",\r\n\t\t\t\tid: id,\r\n\t\t\t\tbase64: base64,\r\n\t\t\t};\r\n\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tthis.$f\r\n\t\t\t\t.pretry(() => {\r\n\t\t\t\t\treturn this.chat;\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\treturn this.core.mtrx.sendAudio(this.chat, base64, null, meta, {\r\n\t\t\t\t\t\trelation: this.relationEvent,\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.$emit(\"clearRelationEvent\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tthis.$emit(\"sentError\", {\r\n\t\t\t\t\t\tid: id,\r\n\t\t\t\t\t\terror: e,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn Promise.resolve();\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\tclear() {\r\n\t\t\tthis.record = null;\r\n\t\t\tthis.recordRmsData = [];\r\n\t\t\tthis.recordTime = 0;\r\n\r\n\t\t\tif (this.interval) {\r\n\t\t\t\tclearInterval(this.interval);\r\n\t\t\t\tthis.interval = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.cordovaMediaRecorder) {\r\n\t\t\t\tthis.cordovaMediaRecorder = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.mediaRecorder) {\r\n\t\t\t\tthis.mediaRecorder.stop();\r\n\t\t\t\tthis.mediaRecorder.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\ttrack.stop();\r\n\t\t\t\t});\r\n\t\t\t\tthis.mediaRecorder = null;\r\n\t\t\t}\r\n\r\n\t\t\t/*if (this.audioContext){\r\n\t\t\t\tthis.audioContext.close()\r\n\t\t\t}*/\r\n\t\t},\r\n\r\n\t\t/*async convertAudioToBase64(blob) {\r\n\t\t\tconst reader = new FileReader()\r\n\t\t\treader.readAsDataURL(blob)\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\treader.onloadend = () => {\r\n\t\t\t\t\tresolve(reader.result)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},*/\r\n\r\n\t\tsetOpacity(opacity) {\r\n\t\t\tthis.cancelOpacity = opacity;\r\n\t\t},\r\n\t},\r\n};\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!./index.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=257d64d1&scoped=true&\"\nimport script from \"./index.js?vue&type=script&lang=js&\"\nexport * from \"./index.js?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.sass?vue&type=style&index=0&id=257d64d1&scoped=true&lang=sass&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"257d64d1\",\n  null\n  ,true\n)\n\nexport default component.exports"],"sourceRoot":""}