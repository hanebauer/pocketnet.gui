(window["matrixElement_jsonp"] = window["matrixElement_jsonp"] || []).push([[6],{

/***/ "0a92":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("5ce7");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("06c84aee", content, shadowRoot)
};

/***/ }),

/***/ "23c6":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".input_component[data-v-e98d4fac]{width:100%;display:flex;justify-content:center;align-items:center;padding:0 1em;padding-right:0}.input_component[data-v-e98d4fac] .emoji-mart .emoji-mart-emoji{width:25%;height:40px;cursor:pointer}.input_component[data-v-e98d4fac] .emoji-mart .emoji-mart-emoji span{cursor:pointer}.input_component[data-v-e98d4fac] .emoji-mart .emoji-mart-emoji:hover{background:none;box-shadow:none}.input_component[data-v-e98d4fac] .emoji-mart .emoji-mart-emoji:hover:before{display:none}.input_component .input-wrapper[data-v-e98d4fac]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;position:relative;width:100%}.input_component .right[data-v-e98d4fac]{margin:0 .5em}.input_component .iconbutton .leftdummy[data-v-e98d4fac]{width:20px}.input_component .iconbutton .rightdummy[data-v-e98d4fac]{width:35px}.input_component .iconbutton .idummy[data-v-e98d4fac]{width:100%;height:35px;line-height:35px}.input_component .iconbutton .idummy i[data-v-e98d4fac]{line-height:35px!important}.input_component .previews[data-v-e98d4fac]{width:100%;max-width:198px;height:30px;display:flex;align-items:flex-start;padding:2px 0;overflow:hidden}.input_component .previews[data-v-e98d4fac]:first-child{margin-left:0}.input_component .textarea[data-v-e98d4fac]{width:100%;display:flex;justify-content:flex-start;align-items:center}.chat-input[data-v-e98d4fac]{width:100%;max-height:100px;overflow-y:auto;resize:none}.chat-input[data-v-e98d4fac]::-webkit-scrollbar{width:0!important}.fade-enter-active[data-v-e98d4fac],.fade-leave-active[data-v-e98d4fac]{transition:all .2s ease-in}.fade-enter[data-v-e98d4fac],.fade-leave-to[data-v-e98d4fac]{opacity:0}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "44f7":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputField_vue_vue_type_style_index_0_id_e98d4fac_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("a105");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputField_vue_vue_type_style_index_0_id_e98d4fac_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputField_vue_vue_type_style_index_0_id_e98d4fac_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputField_vue_vue_type_style_index_0_id_e98d4fac_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputField_vue_vue_type_style_index_0_id_e98d4fac_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "5ce7":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".wrapper[data-v-4b882d9f]{position:relative}.fas[data-v-4b882d9f]{position:absolute;right:-8px;top:-8px}.preview-picture[data-v-4b882d9f]{width:50px;height:50px;border-radius:10px}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "a105":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("23c6");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("191f9b68", content, shadowRoot)
};

/***/ }),

/***/ "cd70":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("d9c8");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("689bb725", content, shadowRoot)
};

/***/ }),

/***/ "cf20":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("ee23");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("707928b0", content, shadowRoot)
};

/***/ }),

/***/ "cff80":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_picturePreview_vue_vue_type_style_index_0_id_4b882d9f_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("0a92");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_picturePreview_vue_vue_type_style_index_0_id_4b882d9f_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_picturePreview_vue_vue_type_style_index_0_id_4b882d9f_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_picturePreview_vue_vue_type_style_index_0_id_4b882d9f_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_picturePreview_vue_vue_type_style_index_0_id_4b882d9f_lang_sass_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "d0a4":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_4_index_scss_vue_type_style_index_0_id_5cbd823e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("cf20");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_4_index_scss_vue_type_style_index_0_id_5cbd823e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_4_index_scss_vue_type_style_index_0_id_5cbd823e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_4_index_scss_vue_type_style_index_0_id_5cbd823e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_9_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_9_oneOf_1_4_index_scss_vue_type_style_index_0_id_5cbd823e_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "d9c8":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "#chatInput[data-v-22eb6a42]{padding-bottom:.5em}[data-v-22eb6a42] #modal.minimized .modal-wrapper{left:0}[data-v-22eb6a42] .previewWrapper{padding-left:.5em!important;padding-right:.5em!important}.inputWrapper[data-v-22eb6a42]{display:flex}.inputWrapper .left[data-v-22eb6a42]{width:35px;display:flex;justify-content:flex-end;align-items:center;text-align:center}.inputWrapper .left .iconbutton[data-v-22eb6a42]{display:flex;align-items:center;justify-content:center;height:35px;width:35px;-webkit-tap-highlight-color:transparent}.inputWrapper .extended[data-v-22eb6a42]{width:70px;margin-left:7px}.inputWrapper .leftdummy[data-v-22eb6a42]{width:.5em}.inputWrapper>div[data-v-22eb6a42]{transition:.3s}.inputWrapper .center[data-v-22eb6a42]{max-height:110px;max-width:100%;display:flex;justify-content:center;align-items:center;flex-grow:1;border:1px solid transparent;border-radius:30px;background:rgb(var(--background-secondary-theme))}.inputWrapper input[data-v-22eb6a42]{border:1px solid rgb(var(--neutral-grad-0));background:rgba(var(--background-main),.5);border-radius:30px;width:100%;padding:.5em 1em}.notready[data-v-22eb6a42],.waitjoined[data-v-22eb6a42]{padding:.5em 0;text-align:center}.waitjoined span[data-v-22eb6a42]{font-size:.8em}.greetings[data-v-22eb6a42]{padding:.5em 0}.greetings[data-v-22eb6a42],[data-v-22eb6a42] .iconWrapper{text-align:center}.menu-item[data-v-22eb6a42]{padding:.5em;background:rgb(var(--background-total-theme));line-height:44px;border-radius:5px;display:flex}.menu-item .title[data-v-22eb6a42]{flex-grow:2;padding-right:44px;text-align:center}.menu-item .iconWrapper[data-v-22eb6a42]{width:44px}.tipusers[data-v-22eb6a42]{position:absolute;max-height:300px;border-radius:.5em;border:1px solid rgba(var(--neutral-grad-0),.9);overflow-y:overlay;background-color:rgba(var(--background-total-theme),.95);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);padding:.25em 0;bottom:100%;margin-bottom:.5em;left:.25em;right:.25em}.tipusers .previewWrapperExt[data-v-22eb6a42]{border-radius:.75em;margin-left:.25em;margin-right:.25em;padding-top:.25em;padding-bottom:.25em}.tipusers .previewWrapperExt[data-v-22eb6a42] .previewWrapper{padding-left:.25em!important;padding-right:.25em!important}.tipusers .previewWrapperExt.selected[data-v-22eb6a42]{background:rgb(var(--background-main))}.disabled[data-v-22eb6a42]{display:flex;justify-content:center;align-items:center;width:35px;height:35px;color:rgb(var(--neutral-grad-3))}.disabled i[data-v-22eb6a42]{padding-top:1px}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "e423":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_22eb6a42_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("cd70");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_22eb6a42_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_22eb6a42_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_22eb6a42_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_22eb6a42_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "ee23":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".recordProgress[data-v-5cbd823e]{display:flex;position:relative;height:20px;justify-content:flex-start;padding:0 1em;align-items:center;max-width:90%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.recordProgress .indicator[data-v-5cbd823e]{margin-right:1em;min-width:8px;height:8px;background:red;border-radius:50%}.recordProgress .indicator.recording[data-v-5cbd823e]{-webkit-animation:pulse-data-v-5cbd823e 1.2s ease infinite;animation:pulse-data-v-5cbd823e 1.2s ease infinite}.recordProgress .del[data-v-5cbd823e]{cursor:pointer;display:flex;justify-content:center;align-items:center;width:20px;height:20px;margin-right:1em}.recordProgress .del i[data-v-5cbd823e]{color:red;font-size:13px}.recordProgress .timer[data-v-5cbd823e]{margin-right:1em}.recordProgress .graph[data-v-5cbd823e]{width:calc(100vw - 150px);min-width:100px}.cancel[data-v-5cbd823e],.recordProgress .graph[data-v-5cbd823e]{display:flex;justify-content:center}.cancel[data-v-5cbd823e]{position:absolute;left:80px;right:0;top:0;bottom:0;background:#fff;opacity:0}@-webkit-keyframes pulse-data-v-5cbd823e{0%{opacity:1}50%{opacity:.1}to{opacity:1}}@keyframes pulse-data-v-5cbd823e{0%{opacity:1}50%{opacity:.1}to{opacity:1}}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "fe01":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"476efc6e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chat/input/index.vue?vue&type=template&id=22eb6a42&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{"id":"chatInput"}},[(_vm.ready)?_c('div',{staticClass:"work"},[(_vm.chat)?_c('div',{staticClass:"inputWrapper"},[(_vm.tipusers.length)?_c('div',{staticClass:"tipusers"},_vm._l((_vm.tipusers),function(user,i){return _c('div',{key:user.id,staticClass:"previewWrapperExt",class:{selected : _vm.tipuserindex == i},on:{"click":function($event){return _vm.insertuser(user)}}},[_c('preview',{attrs:{"contact":user,"mode":""}})],1)}),0):_vm._e(),_c('div',{staticClass:"center"},[(_vm.voiceEnable && (_vm.isRecording || _vm.recordViewData.length))?_c('record-progress',{attrs:{"recordTime":_vm.recordTime,"isRecording":_vm.isRecording,"rmsData":_vm.recordViewData,"opacity":_vm.cancelOpacity},on:{"onClear":_vm.clear}}):_c('InputField',{ref:"newinput",attrs:{"storagekey":'chatinput' + _vm.chat.roomId,"tipusers":_vm.tipusers},on:{"transaction":_vm.sendtransaction,"chatMessage":_vm.sendinput,"setMetaUrl":_vm.emitUrl,"emptyInput":_vm.emitInputData,"FilledInput":_vm.HideUploadPic,"base64":_vm.pasteImage,"focused":_vm.focused,"tipsearchrequest":_vm.tipBySearch,"browsetip":_vm.browsetip,"selectcurrenttip":_vm.selectcurrenttip}}),(_vm.upload && _vm.chat)?_c('div',{staticClass:"left",class:{extended: _vm.voiceEnable}},[(!_vm.isRecording && !_vm.recordViewData.length)?_c('div',{staticClass:"iconbutton"},[_c('dropdownMenu',{ref:"dropdownMenu",attrs:{"menuItems":_vm.menuItems,"rowObject":{},"icon":"fas fa-plus"},scopedSlots:_vm._u([{key:"default",fn:function(slotProps){return [(!slotProps.item.upload)?_c('div',{staticClass:"menu-item",on:{"click":function($event){return _vm.menuItemClick(slotProps.item)}}},[_c('div',{staticClass:"iconWrapper"},[(slotProps.item.icon)?_c('i',{class:slotProps.item.icon}):_vm._e()]),_c('div',{staticClass:"title"},[_vm._v(" "+_vm._s(slotProps.item.title)+" ")])]):_c('upload',{attrs:{"multiple":slotProps.item.upload.multiple,"extensions":slotProps.item.upload.extensions,"images":slotProps.item.upload.images},on:{"start":function (files) { return _vm.uploadStart(slotProps.item, files); },"uploaded":function (data) { return _vm.uploadUploaded(slotProps.item, data); },"uploadedAll":function (result) { return _vm.uploadUploadedAll(slotProps.item, result); },"error":function (error) { return _vm.uploadError(slotProps.item, error); }},scopedSlots:_vm._u([{key:"content",fn:function(){return [_c('div',{staticClass:"menu-item"},[_c('div',{staticClass:"iconWrapper"},[(slotProps.item.icon)?_c('i',{class:slotProps.item.icon}):_vm._e()]),_c('div',{staticClass:"title"},[_vm._v(" "+_vm._s(slotProps.item.title)+" ")])])]},proxy:true},{key:"dropzone",fn:function(){return undefined},proxy:true}],null,true)})]}}],null,false,2831926823)})],1):_vm._e(),(_vm.voiceEnable)?[((_vm.isRecording || !_vm.recordRmsData.length) && !_vm.microphoneDisabled)?_c('div',{staticClass:"iconbutton"},[_c('recordVoice',{attrs:{"isRecording":_vm.isRecording},on:{"onRecordingStart":_vm.initRecording,"onRecordingStop":_vm.stopRecording,"onClear":_vm.clear,"canceling":_vm.setOpacity}})],1):_vm._e(),(_vm.microphoneDisabled)?_c('div',{staticClass:"disabled"},[_c('i',{staticClass:"icon fas fa-microphone-slash",on:{"click":_vm.initRecording}})]):_vm._e()]:_vm._e(),(!_vm.isRecording && _vm.recordViewData.length)?_c('div',{staticClass:"iconbutton",on:{"click":_vm.sendVoiceMessage}},[_vm._m(0)]):_vm._e()],2):_vm._e()],1)]):_vm._e()]):_c('div',{staticClass:"notready"},[_c('linepreloader')],1)])}
var staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('i',{staticClass:"icon fas fa-paper-plane"})])}]


// CONCATENATED MODULE: ./src/components/chat/input/index.vue?vue&type=template&id=22eb6a42&scoped=true&

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__("1da1");

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__("5530");

// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__("a34a");
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.error.cause.js
var es_error_cause = __webpack_require__("d9e2");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.at.js
var es_typed_array_at = __webpack_require__("907a");

// EXTERNAL MODULE: ./src/application/functions.js
var functions = __webpack_require__("3139");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"476efc6e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chat/input/InputField/InputField.vue?vue&type=template&id=e98d4fac&scoped=true&
var InputFieldvue_type_template_id_e98d4fac_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"input_component"},[_c('div',{staticClass:"input-wrapper"},[_c('div',{staticClass:"textarea"},[_c('textarea',{ref:"textarea",staticClass:"chat-input",attrs:{"id":"textInput","type":"text","row":"1","spellcheck":"true","autocorrect":"on","placeholder":_vm.$t('caption.sendmessage')},domProps:{"value":_vm.text},on:{"focus":_vm.focused,"blur":_vm.blured,"keydown":_vm.keydown,"input":_vm.textchange,"keyup":_vm.keyup,"click":_vm.keyup,"paste":_vm.paste_image}}),(!_vm.mobile)?_c('transition',{attrs:{"name":"fade","mode":"out-in"}},[_c('picker',{directives:[{name:"show",rawName:"v-show",value:(_vm.display_emoji),expression:"display_emoji"},{name:"click-outside",rawName:"v-click-outside",value:(_vm.close_emoji_picker),expression:"close_emoji_picker"}],style:({ width: '325px', position: 'absolute', bottom: '32px', right: _vm.recording ? '-100px' :'-60px', fontSize: '0.8em', fontFamily: 'Segoe UI' }),attrs:{"data":_vm.emojiIndex,"exclude":_vm.exclude,"showPreview":false,"showSearch":false,"native":true,"set":"emojione"},on:{"select":_vm.insert_emoji}})],1):_vm._e()],1)]),(!_vm.mobile)?_c('div',{staticClass:"iconbutton emojipicker",on:{"click":function($event){return _vm.toggle_emoji_picker()}}},[_c('div',{staticClass:"leftdummy"},[_c('div',{staticClass:"idummy"},[(_vm.display_emoji)?_c('i',{staticClass:"fas fa-times"}):_c('i',{staticClass:"far fa-smile"})])])]):_vm._e(),(_vm.send)?_c('div',{staticClass:"iconbutton",on:{"click":function($event){return _vm.send_text($event)}}},[_vm._m(0)]):_vm._e()])}
var InputFieldvue_type_template_id_e98d4fac_scoped_true_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"rightdummy"},[_c('div',{staticClass:"idummy"},[_c('i',{staticClass:"far fa-paper-plane"})])])}]


// CONCATENATED MODULE: ./src/components/chat/input/InputField/InputField.vue?vue&type=template&id=e98d4fac&scoped=true&

// EXTERNAL MODULE: ./src/application/utils/images.js
var utils_images = __webpack_require__("5059");

// EXTERNAL MODULE: ./node_modules/emoji-mart-vue-fast/data/all.json
var data_all = __webpack_require__("364d");

// EXTERNAL MODULE: ./node_modules/emoji-mart-vue-fast/css/emoji-mart.css
var emoji_mart = __webpack_require__("01ce");

// EXTERNAL MODULE: ./node_modules/emoji-mart-vue-fast/dist/emoji-mart.js
var dist_emoji_mart = __webpack_require__("41fb");

// EXTERNAL MODULE: ./node_modules/v-click-outside/dist/v-click-outside.umd.js
var v_click_outside_umd = __webpack_require__("c28b");
var v_click_outside_umd_default = /*#__PURE__*/__webpack_require__.n(v_click_outside_umd);

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"476efc6e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chat/input/picturePreview/picturePreview.vue?vue&type=template&id=4b882d9f&scoped=true&
var picturePreviewvue_type_template_id_4b882d9f_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.is_opened)?_c('div',{staticClass:"wrapper"},[_c('img',{staticClass:"preview-picture",attrs:{"src":_vm.base64,"alt":"picture preview"}}),_c('i',{staticClass:"fas fa-times fa-sm",on:{"click":_vm.hide}})]):_vm._e()}
var picturePreviewvue_type_template_id_4b882d9f_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/components/chat/input/picturePreview/picturePreview.vue?vue&type=template&id=4b882d9f&scoped=true&

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chat/input/picturePreview/picturePreview.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
/* harmony default export */ var picturePreviewvue_type_script_lang_js_ = ({
  name: 'picturePreview',
  props: ['base64'],
  data: function data() {
    return {
      is_opened: true
    };
  },
  methods: {
    hide: function hide() {
      this.is_opened = false;
    }
  }
});
// CONCATENATED MODULE: ./src/components/chat/input/picturePreview/picturePreview.vue?vue&type=script&lang=js&
 /* harmony default export */ var picturePreview_picturePreviewvue_type_script_lang_js_ = (picturePreviewvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("2877");

// CONCATENATED MODULE: ./src/components/chat/input/picturePreview/picturePreview.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__("cff80")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  picturePreview_picturePreviewvue_type_script_lang_js_,
  picturePreviewvue_type_template_id_4b882d9f_scoped_true_render,
  picturePreviewvue_type_template_id_4b882d9f_scoped_true_staticRenderFns,
  false,
  injectStyles,
  "4b882d9f",
  null
  ,true
)

/* harmony default export */ var picturePreview = (component.exports);
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chat/input/InputField/InputField.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//







var InputFieldvue_type_script_lang_js_images = new utils_images["a" /* default */]();
/* harmony default export */ var InputFieldvue_type_script_lang_js_ = ({
  name: 'InputField',
  components: {
    Picker: dist_emoji_mart["Picker"],
    picturePreview: picturePreview
  },
  directives: {
    clickOutside: v_click_outside_umd_default.a.directive
  },
  watch: {
    text: {
      immediately: true,
      handler: function handler(current, prev) {
        if (current) {
          this.send = true;
          this.$emit('FilledInput');
        } else {
          this.send = false;
          this.$emit('emptyInput');
        }

        this.textarea_resize();
      }
    }
  },
  computed: {
    mobile: function mobile() {
      return !this.$store.state.pocketnet && this.$store.state.mobile;
    },
    recording: function recording() {
      return this.$store.state.voiceMessagesEnabled === 'true';
    },
    emojiIndex: function emojiIndex() {
      if (!window.emojiIndex) {
        window.emojiIndex = new dist_emoji_mart["EmojiIndex"](data_all);
      }

      return window.emojiIndex;
    }
  },
  methods: {
    setText: function setText(text) {
      var _this = this;

      this.text = text;
      this.savetextinstorage();
      setTimeout(function () {
        _this.textarea_resize();

        _this.focus();
      });
    },
    focused: function focused() {
      this.$emit('focused');
    },
    textchange: function textchange(e) {
      this.text = e.target.value || '';
    },
    savetextinstorage: function savetextinstorage() {
      if (this.storagekey) {
        localStorage[this.storagekey] = this.text || '';
      }
    },
    send_empty_array: function send_empty_array() {
      this.$emit('userSearched', []);
    },
    focus: function focus() {
      this.$refs['textarea'].focus();
    },
    blur: function blur() {
      this.$refs['textarea'].blur();
    },
    blurifempty: function blurifempty() {
      if (!this.text) this.blur();
    },
    close_emoji_picker: function close_emoji_picker(event) {
      if (event.target.localName !== 'i') {
        if (event.target.localName !== 'matrix-element') {
          this.display_emoji = false;
        }
      }
    },
    textarea_resize: function textarea_resize() {
      if (!this.text) {
        this.textarea_resize_reset();
      } else {
        this.$refs.textarea.style.height = 1 + 'px';
        this.$refs.textarea.style.height = this.$refs.textarea.scrollHeight + 'px';
        this.display_emoji = false;
      }
    },
    textarea_resize_reset: function textarea_resize_reset() {
      this.$refs.textarea.style.height = '26px';
    },
    toggle_emoji_picker: function toggle_emoji_picker() {
      this.display_emoji = !this.display_emoji;
    },
    send_text: function send_text(event) {
      if (this.text && this.text !== '\n') {
        this.display_emoji = false;
        this.$emit('chatMessage', this.text);
        this.$emit('emptyInput');
        this.send = false;
        this.text = '';
      }

      this.savetextinstorage();
    },
    insert_emoji: function insert_emoji(emoji) {
      this.text += emoji.native;
      this.savetextinstorage();
    },
    paste_image: function paste_image(event) {
      this.get_base64(event);
    },
    get_base64: function get_base64(event) {
      var _this2 = this;

      this.pasted_data = event.clipboardData.items;

      if (this.pasted_data.length) {
        var _loop = function _loop(index) {
          var item = _this2.pasted_data[index];

          var correct_image_type = _this2.upload.extensions.includes(item.type);

          if (correct_image_type) {
            blob = item.getAsFile();
            reader = new FileReader();

            reader.onload = function (event) {
              _this2.$dialog.confirm('Do you really want to send attachment?', {
                okText: 'Yes',
                cancelText: 'No, cancel'
              }).then(function (dialog) {
                var base64 = event.target.result;

                _this2.resize_image(base64, item.type);
              });
            };

            reader.readAsDataURL(blob);
          }
        };

        for (var index in this.pasted_data) {
          var blob;
          var reader;

          _loop(index);
        }
      }
    },
    resize_image: function resize_image(data, type) {
      var _this3 = this;

      return InputFieldvue_type_script_lang_js_images.autorotation(null, data).then(function (base64) {
        var _type = _this3.upload.images.resize.type || 'def';

        return InputFieldvue_type_script_lang_js_images.resize[_type](base64, 1024, 1024, type, 0.9).then(function (base64) {
          _this3.$emit('base64', base64);
        }).catch(function (error) {
          return console.error('Failed to resize image', error);
        });
      }).catch(function (error) {
        return console.error('Failed to resize image', error);
      });
    },
    getsearchposition: function getsearchposition(position) {
      if (!position.start || !this.text.length) return null;
      var sposition = {
        start: position.start,
        middle: 0,
        end: position.end
      };
      var i = position.start;
      var dg = false;
      var br = false;
      var reg = /[a-zA-Z0-9]{1}/;
      sposition.middle = i;

      do {
        var char = this.text[i];

        if (char == '@') {
          if (position.start == i || i > 0 && reg.test(this.text[i - 1])) {
            br = true;
          } else {
            dg = true;
          }
        } else {
          if (reg.test(char)) {
            sposition.start = i;
          } else br = true;
        }

        i--;
      } while (i >= 0 && i <= position.start && !dg && !br);

      if (!dg) {
        sposition = null;
      } else {
        br = false;
        i = position.end;

        do {
          if (!this.text[i] || reg.test(this.text[i])) {
            sposition.end = i;
          } else {
            br = true;
          }

          i++;
        } while (i <= this.text.length && !br);
      }

      return sposition;
    },
    getsearch: function getsearch(position) {
      var sposition = this.getsearchposition(position);
      if (!sposition) return null;
      return this.text.substring(sposition.start, sposition.middle);
    },
    keydown: function keydown(event) {
      if (event.keyCode === 40 || event.keyCode === 38) {
        if (this.tipusers && this.tipusers.length) {
          this.$emit('browsetip', event.keyCode === 40 ? true : false);
          event.preventDefault();
          return false;
        }
      }

      if (event.keyCode === 39 || event.keyCode === 13) {
        if (this.tipusers && this.tipusers.length) {
          this.$emit('selectcurrenttip');
          event.preventDefault();
          return false;
        }
      }

      if (event.keyCode === 13) {
        if (this.mobile) {
          this.text = this.text + '\n';
        } else {
          this.send_text(event);
        }

        event.preventDefault();
        return false;
      }
    },
    keyup: function keyup(event) {
      if (this.block) {
        event.preventDefault();
        return false;
      }

      var position = functions["a" /* default */].getCaretPosition(this.$refs['textarea']);
      var value = this.getsearch(position);
      this.$emit('tipsearchrequest', value);
      this.savetextinstorage();
    },
    blured: function blured() {
      var _this4 = this;

      setTimeout(function () {
        _this4.$emit('tipsearchrequest', null);
      }, 300);
    },
    inserttip: function inserttip(text) {
      var _this5 = this;

      this.$emit('tipsearchrequest', null);
      this.block = true;
      this.$refs['textarea'];
      var position = this.getsearchposition(functions["a" /* default */].getCaretPosition(this.$refs['textarea']));
      this.text = this.text.substring(0, position.start) + text + this.text.substring(position.end + 1);

      if (!this.text[position.end + 1]) {
        this.text = this.text + ' ';
      }

      if (!this.text[position.end + 1] == ' ') position.end++;
      functions["a" /* default */].setCaretPosition(this.$refs['textarea'], position.end + 1, position.end + 1);
      setTimeout(function () {
        _this5.block = false;
      }, 350);
    }
  },
  props: {
    storagekey: String,
    tipusers: Array
  },
  data: function data() {
    return {
      send: false,
      toMatch: [/Android/i, /webOS/i, /iPhone/i, /iPad/i, /iPod/i, /BlackBerry/i, /Windows Phone/i],
      isPhone: true,
      heightUp: 40,
      areaValue: '',
      ready: false,
      text: '',
      exclude: ['flags'],
      display_emoji: false,
      content_height: 26,
      pasted_data: [],
      block: false,
      upload: {
        multiple: true,
        extensions: ['image/jpg', 'image/jpeg', 'image/png'],
        images: {
          resize: {
            type: 'fit'
          }
        }
      },
      hidden_previews: null
    };
  },
  creared: function creared() {},
  mounted: function mounted() {
    if (!this.mobile) {
      this.focus();
    }

    this.isPhone = this.toMatch.some(function (toMatchItem) {
      return navigator.userAgent.match(toMatchItem);
    });
    this.$refs.textarea.style.height = '26px';

    if (this.storagekey && localStorage[this.storagekey]) {
      this.text = localStorage[this.storagekey];
    }
  }
});
// CONCATENATED MODULE: ./src/components/chat/input/InputField/InputField.vue?vue&type=script&lang=js&
 /* harmony default export */ var InputField_InputFieldvue_type_script_lang_js_ = (InputFieldvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/components/chat/input/InputField/InputField.vue



function InputField_injectStyles (context) {
  
  var style0 = __webpack_require__("44f7")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var InputField_component = Object(componentNormalizer["a" /* default */])(
  InputField_InputFieldvue_type_script_lang_js_,
  InputFieldvue_type_template_id_e98d4fac_scoped_true_render,
  InputFieldvue_type_template_id_e98d4fac_scoped_true_staticRenderFns,
  false,
  InputField_injectStyles,
  "e98d4fac",
  null
  ,true
)

/* harmony default export */ var InputField = (InputField_component.exports);
// EXTERNAL MODULE: ./node_modules/underscore/modules/index-all.js + 159 modules
var index_all = __webpack_require__("c46f");

// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js
var vuex_esm = __webpack_require__("2f62");

// EXTERNAL MODULE: ./src/components/contacts/list/index.vue + 9 modules
var list = __webpack_require__("f978");

// EXTERNAL MODULE: ./src/components/contacts/preview/index.vue + 4 modules
var preview = __webpack_require__("92a6");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"476efc6e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/assets/recordProgress/index.vue?vue&type=template&id=5cbd823e&scoped=true&
var recordProgressvue_type_template_id_5cbd823e_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"recordProgress"},[(_vm.isRecording)?_c('div',{staticClass:"indicator",class:{'recording': _vm.isRecording}}):_c('div',{staticClass:"del",on:{"click":_vm.clear}},[_c('i',{staticClass:"fas fa-trash"})]),_c('div',{staticClass:"timer"},[_vm._v(_vm._s(_vm.timer))]),_c('div',{ref:"graph",staticClass:"graph"},[_c('canvas',{ref:"canvas",attrs:{"id":"canvas","width":_vm.width,"height":"60"}})]),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.isRecording && _vm.opacity),expression:"isRecording && opacity"}],ref:"cancel",staticClass:"cancel"},[_c('i'),_vm._v(" "),_c('span',[_vm._v("Slide left to cancel")])])])}
var recordProgressvue_type_template_id_5cbd823e_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/components/assets/recordProgress/index.vue?vue&type=template&id=5cbd823e&scoped=true&

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./src/components/assets/recordProgress?vue&type=script&lang=js&
/* harmony default export */ var recordProgress_vue_type_script_lang_js_ = ({
  name: "recordProgress",
  props: {
    recordTime: {
      type: Number,
      required: true
    },
    rmsData: {
      type: Array,
      required: true
    },
    isRecording: {
      type: Boolean
    },
    opacity: {}
  },
  data: function data() {
    return {
      width: 0
    };
  },
  computed: {
    timer: function timer() {
      var minute = Math.floor(this.recordTime / 60000);
      var sec = Math.floor(this.recordTime / 1000) % 60;
      return "".concat(minute ? minute + ':' : '0:').concat(sec < 10 ? '0' + sec : sec);
    }
  },
  mounted: function mounted() {
    this.$refs.cancel.style.opacity = 0;
    var width = this.$refs.graph.offsetWidth;
    this.width = width - width % 100;
    window.addEventListener("resize", this.resize);
  },
  beforeDestroy: function beforeDestroy() {
    window.removeEventListener('resize', this.resize);
  },
  updated: function updated() {
    var _this = this;

    this.draw();
    this.$nextTick(function () {
      _this.$refs.cancel.style.opacity = _this.opacity;
    });
  },
  methods: {
    resize: function resize() {
      var timer = null;

      function re() {
        var _this2 = this;

        if (!timer) {
          timer = setTimeout(function () {
            timer = null;
            var width = _this2.$refs.graph.offsetWidth;
            _this2.width = width - width % 100;
          }, 50);
        }
      }

      re.call(this);
    },
    draw: function draw() {
      var ctx = this.$refs.canvas.getContext("2d");
      var x = 0;
      var width = this.width / 200;
      ctx.clearRect(0, 0, this.width, 60);

      for (var i = 0; i < this.rmsData.length; i++) {
        ctx.fillStyle = '#00a4ff';
        ctx.fillRect(i * 2 * width, 30 - this.rmsData[i] / 8, width, this.rmsData[i] / 4 + 1);
      }
    },
    clear: function clear() {
      this.$emit('onClear');
    }
  }
});
// CONCATENATED MODULE: ./src/components/assets/recordProgress?vue&type=script&lang=js&
 /* harmony default export */ var assets_recordProgress_vue_type_script_lang_js_ = (recordProgress_vue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/components/assets/recordProgress/index.vue



function recordProgress_injectStyles (context) {
  
  var style0 = __webpack_require__("d0a4")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var recordProgress_component = Object(componentNormalizer["a" /* default */])(
  assets_recordProgress_vue_type_script_lang_js_,
  recordProgressvue_type_template_id_5cbd823e_scoped_true_render,
  recordProgressvue_type_template_id_5cbd823e_scoped_true_staticRenderFns,
  false,
  recordProgress_injectStyles,
  "5cbd823e",
  null
  ,true
)

/* harmony default export */ var recordProgress = (recordProgress_component.exports);
// EXTERNAL MODULE: ./node_modules/extendable-media-recorder/build/es2019/module.js + 966 modules
var es2019_module = __webpack_require__("0319");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./src/components/chat/input?vue&type=script&lang=js&













/* harmony default export */ var input_vue_type_script_lang_js_ = ({
  name: 'chatInput',
  props: {
    chat: Object,
    u: String,
    relationEvent: Object
  },
  components: {
    InputField: InputField,
    contacts: list["default"],
    preview: preview["a" /* default */],
    recordProgress: recordProgress
  },
  data: function data() {
    return {
      upload: true,
      test: [],
      loading: false,
      text: '',
      file: {},
      fileInfo: {},
      ready: false,
      creating: false,
      userId: '',
      showuserselect: null,
      anyUrlMeta: String,
      joinedMembers: [],
      tipvalue: null,
      tipuserindex: 0,
      record: null,
      recordRmsData: [],
      isRecording: false,
      mediaRecorder: null,
      audioContext: null,
      audioAnalyser: null,
      audioDataArray: null,
      recordTime: 0,
      interval: null,
      cancelOpacity: 0,
      microphoneDisabled: false
    };
  },
  inject: ['blockTextSelection', 'unblockTextSelection'],
  watch: {
    usersForKeysHash: {
      //immediate: true,
      handler: function handler() {}
    },
    tipusers: function tipusers() {
      if (!this.tipusers.length) {
        this.tipuserindex = 0;
      } else {
        if (this.tipuserindex > this.tipusers.length - 1) {
          this.tipuserindex = this.tipusers.length - 1;
        }
      }
    }
  },
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({
    voiceEnable: function voiceEnable() {
      return this.$store.state.voiceMessagesEnabled;
    },
    connect: function connect() {
      return this.$store.state.contact;
    },
    menuItems: function menuItems() {
      var menuItems = [];

      if (!this.relationEvent) {
        menuItems.push({
          click: "cameraHandler",
          title: this.$i18n.t("button.takePhotoOrVideo"),
          icon: "fas fa-camera",
          upload: {
            multiple: true,
            extensions: ['jpg', 'jpeg', 'png', 'webp'],
            maxsize: 100,
            images: {
              resize: {
                type: 'fit'
              }
            }
          }
        });
        menuItems.push({
          click: "fileHandler",
          title: this.$i18n.t("button.sendFile"),
          icon: "fas fa-sticky-note",
          upload: {
            multiple: true,
            extensions: [],
            maxsize: 25,
            images: {
              resize: {
                type: 'fit'
              }
            }
          }
        });
      }

      if (this.transaction) {
        menuItems.unshift({
          click: "sendtransactionWrapper",
          title: this.$i18n.t("button.sendCoins"),
          icon: "fas fa-wallet"
        });
      }

      return menuItems;
    }
  }, Object(vuex_esm["c" /* mapState */])(['chats'])), {}, {
    userlist: function userlist() {
      if (!this.chat) return [];
      return this.core.mtrx.chatUsersInfo(this.chat.roomId, 'anotherChatUsers');
    },
    transaction: function transaction() {
      return functions["a" /* default */].deep(window, 'POCKETNETINSTANCE.platform.ui.wallet.send');
    },
    uusers: function uusers() {
      if (this.u) {
        return index_all["default"].map(this.u.split(','), function (u) {
          return u;
        });
      }

      return [];
    },
    ausers: function ausers() {
      var _this = this;

      if (this.u) {
        return index_all["default"].map(this.u.split(','), function (u) {
          return _this.core.user.matrixId(u);
        });
      }

      return [];
    },
    stateChat: function stateChat() {
      var id = this.$route.query.id;
      return this.$store.state.chatsMap[id];
    },
    invited: function invited() {
      if (!this.chat) {
        if (this.u) return this.ausers;
        return [];
      }

      return index_all["default"].map(index_all["default"].filter(this.chat.currentState.getMembers(), function (m, v) {
        return m.membership === 'invite';
      }), function (u) {
        return u.userId;
      });
    },
    joined: function joined() {
      if (!this.chat) return [];
      var roomId = this.chat.roomId;
      var self = this;
      var arr = [];
      var members = 0;
      this.chat.currentState.getMembers().forEach(function (user) {
        if (user.membership === 'join') {
          arr.push(user.userId);
        }
      });
      return arr;
    },
    tipusers: function tipusers() {
      if (this.tipvalue === null) return [];
      if (this.tipvalue === '') return this.userlist;
      var value = this.tipvalue.toLowerCase();

      var u = index_all["default"].filter(this.userlist, function (u) {
        return u.name.toLowerCase().indexOf(value) == 0 && u.name.toLowerCase() != value;
      });

      return u;
    },
    maintipuser: function maintipuser() {
      if (this.tipusers.length) {
        return this.tipusers[this.tipuserindex || 0];
      }

      return null;
    },
    recordViewData: function recordViewData() {
      if (this.recordRmsData.length) {
        var length = this.recordRmsData.length;
        var step = this.recordRmsData.length / 100;

        if (length > 100) {
          var result = [];

          for (var i = 0; i < 100; i++) {
            result.push(this.recordRmsData[Math.round(i * step)]);
          }

          return result;
        }
      }

      return this.recordRmsData;
    }
  }),
  created: function created() {},
  ///
  mounted: function mounted() {
    this.ready = true;

    if (!this.chat && this.core.mtrx.client) {
      this.newchat().catch(function (e) {
        return Promise.resolve();
      });
    }
  },
  methods: {
    wait: function wait() {
      var _this2 = this;

      return this.$f.pretry(function () {
        return _this2.core.mtrx.client && _this2.core.mtrx.access;
      });
    },
    browsetip: function browsetip(increase) {
      increase ? this.tipuserindex++ : this.tipuserindex--;

      if (this.tipuserindex > this.tipusers.length - 1) {
        this.tipuserindex = 0;
      }

      if (this.tipuserindex < 0) {
        this.tipuserindex = this.tipusers.length - 1;
      }
    },
    selectcurrenttip: function selectcurrenttip() {
      this.insertuser(this.tipusers[this.tipuserindex || 0]);
    },
    insertuser: function insertuser() {
      var user = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var name = user.name || '';
      this.$refs['newinput'].inserttip(name);
    },
    tipBySearch: function tipBySearch(value) {
      this.tipvalue = value;
    },
    showuserselected: function showuserselected(contact, action) {
      this[action](contact);
    },
    sendtransactionWrapper: function sendtransactionWrapper() {
      var _this3 = this;

      this.menuIsVisible = false;

      var users = index_all["default"].filter(index_all["default"].map(this.joined, function (j) {
        return _this3.$f.deep(_this3, '$store.state.users.' + _this3.$f.getmatrixid(j)) || null;
      }), function (r) {
        var _this3$core$user$user;

        return r && r.source && r.id != ((_this3$core$user$user = _this3.core.user.userinfo) === null || _this3$core$user$user === void 0 ? void 0 : _this3$core$user$user.id);
      });

      if (!users.length) {
        return 'users.length';
      }

      if (users.length > 1) {
        this.core.store.commit('setmodal', {
          caption: this.$i18n.t("caption.sendTransactionTo"),
          type: 'showuserselect',
          data: {
            users: users,
            action: 'sendtransaction',
            userselected: function userselected(c) {
              _this3.showuserselected(c, 'sendtransaction');
            }
          }
        });
        /*this.showuserselect = {
          users : users,
          action : 'sendtransaction'
        }*/
      } else {
        this.sendtransaction(users[0]);
      }

      this.$refs.dropdownMenu.hidePopup();
    },
    sendtransaction: function sendtransaction(user) {
      var api = this.transaction; //TODO get address and send transaction

      api({
        roomid: this.chat.roomId,
        address: user.source.address
      });
      /*.then(({txid, from}) => {
          return this.core.mtrx.transaction(this.chat.roomId, txid)
        })*/
    },
    emitInputData: function emitInputData() {
      this.$emit('emptyInput');
      this.upload = true;
    },
    HideUploadPic: function HideUploadPic() {
      this.upload = false;
    },
    emitUrl: function emitUrl(url) {
      this.$emit('setMetaUrl', url);
    },
    newchat: function newchat() {
      var _this4 = this;

      if (this.u) {
        this.$store.state.globalpreloader = true;
        var matrixId = null;
        var myMatrixId = null;
        var chat = null;
        var id = '';
        this.creating = true;
        return this.core.user.usersInfo(this.uusers).then(function (info) {
          if (_this4.uusers.length == 1) {
            var _info = info[0];

            if (!_info || !_info.keys || _info.keys.length < 12) {
              _this4.$emit('cantchatcrypto');

              return Promise.reject('ny2');
            }
          }

          if (_this4.core.user.userinfo.keys.length < 12) {
            _this4.$emit('cantchatcrypto');

            return Promise.reject('ny2');
          } //return Promise.reject('ny3')


          id = _this4.core.mtrx.kit.tetatetid(info[0], _this4.core.user.userinfo);
          matrixId = _this4.core.user.matrixId(info[0].id);
          myMatrixId = _this4.core.user.matrixId(_this4.core.user.userinfo.id);
          var initialstate = [{
            "type": "m.set.encrypted",
            "state_key": "",
            "content": {
              encrypted: true
            }
          }];
          return _this4.core.mtrx.client.createRoom({
            room_alias_name: id,
            visibility: 'private',
            invite: [matrixId],
            name: '#' + id,
            initial_state: initialstate
          });
        }).then(function (_chat) {
          chat = _chat;
          _this4.$store.state.globalpreloader = false;

          var m_chat = _this4.core.mtrx.client.getRoom(_chat.room_id);

          var event = m_chat.currentState.getStateEvents("m.room.power_levels");
          return _this4.core.mtrx.client.setPowerLevel(chat.room_id, matrixId, 100, event[0]).catch(function (e) {});
        }).then(function (r) {
          _this4.creating = false;

          if (_this4.connect && _this4.connect == id) {
            _this4.greetings();
          }

          _this4.$store.commit('CONTACT', false);

          return Promise.resolve();
        }).catch(function (e) {
          _this4.creating = false;
          _this4.$store.state.globalpreloader = false;

          if (e && e.errcode == 'M_ROOM_IN_USE') {
            return _this4.core.mtrx.client.joinRoom('#' + id + ':' + _this4.core.mtrx.baseUrl.replace("https://", "")).then(function () {}).catch(function (e) {});
          }

          return Promise.reject(e);
        });
      } else {
        return Promise.reject('u');
      }
    },
    maySendMessage: function maySendMessage() {
      return this.chat && this.chat.maySendMessage();
    },
    greetings: function greetings() {
      this.send('👋').then(function (r) {
        return Promise.resolve(r);
      });
    },
    sendinput: function sendinput(text) {
      this.send(text).then(function (r) {
        return Promise.resolve(r);
      });
    },
    textCutLimit: function textCutLimit(text, limit) {
      text = text.trim();
      if (text.length <= limit) return text;
      text = text.slice(0, limit);
      return text.trim() + "...";
    },
    replaceMentions: function replaceMentions(text) {
      index_all["default"].each(this.userlist, function (user) {
        text = text.replace(new RegExp('@' + user.name, 'g'), '@' + user.id + ':' + user.name);
      });

      return text;
    },
    send: function send(text) {
      var _this5 = this;

      if (!this.chat) {
        this.newchat().catch(function (e) {});
      }

      this.$emit("sending");

      if (!this.relationEvent) {
        this.focus();
      }

      return this.$f.pretry(function () {
        return _this5.chat && !_this5.creating;
      }).then(function (r) {
        _this5.$emit('sent');

        text = _this5.replaceMentions(text);

        if (_this5.relationEvent) {
          if (_this5.relationEvent.type == 'm.replace' && _this5.relationEvent.event) {
            return _this5.core.mtrx.textEvent(_this5.chat, text).then(function (r) {
              r['m.relates_to'] = {
                "rel_type": "m.replace",
                "event_id": _this5.core.mtrx.clearEventId(_this5.relationEvent.event) || functions["a" /* default */].makeid()
              };
              var editEvent = r;
              _this5.relationEvent.event.event.content.body = r.body;
              _this5.relationEvent.event.event.content.block = r.block;
              _this5.relationEvent.event.event.content.msgtype = r.msgtype;
              delete _this5.relationEvent.event.event.decryptKey;
              delete _this5.relationEvent.event.event.decrypted;
              return _this5.core.mtrx.client.sendEvent(_this5.chat.roomId, 'm.room.message', editEvent);
            }).then(function (r) {
              _this5.core.store.dispatch('FETCH_EVENTS');

              _this5.$emit('clearRelationEvent');

              _this5.$emit('force');

              return Promise.resolve();
            }).catch(function (e) {
              return Promise.reject(e);
            });
          }
        }

        return _this5.core.mtrx.sendtext(_this5.chat, text, {
          relation: _this5.relationEvent
        });
      }).catch(function (e) {
        _this5.$emit('sentMessageError', {
          error: e
        });
      });
    },
    pasteImage: function pasteImage(data) {
      this.sendImage({
        base64: data
      });
    },
    sendImage: function sendImage(_ref) {
      var _this6 = this;

      var base64 = _ref.base64,
          file = _ref.file;
      var id = functions["a" /* default */].makeid();
      var meta = {
        type: "image",
        id: id,
        base64: base64
      };
      this.$emit("sendingData", meta); //setTimeout(() => {

      this.$f.pretry(function () {
        return _this6.chat;
      }).then(function () {
        if (meta.aborted) return Promise.reject('aborted');
        return _this6.core.mtrx.sendImage(_this6.chat, base64, null, meta, {
          relation: _this6.relationEvent
        });
      }).then(function (r) {
        _this6.$emit("sentData", {
          id: id
        });

        return Promise.resolve();
      }).catch(function (e) {
        _this6.$emit('sentError', {
          id: id,
          error: e
        });

        return Promise.resolve();
      }); //}, 5000)
    },
    canencryptfilesize: function canencryptfilesize(file) {
      var s = 10 * 1024 * 1024;

      if (!this.chat.pcrypto.canBeEncrypt()) {
        return Promise.resolve(false);
      }

      if (file.size > s) {
        return this.$dialog.confirm('Files larger than 10 megabytes are not encrypted. Do you want to send the file unencrypted?', {
          okText: 'Yes',
          cancelText: 'No, cancel'
        }).then(function (dialog) {
          return Promise.resolve(true);
        }).catch(function (e) {
          return Promise.reject('cancel');
        });
      }

      return Promise.resolve(false);
    },
    sendFile: function sendFile(_ref2) {
      var _this7 = this;

      var file = _ref2.file;
      var id = functions["a" /* default */].makeid();
      var meta = {
        type: "file",
        id: id,
        info: {
          name: file.name,
          size: file.size
        }
      };
      this.$emit("sendingData", meta);
      this.$f.pretry(function () {
        return _this7.chat;
      }).then(function () {
        return _this7.canencryptfilesize(file);
      }).then(function (notenc) {
        return _this7.core.mtrx.sendFile(_this7.chat, file, meta, {
          relation: _this7.relationEvent
        }, notenc);
      }).then(function () {
        _this7.$emit("sentData", {
          id: id
        });

        return Promise.resolve();
      }).catch(function (e) {
        _this7.$emit('sentError', {
          id: id,
          error: e
        });
      });
    },
    focus: function focus() {
      if (this.$refs['newinput']) this.$refs['newinput'].focus();
    },
    focused: function focused() {
      this.$emit('focused');
    },
    blur: function blur() {
      if (this.$refs['newinput']) this.$refs['newinput'].blur();
    },
    blurifempty: function blurifempty() {
      if (this.$refs['newinput']) this.$refs['newinput'].blurifempty();
    },
    change: function change() {},
    setText: function setText(text) {
      this.text = text;
      if (this.$refs['newinput']) this.$refs['newinput'].setText(text);
    },
    keyup: function keyup(evt) {
      var value = evt.target.value;

      if (value === '') {
        this.$emit('inputClean', false);
        return;
      } else {
        this.$emit('inputClean', true);
      }

      this.text = value;
      this.anyUrlMeta = functions["a" /* default */].getUrl(this.text);

      if (this.anyUrlMeta !== undefined) {
        this.$emit('setMetaUrl', this.anyUrlMeta);
      } else {
        this.$emit('inputClean', false);
      }

      if (this.chat) this.core.mtrx.client.sendTyping(this.chat.roomId, true, 100);
    },
    menuItemClick: function menuItemClick(item, rowObject) {
      this[item.click](rowObject);
    },
    menuItemLoadedHandler: function menuItemLoadedHandler(value) {
      this.menuIsVisible = value;
      return this.menuIsVisible;
    },
    uploadStart: function uploadStart(item, files) {},
    uploadError: function uploadError(item, error) {
      this.$store.commit('icon', {
        icon: 'error',
        message: error.text
      });
    },
    getImg: function getImg() {
      return this.imgs = true;
    },
    uploadSizeError: function uploadSizeError(value) {
      if (!value) {
        this.$refs.dropdownMenu.hidePopup();
      }
    },
    uploadUploaded: function uploadUploaded(item, data) {
      var validImageTypes = ['image/gif', 'image/jpeg', 'image/png', 'image/webp'];

      if (!validImageTypes.includes(data.file.type)) {
        this.sendFile(data);
      } else {
        return this.sendImage(data);
      }
    },
    imageWH: function imageWH(file) {
      var img = new Image();
      var imgInfo = {};
      return new Promise(function (resolve, reject) {
        img.onload = function () {
          imgInfo.w = this.width;
          imgInfo.h = this.height;
          resolve(imgInfo);
        };

        img.onerror = function (e) {
          reject(e);
        };

        img.src = file.base64;
      });
    },
    uploadUploadedAll: function uploadUploadedAll(item, result) {
      this.$store.state.loading = false;
      this.$refs.dropdownMenu.hidePopup();
    },
    initMediaRecorder: function initMediaRecorder() {
      var _this8 = this;

      return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee() {
        return regenerator_default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)) {
                  _context.next = 5;
                  break;
                }

                console.log('getUserMedia supported.');
                return _context.abrupt("return", navigator.mediaDevices.getUserMedia({
                  audio: true
                }).then(function (stream) {
                  var mediaRecorder = new es2019_module["a" /* MediaRecorder */](stream, {
                    mimeType: 'audio/wav'
                  });
                  mediaRecorder.stream = stream;
                  return mediaRecorder;
                }).catch(function (err) {
                  console.log('The following getUserMedia error occured: ' + err);
                  this.microphoneDisabled = true;
                  throw new Error(err);
                }));

              case 5:
                console.log('getUserMedia not supported on your browser!');
                _this8.microphoneDisabled = true;
                return _context.abrupt("return", false);

              case 8:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }))();
    },
    initRecording: function initRecording() {
      var _this9 = this;

      return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee3() {
        return regenerator_default.a.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;

                if (_this9.mediaRecorder) {
                  _context3.next = 12;
                  break;
                }

                console.log('init recorder');
                _context3.next = 5;
                return _this9.initMediaRecorder();

              case 5:
                _this9.mediaRecorder = _context3.sent;
                _this9.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                _this9.audioAnalyser = _this9.audioContext.createAnalyser();
                _this9.audioDataArray = new Uint8Array(_this9.audioAnalyser.frequencyBinCount);

                _this9.mediaRecorder.ondataavailable = /*#__PURE__*/function () {
                  var _ref3 = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee2(event) {
                    return regenerator_default.a.wrap(function _callee2$(_context2) {
                      while (1) {
                        switch (_context2.prev = _context2.next) {
                          case 0:
                            return _context2.abrupt("return", _this9.createVoiceMessage(event));

                          case 1:
                          case "end":
                            return _context2.stop();
                        }
                      }
                    }, _callee2);
                  }));

                  return function (_x) {
                    return _ref3.apply(this, arguments);
                  };
                }();

                _this9.src = _this9.audioContext.createMediaStreamSource(_this9.mediaRecorder.stream);

                _this9.src.connect(_this9.audioAnalyser);

              case 12:
                if (!(_this9.microphoneDisabled && _this9.mediaRecorder)) {
                  _context3.next = 15;
                  break;
                }

                _this9.microphoneDisabled = false;
                return _context3.abrupt("return");

              case 15:
                _this9.isRecording = true;
                _context3.next = 22;
                break;

              case 18:
                _context3.prev = 18;
                _context3.t0 = _context3["catch"](0);
                _this9.microphoneDisabled = true;
                return _context3.abrupt("return", _this9.$dialog.confirm('Access to the microphone is restricted, please check your browser settings.', {
                  okText: 'Yes'
                }));

              case 22:
                _this9.startRecording();

              case 23:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, null, [[0, 18]]);
      }))();
    },
    startRecording: function startRecording() {
      var _this10 = this;

      try {
        this.blockTextSelection();
        this.cancelOpacity = 0;
        this.recordRmsData = [];
        this.recordTime = 0;
        this.record = null;
        this.mediaRecorder.stream.getTracks().forEach(function (track) {
          track.enabled = true;
        });
        this.mediaRecorder.start();
        this.interval = setInterval(function () {
          _this10.dataArray = new Uint8Array(_this10.audioAnalyser.frequencyBinCount);

          _this10.audioAnalyser.getByteFrequencyData(_this10.dataArray);

          _this10.recordRmsData.push(_this10.generateRms(_this10.dataArray));

          _this10.recordTime = _this10.recordTime + 50;
        }, 50);
      } catch (e) {
        this.unblockTextSelection();
        console.log('startRecord', e);
      }
    },
    createVoiceMessage: function createVoiceMessage(event) {
      var _this11 = this;

      return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee4() {
        var audioUrl, audio, track, id;
        return regenerator_default.a.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                console.log('createVoiceMessage', event);
                audioUrl = URL.createObjectURL(event.data);
                audio = new Audio(audioUrl);
                track = _this11.audioContext.createMediaElementSource(audio);
                id = functions["a" /* default */].makeid();
                audio.addEventListener('loadedmetadata', function () {
                  var getDuration = function getDuration() {
                    audio.removeEventListener('timeupdate', getDuration);
                    audio.currentTime = 0;

                    if (audio.duration < 1) {
                      _this11.clear();

                      return;
                    }

                    _this11.record.duration = audio.duration.toPrecision(4);
                  };

                  if (audio.duration === Infinity) {
                    audio.currentTime = 1e101;
                    audio.addEventListener('timeupdate', getDuration);
                  }
                });
                _this11.record = {
                  audio: audio,
                  file: event.data,
                  track: track,
                  id: id,
                  isPlaying: false
                };
                console.log('create message', _this11.record);

              case 8:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }))();
    },
    generateRms: function generateRms(frequencies) {
      return +Math.sqrt(frequencies.reduce(function (a, b) {
        return a + Math.pow(b, 2);
      }) / frequencies.length).toPrecision(4);
    },
    stopRecording: function stopRecording() {
      this.mediaRecorder.stream.getTracks().forEach(function (track) {
        track.enabled = false;
      });
      this.mediaRecorder.stop();
      this.isRecording = false;
      clearInterval(this.interval);
      console.log('stop recording', this.record);
      this.unblockTextSelection();
    },
    sendVoiceMessage: function sendVoiceMessage() {
      var _this12 = this;

      return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee5() {
        var base64, id, meta;
        return regenerator_default.a.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                _this12.recordRmsData = [];
                _context5.next = 3;
                return _this12.convertAudioToBase64(_this12.record.file);

              case 3:
                base64 = _context5.sent;
                id = functions["a" /* default */].makeid();
                meta = {
                  type: "audio",
                  id: id,
                  base64: base64
                };

                _this12.$f.pretry(function () {
                  return _this12.chat;
                }).then(function () {
                  return _this12.core.mtrx.sendAudio(_this12.chat, base64, null, meta, {
                    relation: _this12.relationEvent
                  });
                }).catch(function (e) {
                  _this12.$emit('sentError', {
                    id: id,
                    error: e
                  });

                  return Promise.resolve();
                });

                console.log('message sended');

              case 8:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5);
      }))();
    },
    clear: function clear() {
      this.record = null;
      this.recordRmsData = [];
    },
    convertAudioToBase64: function convertAudioToBase64(blob) {
      return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee6() {
        var reader;
        return regenerator_default.a.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                reader = new FileReader();
                reader.readAsDataURL(blob);
                return _context6.abrupt("return", new Promise(function (resolve) {
                  reader.onloadend = function () {
                    resolve(reader.result);
                  };
                }));

              case 3:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6);
      }))();
    },
    setOpacity: function setOpacity(opacity) {
      this.cancelOpacity = opacity;
    }
  }
});
// CONCATENATED MODULE: ./src/components/chat/input?vue&type=script&lang=js&
 /* harmony default export */ var chat_input_vue_type_script_lang_js_ = (input_vue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/components/chat/input/index.vue



function input_injectStyles (context) {
  
  var style0 = __webpack_require__("e423")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var input_component = Object(componentNormalizer["a" /* default */])(
  chat_input_vue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  input_injectStyles,
  "22eb6a42",
  null
  ,true
)

/* harmony default export */ var input = __webpack_exports__["default"] = (input_component.exports);

/***/ })

}]);
//# sourceMappingURL=matrix-element.6.js.map