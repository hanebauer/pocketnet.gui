(window["matrixElement_jsonp"] = window["matrixElement_jsonp"] || []).push([[1],{

/***/ "0826":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"7b7193d2-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chats/assets/typing.vue?vue&type=template&id=26ac9434&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"typingBlock",staticStyle:{"position":"relative"}},[_c('div',{staticClass:"typingBlockWrapper"},[_c('div',[_c('span',[_vm._v(_vm._s(_vm.$t("caption.typing")))])]),_c('div',[_c('PulseLoader',{attrs:{"color":_vm.color,"size":_vm.size,"loading":true}})],1)])])}
var staticRenderFns = []


// CONCATENATED MODULE: ./src/components/chats/assets/typing.vue?vue&type=template&id=26ac9434&

// EXTERNAL MODULE: ./node_modules/vue-spinner/src/PulseLoader.vue + 4 modules
var PulseLoader = __webpack_require__("8a5d");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chats/assets/typing.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* harmony default export */ var typingvue_type_script_lang_js_ = ({
  name: 'typing',
  props: {},
  components: {
    PulseLoader: PulseLoader["a" /* default */]
  },
  data: function data() {
    return {
      color: '#868686',
      size: '2px',
      loading: true
    };
  },
  methods: {},
  computed: {}
});
// CONCATENATED MODULE: ./src/components/chats/assets/typing.vue?vue&type=script&lang=js&
 /* harmony default export */ var assets_typingvue_type_script_lang_js_ = (typingvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("2877");

// CONCATENATED MODULE: ./src/components/chats/assets/typing.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__("1b86")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  assets_typingvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  null,
  null
  ,true
)

/* harmony default export */ var typing = __webpack_exports__["a"] = (component.exports);

/***/ }),

/***/ "0e25":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".eventWrapper[data-v-3290c2d2] .event{padding:.25em 0}.list-enter-active[data-v-3290c2d2],.list-leave-active[data-v-3290c2d2]{transition:all 1s}.list-enter[data-v-3290c2d2],.list-leave-to[data-v-3290c2d2]{opacity:0}#events[data-v-3290c2d2]{left:0;right:0;top:0;bottom:0;padding-bottom:46px;position:absolute;transition:.3s}#events.mobile[data-v-3290c2d2]{padding-bottom:77px;transform:translate3d(0,calc(var(--keyboardheight, 0)*-1 - -1px),0)}#events.mobile .scrollbottom[data-v-3290c2d2]{bottom:5em}.dummyheight[data-v-3290c2d2]{height:100%;width:2px;left:0;right:0;top:0;bottom:0;background:rgb(var(--color-shadow-base))}.preloadingWrapper[data-v-3290c2d2]{padding:2em;text-align:center;opacity:.5;color:rgb(var(--text-color))}.scrollbottom[data-v-3290c2d2]{position:absolute;right:.5em;bottom:4em;cursor:pointer;border-radius:50%;background:rgb(var(--background-main));box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);color:rgb(var(--color-txt-gray-dark));width:35px;height:35px;line-height:35px;text-align:center;z-index:3}.scrollbottom i[data-v-3290c2d2]{font-size:.7em}.eventsflex[data-v-3290c2d2]{display:flex;flex-flow:column;overflow-y:overlay;overflow-x:hidden;max-width:640px;margin:0 auto;-webkit-overflow-scrolling:touch;-ms-scroll-chaining:none;overscroll-behavior:contain;flex-wrap:nowrap;width:100%;height:100%;scroll-behavior:auto;continue:fragments;justify-content:flex-start;transform:scaleY(-1)}.eventsflex.freeze[data-v-3290c2d2]{overflow-y:hidden}.eventsflex .eventspage[data-v-3290c2d2],.eventsflex .ewr[data-v-3290c2d2]{width:100%;display:flex;flex-flow:column;flex-wrap:nowrap;justify-content:flex-start}.eventsflex .errorWrapper[data-v-3290c2d2]{padding:.5em}.eventsflex .errorWrapper .btnwrp[data-v-3290c2d2]{padding-top:.5em}.eventsflex .errorWrapper .error[data-v-3290c2d2]{padding:1em;border-radius:1em;background:rgb(var(--neutral-grad-0))}.eventsflex .errorWrapper[data-v-3290c2d2],.eventsflex .eventWrapper[data-v-3290c2d2]{width:100%;transform:scaleY(-1)}.eventsflex.mobile[data-v-3290c2d2]{scroll-behavior:smooth}.eventsflex.mobile[data-v-3290c2d2] .dropdown.visible{top:-55px}.eventsflex.mobile[data-v-3290c2d2] .outer-div .backgr,.eventsflex.mobile[data-v-3290c2d2] .outer-div .menuwrapper{position:absolute}.eventsflex.mobile.ios.menuOpen[data-v-3290c2d2]{overflow:visible}.galleryRow[data-v-3290c2d2]{display:flex;align-items:flex-end}.galleryRow .messageImg[data-v-3290c2d2]{max-width:50%;margin:0 10px;position:relative}.galleryRow .messageImg .img[data-v-3290c2d2]{display:block;border-radius:.5em;position:relative;max-width:100%}.galleryRow .messageImg .loadingImg[data-v-3290c2d2]{display:flex;align-items:center;justify-content:center;border-radius:.5em;position:relative;max-width:300px;height:250px}.galleryRow .messageImg .loadingImg .imgPreview[data-v-3290c2d2]{border-radius:.5em;position:relative;max-width:100%;height:100%;opacity:.6}.galleryRow .messageImg .loadingImg .clipLoader[data-v-3290c2d2]{position:absolute;z-index:9999;left:50%;right:0;top:50%;bottom:0;transform:translate(-50,50);display:flex;align-items:center;justify-content:center}.galleryRow .messageImg .imgMsg img[data-v-3290c2d2]{max-width:100%;-o-object-fit:cover;object-fit:cover;border-radius:1em;display:block}.galleryRow .messageImg .metaLink[data-v-3290c2d2]{background:#000}.galleryRow .messageImg .metaLink .metaMessageLink .metaTitle[data-v-3290c2d2]{font-weight:700;font-size:.9em}.galleryRow .messageImg .metaLink .metaMessageLink .metaDescription[data-v-3290c2d2]{margin:.5em 0;font-size:.8em}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper[data-v-3290c2d2]{display:block;max-width:300px;-o-object-fit:cover;object-fit:cover}.galleryRow .messageImg .metaLink .metaMessageLink .metaImgWrapper img[data-v-3290c2d2]{display:block;width:100%;height:100%}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "14b70":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_3290c2d2_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("dfaa");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_3290c2d2_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_3290c2d2_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_3290c2d2_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_3290c2d2_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "1b86":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_typing_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("5f7e");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_typing_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_typing_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_typing_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_typing_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ "4e29":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"7b7193d2-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/chat/list/index.vue?vue&type=template&id=ef061e4a&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'bin' : _vm.pocketnet, 'bout' : !_vm.pocketnet, minimized: _vm.minimized, fix : _vm.pocketnet, active: _vm.active},attrs:{"id":"chatList"}},[_c('div',{ref:"work",staticClass:"work"},[_c('div',{ref:"events",staticClass:"timeLineWrapper"},[(_vm.timeline)?_c('events',{ref:"eventslist",attrs:{"error":_vm.error,"timeline":_vm.timeline,"events":_vm.events,"chat":_vm.chat,"loading":_vm.lloading,"scrollType":_vm.scrollType},on:{"updated":_vm.updatedSize,"scroll":_vm.scrollE,"removeEvent":_vm.removeEvent,"editingEvent":_vm.editingEvent,"replyEvent":_vm.replyEvent,"galleryEventOpen":function (e) { return _vm.imageGallery(e); },"menuIsVisible":_vm.menuIsVisibleHandler}}):_vm._e()],1)])])}
var staticRenderFns = []


// CONCATENATED MODULE: ./src/components/chat/list/index.vue?vue&type=template&id=ef061e4a&scoped=true&

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__("1da1");

// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__("a34a");
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.error.cause.js
var es_error_cause = __webpack_require__("d9e2");

// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js
var vuex_esm = __webpack_require__("2f62");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"7b7193d2-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/events/list/index.vue?vue&type=template&id=3290c2d2&scoped=true&
var listvue_type_template_id_3290c2d2_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"maskedtop",class:{mobile: _vm.mobile, ios: _vm.ios, menuOpen: _vm.menuOpen, imagesList: (this.scrollType === 'custom' ? 'imagesList' : '')},attrs:{"id":"events"}},[_c('div',{ref:"container",staticClass:"eventsflex",class:{mobile: _vm.mobile, ios: _vm.ios, menuOpen: _vm.menuOpen},on:{"mousewheel":_vm.mousewheel,"scroll":_vm.dscroll}},[_c('div',{staticClass:"ewr"},[(_vm.stringifyiedError)?_c('div',{staticClass:"errorWrapper"},[_c('div',{staticClass:"error"},[_c('div',[_vm._v(_vm._s(_vm.$t("sendingerror")))]),_c('div',{staticClass:"btnwrp"},[_c('button',{staticClass:"button small",on:{"click":_vm.showerror}},[_vm._v(_vm._s(_vm.$t("details")))])])])]):_vm._e(),_vm._l((_vm.events),function(event,i){return _c('div',{key:event.event.event_id,staticClass:"eventWrapper"},[_c('eventsEvent',{attrs:{"event":event,"prevevent":_vm.events[i+1],"galleryData":_vm.events,"chat":_vm.chat,"timeline":_vm.timeline,"last":i == 0},on:{"openImageEvent":function (e) { return _vm.galleryOpen(e); },"removeEvent":function (e) { return _vm.removeEvent(event); },"editing":function (text) { return _vm.editingEvent({event: event, text: text}); },"reply":function (e) { return _vm.replyEvent({event: event}); },"mounted":_vm.emounted,"menuIsVisible":_vm.menuIsVisibleHandler}})],1)})],2),(_vm.loading)?_c('div',{staticClass:"preloadingWrapper"},[_c('linepreloader')],1):_vm._e()]),_c('transition',{attrs:{"name":"fade"}},[_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.scrollbottomshow),expression:"scrollbottomshow"}],staticClass:"scrollbottom",on:{"click":_vm.scrolldown}},[_c('i',{staticClass:"fas fa-chevron-down"})])])],1)}
var listvue_type_template_id_3290c2d2_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/components/events/list/index.vue?vue&type=template&id=3290c2d2&scoped=true&

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__("5530");

// EXTERNAL MODULE: ./src/application/functions.js
var functions = __webpack_require__("3139");

// EXTERNAL MODULE: ./node_modules/underscore/modules/index-all.js + 159 modules
var index_all = __webpack_require__("c46f");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./src/components/events/list?vue&type=script&lang=js&





/* harmony default export */ var list_vue_type_script_lang_js_ = ({
  name: 'events',
  props: {
    timeline: Object,
    events: Array,
    chat: Object,
    loading: Boolean,
    scrollType: '',
    error: [Object, Error, String]
  },
  components: {},
  data: function data() {
    return {
      type: '',
      tmt: null,
      lscroll: null,
      menuOpen: false,
      c: 1,
      ls: 0
    };
  },
  watch: {
    events: function events() {}
  },
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({
    ios: function ios() {
      return functions["a" /* default */].isios();
    }
  }, Object(vuex_esm["c" /* mapState */])({
    auth: function auth(state) {
      return state.auth;
    },
    mobile: function mobile(state) {
      return state.mobile;
    },
    scrollbottomshow: function scrollbottomshow() {
      return this.lscroll && this.lscroll.scrollTop > 500;
    }
  })), {}, {
    eventsByPages: function eventsByPages() {
      var ps = [];
      var pc = 0;

      index_all["each"](this.events, function (e) {
        if (!pc) ps.push([]);
        ps[ps.length - 1].push(e);
        pc++;
        if (pc > 19) pc = 0;
      });

      return ps;
    },
    stringifyiedError: function stringifyiedError() {
      return functions["a" /* default */].stringify(this.error);
    }
  }),
  destroyed: function destroyed() {
    this.core.menu(null);
  },
  mounted: function mounted() {},
  methods: {
    showerror: function showerror() {
      // stringifyiedError
      return this.$dialog.alert(this.stringifyiedError, {
        okText: 'Ok',
        backdropClose: true
      }).catch(function (e) {});
    },
    dupdated: index_all["debounce"](function () {
      this.$emit('updated', this.size());
    }, 75),
    dscroll: index_all["debounce"](function () {
      return this.scroll();
    }, 35),
    ddscroll: function ddscroll(e) {
      /*var _ls = this.$refs['container'].scrollTop 
        if (Math.abs(_ls - this.ls) > 500 && this.c * _ls < this.c * this.ls){
      }
      else{
          this.ls = _ls
      }*/
      this.dscroll();
    },
    emounted: function emounted() {
      this.$nextTick(function () {
        this.scrollCorrection();
        this.dupdated();
      });
    },
    scroll: function scroll() {
      this.$emit('scroll', this.size());
    },
    size: function size() {
      var s = {
        scrollHeight: 0,
        scrollTop: 0,
        clientHeight: 0
      };

      if (this.$refs['container']) {
        s.scrollHeight = this.$refs['container'].scrollHeight;
        s.scrollTop = this.c * this.$refs['container'].scrollTop;
        s.clientHeight = this.$refs['container'].clientHeight;
      }

      this.lscroll = s;
      return s;
    },
    editingEvent: function editingEvent(_ref) {
      var event = _ref.event,
          text = _ref.text;
      this.$emit('editingEvent', {
        event: event,
        text: text
      });
    },
    replyEvent: function replyEvent(_ref2) {
      var event = _ref2.event;
      this.$emit('replyEvent', {
        event: event
      });
    },
    removeEvent: function removeEvent(event) {
      this.$emit('removeEvent', event);
    },
    showPhotoSwipe: function showPhotoSwipe(index) {
      this.isOpen = true;
      this.$set(this.options, 'index', index);
    },
    hidePhotoSwipe: function hidePhotoSwipe() {
      this.isOpen = false;
    },
    galleryOpen: function galleryOpen(e) {
      this.$emit('galleryEventOpen', e);
    },
    scrolldown: function scrolldown() {
      this.scrollToNew(0);
    },
    scrollCorrection: function scrollCorrection() {//this.scrollToNew(this.c * this.ls)
    },
    scrollToNew: function scrollToNew(s) {
      if (this.$refs['container']) {
        this.$refs['container'].scrollTop = this.c * s;
      }
    },
    menuIsVisibleHandler: function menuIsVisibleHandler(isVisible) {
      this.menuOpen = isVisible;
      this.$emit('menuIsVisible', isVisible);
    },
    mousewheel: function mousewheel(e) {
      if (this.scrollType === 'custom') {
        return;
      } else {
        e.preventDefault();
        var dy = e.deltaY;
        this.$refs['container'].scrollTop += dy > 0 ? -60 : 60;
        return false;
      }
    }
  }
});
// CONCATENATED MODULE: ./src/components/events/list?vue&type=script&lang=js&
 /* harmony default export */ var events_list_vue_type_script_lang_js_ = (list_vue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("2877");

// CONCATENATED MODULE: ./src/components/events/list/index.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__("14b70")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  events_list_vue_type_script_lang_js_,
  listvue_type_template_id_3290c2d2_scoped_true_render,
  listvue_type_template_id_3290c2d2_scoped_true_staticRenderFns,
  false,
  injectStyles,
  "3290c2d2",
  null
  ,true
)

/* harmony default export */ var list = (component.exports);
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./src/components/chat/list?vue&type=script&lang=js&






/* harmony default export */ var chat_list_vue_type_script_lang_js_ = ({
  name: 'chatList',
  props: {
    chat: Object,
    filterType: String,
    error: [Object, Error, String]
  },
  components: {
    events: list
  },
  data: function data() {
    return {
      encryptedEvents: [],
      loading: false,
      scrolling: false,
      scrollingTo: 0,
      cancelNextScroll: false,
      timeline: null,
      lastEvent: {},
      scrollType: String,
      esize: {},
      p_b: false,
      p_f: false,
      updateTimeout: null,
      updateInterval: null,
      events: [],
      firstPaginate: true
    };
  },
  mounted: function mounted() {
    this.init();

    if (this.chat) {
      this.readAll();
    }
  },
  watch: {
    //$route: 'getdata'
    active: function active() {
      if (this.minimized && !this.active) {
        this.scrollToNew(0);
      }

      if (this.minimized && this.active) {
        this.readAll();
      }
    }
  },
  computed: Object(vuex_esm["c" /* mapState */])({
    lloading: function lloading() {
      return this.loading || this['p_f'] || this['p_b'];
    },
    auth: function auth(state) {
      return state.auth;
    },
    settings_read: function settings_read(state) {
      return !state.dontreadreceipts;
    },
    eventsTypes: function eventsTypes() {
      var types = {
        'm.room.message': true,
        'p.room.encrypt.message': true,
        'm.room.image': true,
        'm.room.file': true,
        'm.room.member': true,
        'm.fully_read': true
      };

      if (_.toArray(this.chat && this.chat.currentState.members || {}).length > 2) {
        types['m.room.member'] = true;
        types['m.room.power_levels'] = true;
      }

      return types;
    },
    pocketnet: function pocketnet(state) {
      return state.pocketnet;
    },
    minimized: function minimized(state) {
      return state.minimized;
    },
    active: function active(state) {
      return state.active;
    },
    bin: function bin(state) {
      return state.pocketnet;
    }
  }),
  created: function created() {
    this.updateInterval = setInterval(this.update, 300);
  },
  destroyed: function destroyed() {
    if (this.timeline) {
      this.timeline.unpaginate(this.timeline._eventCount, true);
    }

    clearInterval(this.updateInterval);
  },
  methods: {
    editingEvent: function editingEvent(_ref) {
      var event = _ref.event,
          text = _ref.text;
      this.$emit('editingEvent', {
        event: event,
        text: text
      });
    },
    replyEvent: function replyEvent(_ref2) {
      var event = _ref2.event;
      this.$emit('replyEvent', {
        event: event
      });
    },
    removeEvent: function removeEvent(event) {
      this.chat.getLiveTimeline().removeEvent(event.event.event_id);
    },
    wh: function wh() {
      if (this.esize.clientHeight) return this.esize.clientHeight;
    },
    getEvents: function getEvents() {
      var _this = this;

      var events = this.timeline.getEvents();
      events = _.filter(events, function (e) {
        var type = e.event.type;
        if (e.localRedactionEvent() || e.getRedactionEvent()) return;

        if (e.event.type === 'm.room.power_levels' && Object.keys(e.event.content.users).length === 1) {
          return;
        }

        if (_this.chat.currentState.getMembers().length <= 2 && e.event.type === 'm.room.member' && 'm.room.power_levels') {
          return;
        }

        return !_this.eventsTypes || _this.eventsTypes[type];
      });
      events = events.reverse();
      this.relations(events);
      events = _.sortBy(events, function (e) {
        return e.replacingEventDate() || e.getDate() || Infinity;
      });
      events = events.reverse();
      events = _.uniq(events, function (e) {
        return _this.core.mtrx.clearEventId(e) || functions["a" /* default */].makeid();
      });
      events = _.sortBy(events, function (e) {
        return e.getDate() || Infinity;
      });
      events = events.reverse();
      this.$emit('getEvents', events);
      return events;
    },
    getEventsAndEncrypt: function getEventsAndEncrypt() {
      var _this2 = this;

      var events = this.getEvents();
      return Promise.all(_.map(events, function (e) {
        if (!_this2.chat.pcrypto) return Promise.resolve();
        if (e.event.decrypted) return Promise.resolve();
        if (functions["a" /* default */].deep(e, 'event.content.msgtype') != 'm.encrypted') return Promise.resolve();
        return _this2.chat.pcrypto.decryptEvent(e.event).then(function (d) {
          e.event.decrypted = d;
          return Promise.resolve();
        }).catch(function (e) {
          e.event.decrypted = {
            msgtype: 'm.bad.encrypted'
          };
          return Promise.resolve();
        });
      })).then(function () {
        return Promise.resolve(events);
      });
    },
    relations: function relations(events) {
      var ts = this.timeline._timelineSet;

      _.each(events, function (e) {
        try {
          //if(!e.event.content.edited){
          var rt = ts.getRelationsForEvent(e.event.event_id, 'm.replace', 'm.room.message');

          if (rt) {
            var last = rt.getLastReplacement();

            if (last) {
              e.event.content.body = last.event.content.body;
              e.event.content.edited = last.event.event_id;
              e.event.content.block = last.event.content.block;
              e.event.content.msgtype = last.event.content.msgtype;
            }
          }
        } catch (e) {
          console.error(e);
        }
      });
    },
    mediaTimelineSet: function () {
      var _mediaTimelineSet = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee() {
        var filter;
        return regenerator_default.a.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                filter = new core.mtrx.sdk.Filter(client.getUserId());
                filter.setDefinition({
                  "room": {
                    "timeline": {
                      "contains_url": true,
                      "types": ["m.room.message"]
                    }
                  }
                });
                _context.next = 4;
                return client.getOrCreateFilter("FILTER_FILES_" + client.credentials.userId, filter);

              case 4:
                filter.filterId = _context.sent;
                return _context.abrupt("return", this.chat.getOrCreateFilteredTimelineSet(filter));

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function mediaTimelineSet() {
        return _mediaTimelineSet.apply(this, arguments);
      }

      return mediaTimelineSet;
    }(),
    init: function () {
      var _init = Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee2() {
        var _this3 = this;

        var timeline, ts;
        return regenerator_default.a.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                this.loading = true;
                this.firstPaginate = true;
                timeline = this.chat.getLiveTimeline();

                if (!(this.filterType === 'images')) {
                  _context2.next = 10;
                  break;
                }

                this.scrollType = 'custom';
                _context2.next = 7;
                return this.mediaTimelineSet();

              case 7:
                ts = _context2.sent;
                _context2.next = 11;
                break;

              case 10:
                ts = timeline.getTimelineSet();

              case 11:
                this.timeline = new this.core.mtrx.sdk.TimelineWindow(this.core.mtrx.client, ts);
                setTimeout(function () {
                  _this3.timeline.load().then(function (r) {
                    return _this3.getEventsAndEncrypt();
                  }).then(function (events) {
                    _this3.events = events;
                    _this3.loading = false;
                    setTimeout(function () {
                      _this3.autoPaginateAll();
                    }, 300);
                  }).catch(function (e) {
                    _this3.loading = false;
                  });
                }, 30);

              case 13:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function init() {
        return _init.apply(this, arguments);
      }

      return init;
    }(),
    autoPaginate: function autoPaginate(direction) {
      if (this.needLoad(direction)) {
        this.paginate(direction);
      }
    },
    paginate: function paginate(direction, rnd) {
      var _this4 = this;

      //$(this.$el).find('.eventsflex')[0]
      if (!this.loading && this.timeline && !this['p_' + direction]) {
        if (this.timeline.canPaginate(direction) || rnd) {
          this['p_' + direction] = true;
          var count =
          /*this.firstPaginate ? 24 : */
          20;
          this.timeline.paginate(direction, count).then(function (e) {
            return Promise.resolve();
          }).catch(function (e) {
            return Promise.resolve();
          }).then(function (r) {
            return _this4.getEventsAndEncrypt();
          }).then(function (events) {
            _this4.events = events;
            _this4.firstPaginate = false;

            _this4.readAll();

            _this4['p_' + direction] = false;
          });
        } else {
          this.readAll();
        }
      }
    },
    autoPaginateAll: function autoPaginateAll() {
      if (this.filterType === 'images') {
        this.autoPaginate('b');
      } else {
        this.autoPaginate('b');
        this.autoPaginate('f');
      }
    },
    needLoad: function needLoad(direction) {
      var r = false;
      var scrollHeight = this.esize.scrollHeight || 0;
      var scrollTop = this.esize.scrollTop || 0;
      var clientHeight = Math.max(this.esize.clientHeight || 0, 800);

      if (direction == 'b') {
        var safespace = clientHeight;
        if (scrollHeight - scrollTop < clientHeight + safespace) r = true;
      } else {
        if (scrollTop < clientHeight) r = true;
      }

      return r;
    },
    readEvent: function readEvent(event) {
      var byme = this.core.mtrx.me(event.event.sender);

      if (byme) {
        return;
      }

      this.core.mtrx.client.sendReadReceipt(event);
    },
    readFirst: function readFirst() {
      var events = this.timeline.getEvents();
      this.readEvent(events[0]);
    },
    readLast: function readLast() {
      var events = this.timeline.getEvents();
      this.readEvent(events[events.length - 1]);
    },
    readEvents: function readEvents(events) {
      var _this5 = this;

      _.each(events, function (e) {
        _this5.readEvent(e);
      });
    },
    readOne: function readOne() {
      this.core.mtrx.client(this.chat.timeline[this.chat.timeline.length - 1]).then(function (r) {
        return r;
      });
    },
    readAll: function readAll() {
      var _this6 = this;

      if (document.hasFocus() && (!this.pocketnet || this.active) && !this.core.hiddenInParent && this.chat && this.chat.getJoinedMemberCount() > 0 && this.chat.getUnreadNotificationCount() !== 0) setTimeout(function () {
        if (!_this6.chat) return;
        var i = _this6.chat.timeline.length - 1;
        var event = null;

        while (i >= 0 && !event) {
          var e = _this6.chat.timeline[i];

          if (!_this6.core.mtrx.me(e.sender.userId)) {
            event = e;
          }

          i--;
        }

        _this6.core.mtrx.client.setRoomReadMarkers(_this6.chat.currentState.roomId, e.eventId, e, {
          hidden: !_this6.settings_read ? true : false
        }).then(function (r) {
          return r;
        });
      }, 1000);
    },
    //////////////
    scrollE: function scrollE(size) {
      this.updatedSize(size);
      this.$emit('scroll', size);
    },
    updatedSize: function updatedSize(size) {
      this.esize = size;
    },
    update: function update(e) {
      if (!this.scrolling) {
        this.autoPaginateAll();
      } else {// e.preventDefault()
      }
    },
    scrollToNew: function scrollToNew(s) {
      this.scrolling = true;
      this.$refs.eventslist.scrollToNew(s);
      this.scrolling = false;
    },
    imageGallery: function imageGallery(e) {
      this.$emit('eventImage', e);
    },
    menuIsVisibleHandler: function menuIsVisibleHandler(isVisible) {
      this.$emit('menuIsVisible', isVisible);
    }
  }
});
// CONCATENATED MODULE: ./src/components/chat/list?vue&type=script&lang=js&
 /* harmony default export */ var components_chat_list_vue_type_script_lang_js_ = (chat_list_vue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/components/chat/list/index.vue



function list_injectStyles (context) {
  
  var style0 = __webpack_require__("e127")
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var list_component = Object(componentNormalizer["a" /* default */])(
  components_chat_list_vue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  list_injectStyles,
  "ef061e4a",
  null
  ,true
)

/* harmony default export */ var chat_list = __webpack_exports__["a"] = (list_component.exports);

/***/ }),

/***/ "5b0c":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, "[data-v-ef061e4a] .eventMember{text-align:left}[data-v-ef061e4a] .eventMember span{font-size:.9em}.pswp img[data-v-ef061e4a]{max-width:none;-o-object-fit:contain;object-fit:contain}#chatList.minimized:not(.active) .timeLineWrapper[data-v-ef061e4a]{padding-left:.5em}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "5f7e":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("bd86");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("e96d3eb2", content, shadowRoot)
};

/***/ }),

/***/ "7b62":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("5b0c");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("3b601183", content, shadowRoot)
};

/***/ }),

/***/ "bd86":
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__("24fb");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".typingBlock{position:relative}.typingBlock .typingBlockWrapper{position:absolute;left:50%;transform:translateX(-50%);top:-5px;display:flex;align-items:center}.typingBlock .typingBlockWrapper>div{padding:0 .5em}.typingBlock .typingBlockWrapper span{font-size:.7em;color:rgb(var(--neutral-grad-3));opacity:.8}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "dfaa":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("0e25");
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = __webpack_require__("35d6").default
module.exports.__inject__ = function (shadowRoot) {
  add("9d9cb5ce", content, shadowRoot)
};

/***/ }),

/***/ "e127":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_ef061e4a_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("7b62");
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_ef061e4a_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_ef061e4a_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_ef061e4a_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_10_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_10_oneOf_1_4_index_sass_vue_type_style_index_0_id_ef061e4a_scoped_true_lang_sass___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ })

}]);
//# sourceMappingURL=matrix-element.1.js.map