(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ec41fe0"],{1495:function(t,e,a){"use strict";a("ee3f")},"2eed":function(t,e,a){"use strict";a("71af")},"71af":function(t,e,a){},9394:function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chat?a("div",{staticClass:"page "},[a("topheader",{staticClass:"topheader"}),a("maincontent",{scopedSlots:t._u([{key:"content",fn:function(){return[a("settings",{attrs:{chat:t.chat}})]},proxy:!0}],null,!1,32150248)})],1):t._e()},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"chatTopheader"}},[a("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[a("backButton",{attrs:{action:"back"}})]},proxy:!0},{key:"info",fn:function(){return[a("span",[t._v(t._s(t.$t("caption.settings")))])]},proxy:!0},{key:"right",fn:function(){},proxy:!0}])})],1)},n=[],o={methods:{}},r=o,m=a("2877"),l=Object(m["a"])(r,s,n,!1,null,null,null),h=l.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{minimized:t.minimized,active:t.active},attrs:{id:"chatSettings"}},[a("div",{staticClass:"chatSettingAbout"},[a("div",{class:{chatIconWrapper:"chatIconWrapper",noSwipe:!0}},[t._m(0),a("input",{staticClass:"chatIconFile",attrs:{type:"file",id:"roomImage",accept:"image/*"},on:{change:t.handleImage}}),a("chatIcon",{attrs:{slidesPerView:4,dontuseslides:t.minimized&&!t.active,chat:t.chat,m_chat:t.m_chat,hideunseen:!0}}),t.userImagebase64?a("img",{staticClass:"userImagebase64",attrs:{src:t.userImagebase64,alt:""}}):t._e()],1),a("div",{staticClass:"chatNameEdit"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.m_chat.name,expression:"m_chat.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.m_chat.name},on:{input:function(e){e.target.composing||t.$set(t.m_chat,"name",e.target.value)}}})]),t.topic?a("div",{staticClass:"chatDescription"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.topicTxt,expression:"topicTxt"}],attrs:{type:"text",placeholder:"Description",maxlength:"1000"},domProps:{value:t.topicTxt},on:{input:function(e){e.target.composing||(t.topicTxt=e.target.value)}}})]):t._e(),a("button",{staticClass:"button small rounded inSettings",on:{click:function(e){return t.saveEdited()}}},[t._v(" "+t._s(t.$t("button.save"))+" ")])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"chatIconEditImage",attrs:{for:"roomImage"}},[a("i",{staticClass:"fas fa-camera"})])}],d=a("2f62"),g=a("3094"),f={data:()=>({pubChat:Object,topicTxt:"",topic:!1,userImagebase64:null}),props:{chat:Object,saveClicked:!1},components:{chatIcon:g["a"]},computed:Object(d["c"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,auth:t=>t.auth,m_chat:function(){return this.core.mtrx.client.getRoom(this.chat.roomId)},shareRoomLink:function(){return`https://${this.core.domain}/publicPreview/welcome?connect=${this.chat.roomId.replace("!","%")}`}}),mounted(){var t;const e=null===(t=this.m_chat.currentState.getStateEvents("m.room.avatar")[0])||void 0===t?void 0:t.event.content.avatarUrl;this.userImagebase64=""!==e?e:null,"public"===this.m_chat.getJoinRule()&&(this.getPublicRoom(),this.topic=!0)},methods:{saveEdited(){this.core.mtrx.client.setRoomAvatarUrl(this.m_chat.roomId,this.userImagebase64),this.core.mtrx.client.setRoomName(this.m_chat.roomId,"@"+this.m_chat.name.replace(/[@]*/g,"")),this.core.mtrx.client.setRoomTopic(this.chat.roomId,this.topicTxt.replace(/ /g,"_")).then(t=>t)},getPublicRoom(){this.core.mtrx.client.publicRooms().then(t=>{this.pubChat=t.chunk.filter(t=>t.room_id===this.chat.roomId)[0],this.pubChat["topic"]&&(this.topicTxt=this.pubChat["topic"].replace(/_/g," "))})},handleImage(t){const e=t.target.files[0];this.createBase64Image(e)},createBase64Image(t){const e=new FileReader;e.onload=t=>{this.userImagebase64=t.target.result},e.readAsDataURL(t)}}},v=f,_=(a("2eed"),a("1495"),Object(m["a"])(v,u,p,!1,null,"6570c0c0",null)),b=_.exports,I={name:"chatSettings",data:function(){return{}},components:{topheader:h,settings:b},computed:{chat(){return this.$store.state.chatsMap[this.$route.query.id.replace("%","!")]}},methods:{}},x=I,k=Object(m["a"])(x,c,i,!1,null,null,null);e["default"]=k.exports},ee3f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6ec41fe0.5389a6fc.js.map